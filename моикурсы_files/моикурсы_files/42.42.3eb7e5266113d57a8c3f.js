(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{2058:function(t,i,r){"use strict";r.d(i,"c",(function(){return d})),r.d(i,"b",(function(){return h})),r.d(i,"a",(function(){return g}));var o=r(4),u=r.n(o),a=r(5),_=r.n(a),l=(r(272),r(25),r(7),r(11),r(12),r(43),r(28),r(465),r(466),r(1)),c=r(268),p=r(522),d=function(){function RouteHelper(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),i=arguments.length>1?arguments[1]:void 0;u()(this,RouteHelper),this.current_index=null,this.next_step={},this.previous_step={},this.route_objects=t;var r=this.route_objects.findIndex((function(t){return t.id===i}));-1!==r&&(this.current_index=r,this.next_step=this._get_next_step(),this.previous_step=this._get_previous_step())}return _()(RouteHelper,[{key:"is_last_step",get:function get(){return Boolean(this.current_index===this.route_objects.length-1)}},{key:"is_first_step",get:function get(){return Boolean(0===this.current_index)}},{key:"_get_next_step",value:function _get_next_step(){return 0===this.route_objects.length?{}:this.is_last_step?this.route_objects[0]:this.route_objects[this.current_index+1]}},{key:"_get_previous_step",value:function _get_previous_step(){return 0===this.route_objects.length?{}:this.is_first_step?this.route_objects[this.route_objects.length-1]:this.route_objects[this.current_index-1]}}]),RouteHelper}(),h=function(){function ClientClassesStepsNavigationFactory(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)();u()(this,ClientClassesStepsNavigationFactory),this.state=t,this.classes_id=i}return _()(ClientClassesStepsNavigationFactory,[{key:"get_steps",value:function get_steps(){var t,i=this,r=new c.a(this.state.models.classes[this.classes_id],this.state).get_units()||[];null!==(t=this.state.result)&&void 0!==t&&t.is_preview_mode&&(r=r.filter((function(t){return!t.values.private})));var o=r.map((function(t){return Object(p.c)(i.state,t.values.id)})).filter((function(t){return!!t})),u=[];return o.forEach((function(t){t.values.is_timer_solution&&!t.values.is_started?u.push(function get_unit_route_object(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)();return{id:"unit_id:".concat(i),name:"unit_content",params:{classes_id:t,unit_id:i}}}(i.classes_id,t.unit.values.id)):u.push(t.unit.steps.map((function(t){return get_step_route_object(i.classes_id,t.values.id,get_first_step_element_id(t))})))})),u.flat()}}]),ClientClassesStepsNavigationFactory}(),g=function(){function AdminClassesStepsNavigationFactory(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)();u()(this,AdminClassesStepsNavigationFactory),this.state=t,this.classes_id=i}return _()(AdminClassesStepsNavigationFactory,[{key:"get_steps",value:function get_steps(){var t=this;return new c.a(this.state.models.classes[this.classes_id],this.state).get_units().map((function(t){return t.steps})).flat().map((function(i){return get_step_route_object(t.classes_id,i.values.id,get_first_step_element_id(i))}))}}]),AdminClassesStepsNavigationFactory}();function get_first_step_element_id(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),i=t.step_elements[0];return i?i.values.id:null}function get_step_route_object(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)(),r=arguments.length>2?arguments[2]:void 0;return{id:"step_id:".concat(i),name:"step_content_root",params:{classes_id:t,step_id:i,step_element_id:r}}}},2221:function(t,i,r){"use strict";r(33),r(36),r(25),r(7),r(23),r(28),r(38);var o=r(13),u=r.n(o),a=(r(41),r(2058)),_=r(132);function ownKeys(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach((function(i){u()(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}var l={name:"UserNavigationButtons",props:{steps:{type:Array,required:!0},current_step_id:{type:String}},computed:{route_helper:function route_helper(){return new a.c(this.steps,this.current_step_id)},previous_step:function previous_step(){var previous_step=this.route_helper.previous_step;return previous_step?this.get_prefixed_step(previous_step):null},next_step:function next_step(){var next_step=this.route_helper.next_step;return next_step?this.get_prefixed_step(next_step):null}},methods:{get_prefixed_step:function get_prefixed_step(t){var i=Object(_.c)(this.$route,t.name);return _objectSpread(_objectSpread({},t),{},{name:i})}}},c=r(3),p=Object(c.a)(l,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.route_helper.route_objects.length>1?r("div",{staticClass:"p-b-xxl"},[t.route_helper.is_first_step?r("div",{staticClass:"btn btn-lg btn-default pull-left disabled"},[t._v(t._s(t.$gettext("Назад")))]):r("router-link",{staticClass:"btn btn-lg btn-default pull-left",attrs:{to:t.previous_step}},[t._v(t._s(t.$gettext("Назад")))]),t._v(" "),t.route_helper.is_last_step?r("router-link",{staticClass:"btn btn-lg btn-primary pull-right",attrs:{to:t.next_step}},[t._v(t._s(t.$gettext("Вернуться в начало")))]):r("router-link",{staticClass:"btn btn-lg btn-primary pull-right",attrs:{to:t.next_step}},[t._v(t._s(t.$gettext("Далее")))])],1):t._e()}),[],!1,null,null,null);i.a=p.exports},244:function(t,i,r){"use strict";r.d(i,"a",(function(){return d})),r.d(i,"b",(function(){return h})),r.d(i,"c",(function(){return g}));var o=r(4),u=r.n(o),a=r(5),_=r.n(a),l=(r(7),r(28),r(19)),c=r.n(l),p=r(67),d=function(){function EventTimer(t){u()(this,EventTimer),this.datetime=c()(t),this.callbacks=[],this.on_tick_callbacks=[],this.interval_id=null,this._is_resolved=!1}return _()(EventTimer,[{key:"start",value:function start(){var t=this;return this.callbacks.push((function(){return t.destroy()})),Object(p.a)().isAfter(c()(this.datetime))||(this.interval_id=setInterval((function(){t.tick()}),1e3)),this}},{key:"tick",value:function tick(){return this.on_tick_callbacks.forEach((function(t){return t()})),c.a.now()>this.datetime&&(this._is_resolved=!0,this.callbacks.forEach((function(t){return t()}))),this}},{key:"destroy",value:function destroy(){this.interval_id&&(clearInterval(this.interval_id),this.interval_id=null)}},{key:"on_event",value:function on_event(t){return this.callbacks.push(t),this._is_resolved&&t(),this}},{key:"on_tick",value:function on_tick(t){return this.on_tick_callbacks.push(t),this}}]),EventTimer}(),h=function(){function UnitTimers(t){u()(this,UnitTimers),this.unit_timing=t,this.is_started=this.unit_timing.is_started(),this.is_finished=this.unit_timing.is_finished(),this.is_solution_ended=this.unit_timing.is_solution_ended(),this.is_show_answers=this.unit_timing.is_result_published(),this.is_infinity=t.is_infinity,this.is_visible=t.is_visible,this.start_timer=void 0,this.end_timer=void 0,this.publish_timer=void 0,this.publish_timer=void 0,this.solution_ended_timer=void 0}return _()(UnitTimers,[{key:"is_active",get:function get(){return this.is_started&&!this.is_finished}},{key:"create_timers",value:function create_timers(){var t=this;return this.start_timer=new d(this.unit_timing.date_from).on_event((function(){t.is_started=t.unit_timing.is_started()})).on_tick((function(){t.start_at=c()(t.unit_timing.date_from).fromNow()})).start(),this.end_timer=new d(this.unit_timing.date_till).on_event((function(){t.is_finished=t.unit_timing.is_finished()})).start(),this.solution_ended_timer=new d(this.unit_timing.solution_datetime_till).on_event((function(){t.is_solution_ended=t.unit_timing.is_solution_ended()})).start(),this.publish_timer=new d(this.unit_timing.publish_date).on_event((function(){t.is_show_answers=t.unit_timing.is_result_published()})).start(),this}},{key:"destroy",value:function destroy(){this.start_timer&&(this.start_timer.destroy(),this.end_timer.destroy(),this.publish_timer.destroy(),this.solution_ended_timer.destroy())}}]),UnitTimers}(),g=function(){function UnitTimingData(t){u()(this,UnitTimingData),this.is_have_time=t.is_have_time,this.solution_datetime_till=t.solution_datetime_till&&Object(p.d)(t.solution_datetime_till),this.publish_date=t.publish_date&&Object(p.d)(t.publish_date),this.date_till=t.date_till&&Object(p.d)(t.date_till),this.date_from=t.date_from&&Object(p.d)(t.date_from),this.is_infinity=t.is_infinity||this.date_till&&this.date_till.year()>=2050,this.is_visible=(t.is_have_time||t.is_timer_solution&&t.is_started)&&!this.is_infinity,this._is_started=t.is_started,this.is_publish_before_now=this.publish_date&&this.publish_date.isBefore(c.a.now())}return _()(UnitTimingData,[{key:"is_started",value:function is_started(){return!this.is_have_time||c()().isAfter(this.date_from)||this._is_started}},{key:"is_finished",value:function is_finished(){return this.is_have_time&&c()().isAfter(this.date_till)}},{key:"is_result_published",value:function is_result_published(){return c()().isAfter(this.publish_date)}},{key:"is_solution_ended",value:function is_solution_ended(){return c()().isAfter(this.solution_datetime_till)}}]),UnitTimingData}()},522:function(t,i,r){"use strict";r.d(i,"b",(function(){return get_unit_timing})),r.d(i,"c",(function(){return get_unit_user})),r.d(i,"a",(function(){return get_problem_contest_counter}));r(70),r(7),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var o=r(1617),u=r(374),a=r(48);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var o=0,u=function F(){};return{s:u,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,_=!0,l=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return _=t.done,t},e:function e(t){l=!0,a=t},f:function f(){try{_||null==r.return||r.return()}finally{if(l)throw a}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=t[r];return o}function get_unit_timing(t,i){var r;return t.login.user_data.is_pupil&&(r=get_unit_user(t,i))||(r=new u.a(t.models.units[i],t)),r.get_timing()}function get_unit_user(t,i){var r=t.login.user_data;if(t.result.is_preview_mode){var u=t.result.user_id,_=t.models.users[u];r=_&&new a.a(_,t)}if(t.result.is_preview_mode||r.is_client){var l,c=_createForOfIteratorHelper(t.unit_users.ids);try{for(c.s();!(l=c.n()).done;){var p=l.value,d=t.models.unit_users[p];if(d&&d.unit_id===i)return new o.a(d,t)}}catch(t){c.e(t)}finally{c.f()}}}function get_problem_contest_counter(t,i){var r=t.models.problem_contest_counters;return r&&r[i]?r[i].to_check:t.models.problem_contests[i].to_check}},755:function(t,i,r){"use strict";r.d(i,"a",(function(){return a})),r.d(i,"b",(function(){return _})),r.d(i,"c",(function(){return update_model_solve_types}));r(7),r(28),r(70),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var o=r(0),u=r(375);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var o=0,u=function F(){};return{s:u,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,_=!0,l=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return _=t.done,t},e:function e(t){l=!0,a=t},f:function f(){try{_||null==r.return||r.return()}finally{if(l)throw a}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=t[r];return o}var a=[["tex","latex"],["html","html"]],_={tex:"latex",html:"html",text:Object(o.$gettext)("текст"),bbcode:"bbcode"};function update_model_solve_types(t){var i,r=_createForOfIteratorHelper(u.d);try{for(r.s();!(i=r.n()).done;){var o=i.value;t[o[0]]=!1}}catch(t){r.e(t)}finally{r.f()}return(t.solve_types||[]).forEach((function(i){t[i]=!0})),t}},756:function(t,i,r){"use strict";r.d(i,"a",(function(){return icon_by_extension_and_mime}));for(var o={},u=0,a=["bmp.png","png.png","html.png","txt.png","mov.png","mpeg.png","psd.png","zip.png","jpg.png","PL.png","wmv.png","mp4.png","wma.png","gif.png","rar.png","wav.png","doc.png","docx.png","avi.png","css.png","pdf.png","tiff.png","mp3.png","xlsx.png","xls.png","pptx.png","ppt.png","proj.png","pst.png","pub.png","readme.png","vsd.png","midi.png","ini.png","fla.png","accdb.png","settings.png","url.png","jsf.png","ods.png"];u<a.length;u++){var _=a[u];o[_.split(".")[0]]=_}function icon_by_extension_and_mime(t,i){var r=o[t.toLowerCase()];return r||(i.indexOf("audio/")>=0?r="audio.png":i.indexOf("video/")>=0?r="video.png":i.indexOf("image/")>=0?r="image.png":i.indexOf("text")>=0&&(r="text.png")),function path(t){return"/static/file_icons/"+t}(r||"unknown.png")}}}]);
//# sourceMappingURL=42.42.3eb7e5266113d57a8c3f.js.map