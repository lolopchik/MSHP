(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{1936:function(t,i,r){"use strict";r.d(i,"b",(function(){return _})),r.d(i,"a",(function(){return d})),r.d(i,"c",(function(){return p}));var a=r(1848),l=r(1922),o=r(1937),u=r(1960),c=r(1962),_={fields:["id","unit_id","user_id","solution_datetime_till","date_from","date_till","is_finished","is_infinity","is_started","publish_date"],unit:a.d,contest_results:l.e},d={fields:["id","unit_id","user_id","solution_datetime_till","date_from","date_till","is_finished","is_infinity","is_started","publish_date"],unit:a.c,contest_results:l.e},p={fields:["id","user_id","unit_id","date_from","date_till","publish_date","is_started","is_infinity","time_to_pass","is_custom","is_timer_solution","solution_datetime_till","timer_field","is_finished","team_id"],testing_attempts:o.a,run_results:u.a,scratch_results:c.a,unit:a.b}},1980:function(t,i,r){"use strict";r(31);var a=r(1711),l={name:"unit-progress-donut",components:{Peity:r.n(a).a},props:{color:{required:!0,type:String},max_score:{required:!0},score:{required:!0},size:{default:function _default(){return{width:20,height:20}}},is_plug:{type:Boolean,required:!1,default:!1}},computed:{tooltip_text:function tooltip_text(){if(this.is_plug)return"";if(!this.max_score)return"";var t=null!==this.score?this.score:"-";return this.$gettext("Набрано баллов")+": ".concat(t," ").concat(this.$gettext("из")," ").concat(this.max_score)},floor_score:function floor_score(){return Math.floor(this.score)}}},o=r(3),u=Object(o.a)(l,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return void 0!==t.max_score?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltip_text,expression:"tooltip_text"}],staticClass:"text-bottom",staticStyle:{"line-height":"0"}},[t.is_plug?r("peity",{attrs:{type:"pie",options:{fill:["#dddddd","#dddddd"],width:t.size.width,height:t.size.height,innerRadius:t.size.width/6,radius:t.size.width/2},data:[100].toString()}}):t.max_score?r("peity",{attrs:{type:"pie",options:{fill:[t.color,"#dddddd"],width:t.size.width,height:t.size.height,innerRadius:t.size.width/6,radius:t.size.width/2},data:[t.floor_score||0,t.max_score-(t.floor_score||0)].toString()}}):r("peity",{attrs:{type:"pie",options:{fill:[t.color],width:t.size.width,height:t.size.height,innerRadius:t.size.width/6,radius:t.size.width/2},data:[100].toString()}})],1):t._e()}),[],!1,null,null,null);i.a=u.exports},1982:function(t,i,r){"use strict";var a={name:"UnitUserRemainingCalendarTime",props:{unit_timing:{type:r(244).c,required:!0}}},l=r(3),o=Object(l.a)(a,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("span",{staticClass:"run-callback fast-runned lazy-runned text-caption"},[t.unit_timing.is_finished()?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.unit_timing.date_till.format("L"),expression:"unit_timing.date_till.format('L')"}],staticClass:"text-color-caption"},[t._v("\n    "+t._s(t.$gettext("Окончен"))+"\n  ")]):t.unit_timing.is_solution_ended()?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.unit_timing.date_till.format("L"),expression:"unit_timing.date_till.format('L')"}],staticClass:"text-color-caption"},[t._v("\n    "+t._s(t.$gettext("На дорешивании"))+"\n  ")]):t.unit_timing.is_infinity?r("span"):t.unit_timing.is_started()?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.unit_timing.solution_datetime_till.format("L"),expression:"unit_timing.solution_datetime_till.format('L')"}],staticClass:"text-danger"},[t._v("\n    "+t._s(t.unit_timing.solution_datetime_till.calendar())+"\n  ")]):r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.unit_timing.date_from.format("L"),expression:"unit_timing.date_from.format('L')"}],staticClass:"text-info inline-block"},[t._v("\n    "+t._s(t.$gettext("Начало"))+"\n    "+t._s(t.unit_timing.date_from.calendar())+"\n  ")])])}),[],!1,null,null,null);i.a=o.exports},2043:function(t,i,r){"use strict";var a=r(762),l={name:"NewsButton",data:function data(){return{colors:a.a}},props:{button_text:{type:String,required:!1},button_color:{type:String,required:!1},button_link:{type:String,required:!1}},computed:{text:function text(){return this.button_text?this.button_text:this.$gettext("Понял!")},color_class:function color_class(){return this.button_color?this.colors[this.button_color]:"btn-primary"},link:function link(){return this.button_link?this.button_link:"#"}}},o=r(3),u=Object(o.a)(l,(function(){var t=this,i=t.$createElement;return(t._self._c||i)("a",{staticClass:"btn",class:t.color_class,attrs:{target:"_blank",href:t.link,role:"button"},on:{click:function(i){return t.$emit("news_button_clicked")}}},[t._v(t._s(t.text))])}),[],!1,null,null,null);i.a=u.exports},2055:function(t,i,r){"use strict";r.d(i,"a",(function(){return m}));var a=r(4),l=r.n(a),o=r(5),u=r.n(o),c=r(1),_=r(21),d=r(22),p=r(1631),m=function(){function UnitUserOperator(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c.isRequired)();l()(this,UnitUserOperator),this.component=t,this.uid=i}return u()(UnitUserOperator,[{key:"finish_unit_user",value:function finish_unit_user(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c.isRequired)();return new _.a(d.b["api:unit_user_finish_api"](t),this.uid).patch().on_success(_.c.update_instance(p.a)).resolve_errors(this.component,this.uid).execute(this.component.$store,i)}}]),UnitUserOperator}()},2088:function(t,i,r){"use strict";var a={name:"PupilMainRowLayout"},l=r(3),o=Object(l.a)(a,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"row flex-row-lg"},[i("div",{staticClass:"col-lg-4 col-lg-push-8 col-lg-condensed-left flex-row-col"},[this._t("right-column")],2),this._v(" "),i("div",{staticClass:"col-lg-8 col-lg-pull-4 col-lg-condensed-right flex-row-col"},[this._t("left-column")],2)])}),[],!1,null,null,null);i.a=o.exports},2089:function(t,i,r){"use strict";var a={name:"user-achievements-panel",components:{UserAchievementsList:r(2077).a},props:{user_achievements:{required:!0},rounded_achievement:{type:Boolean,required:!1,default:function _default(){return!0}}}},l=r(3),o=Object(l.a)(a,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.user_achievements.length?r("div",{staticClass:"panel panel-borderless shp-clear same-height course_rate"},[r("div",{staticClass:"panel-heading clearfix"},[r("div",{staticClass:"panel-title inline-block"},[r("span",[t._v(t._s(t.$gettext("Достижения")))])]),t._v(" "),r("div",{staticClass:"pull-right"},[r("router-link",{attrs:{to:{name:"achievements"}}},[t._v(t._s(t.$gettext("См. все")))])],1)]),t._v(" "),r("div",{staticClass:"panel-body no-padding"},[r("user-achievements-list",{attrs:{user_achievements:t.user_achievements,rounded_achievement:t.rounded_achievement}})],1)]):t._e()}),[],!1,null,null,null);i.a=o.exports},2197:function(t,i,r){"use strict";var a=r(19),l=r.n(a),o=r(1963),u={name:"PupilMainClassesTable",components:{ClientClassesUpcomingRow:r(2192).a},props:{classes_users:{required:!0,type:Array}},data:function data(){return{moment:l.a}},computed:{client_calendars:function client_calendars(){return Object(o.b)(this.classes_users,this.$store)}}},c=r(3),_=Object(c.a)(u,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"panel panel-borderless"},[r("div",{staticClass:"panel-heading"},[r("div",{staticClass:"panel-title"},[t._t("title",(function(){return[t._v("\n        "+t._s(t.$gettext("Ближайшие занятия"))+"\n      ")]}))],2)]),t._v(" "),t.classes_users.length?r("div",{staticClass:"panel-body"},t._l(t.client_calendars,(function(t){return r("ClientClassesUpcomingRow",{key:t.classes.uid,staticClass:"mb-md",attrs:{classes:t.classes,classes_user:t.classes_user,show_date:!0}})})),1):t._e(),t._v(" "),t.classes_users.length?t._e():r("div",{staticClass:"panel-body"},[t._t("empty_classes",(function(){return[t._v("\n      "+t._s(t.$gettext("У вас нет ближайших занятий, отдыхайте"))+"\n    ")]}))],2)])}),[],!1,null,null,null).exports,d=r(80),p=r(388),m=r(2213),h=r(2214),v=r(844),g=r(1833),b=r(1616),y=r(2215),x={name:"PupilMainClasses",components:{PupilMainRowLayout:r(2088).a,PupilClassesDatePicker:h.a,ClientCalendarClassesFetcher:m.a,ListFetcher:d.a,PupilMainClassesTable:_,ClientCalendarCaption:y.a},data:function data(){return{classes_user_model:v.b,attendance_model:p.a,current_month:l()().date(1),initial_date:l()(),classes_user_filter:[{applied:{classes__datetime_end__gte:l()().utc().toISOString(),classes__date_of__lte:l()().add(3,"w").toISOString(),orderBy:"classes__datetime_begin",classes__course__usage__in:"B,D,S,M",schema:JSON.stringify(g.c)}}],ClassesUserData:b.a}},methods:{update_datepicker_month:function update_datepicker_month(t){this.current_month=t},update_datepicker_date:function update_datepicker_date(t){this.$router.push({name:"pupil_calendar_list",params:{date:t}})},get_date_class_function:function get_date_class_function(t){return new o.a(t,this.$store.state).get_styles_function(this.current_month)}}},w=Object(c.a)(x,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("PupilMainRowLayout",[r("client-calendar-classes-fetcher",{staticClass:"flex-row-inner",attrs:{slot:"right-column",current_month:t.current_month},slot:"right-column",scopedSlots:t._u([{key:"default",fn:function(i){var a=i.client_calendars;return[r("pupil-classes-date-picker",{staticClass:"flex-row-inner",attrs:{date_class_func:t.get_date_class_function(a),initial_date:t.initial_date},on:{datepicker_date_changed:t.update_datepicker_date,datepicker_month_changed:t.update_datepicker_month}},[r("client-calendar-caption")],1)]}}])}),t._v(" "),r("list-fetcher",{staticClass:"flex-row-inner",attrs:{slot:"left-column",url:"api:classes_users_extended_list_api",model:t.classes_user_model,limit:3,data_presenter:t.ClassesUserData,filters:t.classes_user_filter},slot:"left-column",scopedSlots:t._u([{key:"default",fn:function(t){var i=t.data;return[r("pupil-main-classes-table",{staticClass:"flex-row-inner",attrs:{classes_users:i}})]}}])})],1)}),[],!1,null,null,null);i.a=w.exports},2205:function(t,i,r){"use strict";r(25),r(7),r(11),r(12);var a=r(143),l=r(34),o=r.n(l),u=r(20),c=r.n(u),_=r(1980),d=r(268),p=r(1617),m=r(1625),h=r(152),v=r(1982),g=r(107),b=r(2055),y={name:"UnitUserDeadlineRow",components:{UnitUserRemainingCalendarTime:v.a,TableRow:h.a,UnitProgressDonut:_.a},props:{columns:{type:Array,required:!0},unit_user:{required:!0,type:p.a}},data:function data(){return{unit_user_operator:new b.a(this,"unit_user_deadline_list")}},computed:{classes:function classes(){var t=this.$store.state.models.classes,classes=void 0===t?{}:t,i=classes[this.unit_user.unit.values.classes_id];return i&&new d.a(i,this.$store.state)},contest_results:function contest_results(){var t=this.$store.state.models.contest_results,contest_results=void 0===t?{}:t,i=contest_results[this.unit_user.values.contest_results[0]];return i&&new m.b(i,this.$store.state)},course:function course(){return this.classes&&this.classes.course},lessons:function lessons(){return this.classes?this.classes.get_lessons():[]},unit:function unit(){return this.unit_user.unit},score:function score(){return this.contest_results&&this.contest_results.values.score||0}},methods:{finish_unit_user:function finish_unit_user(t){var i=this;return o()(c.a.mark((function _callee(){return c.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.unit_user_operator.finish_unit_user(i.unit_user.values.id,{is_finished:t});case 2:Object(g.a)(i.$store,"finished_unit_user_id",i.unit_user.values.id);case 3:case"end":return r.stop()}}),_callee)})))()}}},x=r(3),w=Object(x.a)(y,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("TableRow",{staticClass:"row flex flex-vertical-center",attrs:{columns:t.columns,column_tag:"div",row_tag:"div"},scopedSlots:t._u([{key:"lesson",fn:function(){return[r("div",[t._v(t._s(t.course.values.simplest_name))]),t._v(" "),r("div",{staticClass:"text-muted small text-truncate comma-separated"},[r("span",[t._v(t._s(t.classes.moment_begin.format("DD.MM")))]),t._v(" "),t._l(t.lessons,(function(i){return r("span",{key:i.id},[t._v(" "+t._s(i.name))])}))],2)]},proxy:!0},{key:"unit",fn:function(){return[r("div",[r("UnitProgressDonut",{staticClass:"mr-xs",attrs:{color:t.unit_user.unit.color_value,max_score:t.unit_user.unit.values.total_score,score:t.score,size:{width:18,height:18},is_plug:!t.unit_user.unit_timing.is_publish_before_now}}),t._v(" "),r("router-link",{attrs:{to:{name:"unit_content",params:{classes_id:t.classes.values.id,unit_id:t.unit.values.id}}}},[t._v("\n        "+t._s(t.unit.values.name)+"\n      ")])],1)]},proxy:!0},{key:"solution_datetime_till",fn:function(){return[r("UnitUserRemainingCalendarTime",{attrs:{unit_timing:t.unit_user.get_timing()}})]},proxy:!0},{key:"status",fn:function(){return[t.unit_user.values.is_finished?t._e():r("a",{staticClass:"pull-right",on:{click:function(i){return t.finish_unit_user(!0)}}},[t._v("\n      "+t._s(t.$gettext("Скрыть"))+"\n    ")])]},proxy:!0}])})}),[],!1,null,null,null).exports,C=r(40),U={name:"ClientUnitUserDeadLineTable",components:{TableHeader:a.a,UnitUserDeadlineRow:w},props:{unit_users:{required:!0,type:Array},table_columns:{required:!0,type:C.a}},computed:{not_finished:function not_finished(){return this.unit_users.filter((function(t){return!t.values.is_finished}))}}},k=Object(x.a)(U,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.not_finished.length?r("div",[r("div",{staticClass:"panel-body panel-body-stripped"},[r("TableHeader",{staticClass:"row bold",attrs:{table_columns:t.table_columns,column_tag:"div",row_tag:"div"}}),t._v(" "),t._l(t.not_finished,(function(i){return r("UnitUserDeadlineRow",{key:i.uid,attrs:{unit_user:i,columns:t.table_columns.columns}})}))],2)]):r("div",{staticClass:"panel-body panel-body-stripped"},[r("div",[t._v("\n    "+t._s(t.$gettext("Задания не найдены"))+"\n  ")])])}),[],!1,null,null,null);i.a=k.exports},2252:function(t,i,r){"use strict";var a=r(10),l=r.n(a),o=(r(31),r(80)),u=r(459),c=r(1617),_=r(1631),d=r(1936),p=r(457),m=r(19),h=r.n(m),v=r(49),g={name:"ClientUnitUsersFetcher",components:{ListFetcher:o.a},props:{unit_user_filters:{required:!0,type:Array},limit:{default:20}},data:function data(){return{pupil_course_model:u.a,unit_user_model:_.a,UnitUserData:c.a,PupilCourseData:p.a}},computed:{all_unit_user_filters:function all_unit_user_filters(){return[{applied:{user_id:Object(v.d)(this.$store.state),date_from__lte:h()().toISOString(),orderBy:"solution_datetime_till, date_til",is_finished:!1,is_infinity:!1,is_unsolved:!0,unit__total_score__gt:0,schema:JSON.stringify(d.b)}}].concat(l()(this.unit_user_filters))}}},b=r(3),y=Object(b.a)(g,(function(){var t=this,i=t.$createElement;return(t._self._c||i)("ListFetcher",{attrs:{data_presenter:t.UnitUserData,filters:t.all_unit_user_filters,model:t.unit_user_model,limit:t.limit,url:"api:unit_users_headers_list_api",watch_key:t.$store.state.context.finished_unit_user_id},scopedSlots:t._u([{key:"default",fn:function(i){var r=i.data,a=i.list;return[t._t("default",null,{unit_users:r,unit_users_list:a})]}}],null,!0)})}),[],!1,null,null,null);i.a=y.exports},2772:function(t,i,r){"use strict";r.r(i);r(25),r(7),r(43),r(11),r(12);var a=r(80),l=r(631),o=r(1619),u=(r(82),r(21)),c=r(22),_=r(532),d=r(2043),p=r(19),m=r.n(p),h={name:"NewsComponent",components:{FormattedContent:_.a,NewsButton:d.a},props:{feed_event:{required:!0,default:o.a}},data:function data(){return{is_expanded:!1,is_long_news:!1,opened_height:""}},computed:{aria_expanded:function aria_expanded(){return this.is_expanded.toString()},created_at:function created_at(){return m()(this.feed_event.values.created_at).format("L")}},methods:{set_readed:function set_readed(){this.is_expanded=!this.is_expanded,this.feed_event.is_mocked||new u.a(c.b["api:feed_event_read_api"](this.feed_event.values.id),this.feed_event.uid).on_success(u.c.update_instance(l.a)).execute(this.$store,{})},content_ready_handler:function content_ready_handler(){var t=this.$refs.news.offsetHeight;this.is_long_news=t>270,this.opened_height=!this.is_long_news&&t+30}}},v=r(3),g=Object(v.a)(h,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"feed__list mb-md"},[r("div",{staticClass:"mr-sm"},[r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.created_at,expression:"created_at"}]},[t._v("\n      "+t._s(t._f("moment")(t.feed_event.values.created_at,"from","now"))+"\n    ")]),t._v(" "),t.feed_event.values.read_at?r("span",{staticClass:"label label-success"},[t._v("\n      "+t._s(t.$gettext("прочитано"))+"\n    ")]):r("span",{staticClass:"label label-info"},[t._v("\n      "+t._s(t.$gettext("новое"))+"\n    ")])]),t._v(" "),r("div",{staticClass:"blue shp-clear clearfix pt-sm"},[r("div",{staticClass:"clearfix run-callback",attrs:{"data-readmore":"","aria-expanded":t.aria_expanded}},[r("div",{staticClass:"entry-content read_entry feed overflow-hidden"},[r("div",{staticClass:"text-fade"},[r("h4",{staticClass:"no-top"},[t._v("\n            "+t._s(t.feed_event.data.title)+"\n          ")]),t._v(" "),r("div",{ref:"news",staticClass:"entry-content-text",class:{feed_events__news_closed:t.is_long_news&&!t.is_expanded,feed_events__news_opened:t.is_long_news&&t.is_expanded},style:{height:t.is_long_news||t.is_expanded?"":t.opened_height+"px"}},[r("FormattedContent",{attrs:{html_content:t.feed_event.data.content},on:{ready:t.content_ready_handler}}),t._v(" "),t.feed_event.data.button_link?[r("br"),t._v(" "),r("NewsButton",{attrs:{button_text:t.feed_event.data.button_text,button_link:t.feed_event.data.button_link,button_color:t.feed_event.data.button_color}})]:t._e()],2)])])]),t._v(" "),r("div",{staticClass:"flex flex-center show-more__container",on:{click:t.set_readed}},[t.is_expanded?r("a",{staticClass:"show-less-btn"},[r("i",{staticClass:"icon-chevron-up icon-15x"})]):r("a",{staticClass:"show-more-btn"},[r("i",{staticClass:"icon-chevron-down icon-15x"})])])])])}),[],!1,null,null,null).exports,b={name:"PupilMainFeedsList",components:{ListFetcher:a.a,NewsComponent:g},data:function data(){return{feed_events_model:l.a,only_news:!1}},methods:{get_feed_events:function get_feed_events(t){var i=this;return t.ids.map((function(t){return new o.a(i.$store.state.models.feed_events[t],i.$store.state)})).filter((function(t){return!t.values.hidden}))}}},y=Object(v.a)(b,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ListFetcher",{attrs:{url:"api:feed_events_list_api",use_default_paginator:"",limit:"10",model:t.feed_events_model,filters:[{applied:{type__in:"news"}}]},scopedSlots:t._u([{key:"default",fn:function(i){return[r("div",{staticClass:"panel panel-borderless shp-clear same-height course_rate"},[r("div",{staticClass:"panel-heading clearfix"},[r("div",{staticClass:"panel-title inline-block"},[t._v("\n          "+t._s(t.$gettext("Лента новостей"))+"\n        ")])]),t._v(" "),r("div",{staticClass:"panel-body"},[r("div",t._l(t.get_feed_events(i.list),(function(t){return r("NewsComponent",{key:t.uid,attrs:{feed_event:t}})})),1),t._v(" "),i.list.ids.length?t._e():r("div",[r("span",[t._v("\n            "+t._s(t.$gettext("Нет новостей"))+". "),r("a",{on:{click:function(i){t.only_news=!1}}},[t._v(t._s(t.$gettext("Открыть все сообщения")))])])])])])]}}])})}),[],!1,null,null,null).exports,x=r(2197),w=(r(53),r(96),r(324)),C=r(199),U=r(51),k=r(48),$={name:"UserPasswordResetChecker",components:{InstanceFetcher:w.a},data:function data(){return{user_model:U.a,UserData:k.a}},methods:{set_filters:function set_filters(t){t.data={schema:JSON.stringify(C.f)}},check_temporary_password:function check_temporary_password(t,i){var r=i[0];this.$store.state.models.users[r].is_password_reset&&this.redirect_to_change_password()},redirect_to_change_password:function redirect_to_change_password(){this.$router.replace({name:"password_reset"})}}},L=Object(v.a)($,(function(){var t=this.$createElement;return(this._self._c||t)("instance-fetcher",{attrs:{url:"api:user_account_detail_api",configure:this.set_filters,model:this.user_model,on_fetch_callback:this.check_temporary_password,data_presenter:this.UserData}})}),[],!1,null,null,null).exports,O=r(2033),S=r(2089),j=r(2205),P=r(2252),D=r(40),A=r(1617),T=r(27),R=r(34),q=r.n(R),E=r(20),M=r.n(E),N=r(1980),I=r(1982),z=r(268),B=r(1625),H=r(107),J=r(2055),G={name:"ClientUnitUserDeadLineListItem",components:{UnitProgressDonut:N.a,UnitUserRemainingCalendarTime:I.a},props:{unit_user:{type:A.a,required:!0}},data:function data(){return{unit_user_operator:new J.a(this,"unit_user_deadline_list")}},computed:{unit:function unit(){return this.unit_user.unit},classes:function classes(){var t=this.$store.state.models.classes,classes=void 0===t?{}:t,i=classes[this.unit.values.classes_id];return i&&new z.a(i,this.$store.state)},contest_results:function contest_results(){var t=this.$store.state.models.contest_results,contest_results=void 0===t?{}:t,i=contest_results[this.unit_user.values.contest_results[0]];return i&&new B.b(i,this.$store.state)},course:function course(){return this.classes&&this.classes.course},lessons:function lessons(){return this.classes?this.classes.get_lessons():[]},score:function score(){return this.contest_results&&this.contest_results.values.score||0}},methods:{finish_unit_user:function finish_unit_user(t){var i=this;return q()(M.a.mark((function _callee(){return M.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.unit_user_operator.finish_unit_user(i.unit_user.values.id,{is_finished:t});case 2:Object(H.a)(i.$store,"finished_unit_user_id",i.unit_user.values.id);case 3:case"end":return r.stop()}}),_callee)})))()}}},K={name:"ClientUnitUserDeadLineList",components:{ClientUnitUserDeadLineListItem:Object(v.a)(G,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"flex-column"},[r("div",{staticClass:"mb-sm"},[r("UnitProgressDonut",{staticClass:"mr-xs",attrs:{color:t.unit.color_value,max_score:t.unit.values.total_score,score:t.score,size:{width:18,height:18},is_plug:!t.unit_user.unit_timing.is_publish_before_now}}),t._v(" "),r("router-link",{attrs:{to:{name:"unit_content",params:{classes_id:t.classes.values.id,unit_id:t.unit.values.id}}}},[t._v("\n      "+t._s(t.unit.values.name)+"\n    ")])],1),t._v(" "),r("div",{staticClass:"mb-sm"},[r("div",[t._v(t._s(t.course.values.simplest_name))]),t._v(" "),r("div",{staticClass:"text-muted small text-truncate comma-separated"},[r("span",[t._v(t._s(t.classes.moment_begin.format("DD.MM")))]),t._v(" "),t._l(t.lessons,(function(i){return r("span",{key:i.id},[t._v(" "+t._s(i.name))])}))],2)]),t._v(" "),r("div",{staticClass:"flex flex-space-between"},[r("UnitUserRemainingCalendarTime",{attrs:{unit_timing:t.unit_user.get_timing()}}),t._v(" "),t.unit_user.values.is_finished?t._e():r("a",{staticClass:"pull-right",on:{click:function(i){return t.finish_unit_user(!0)}}},[t._v("\n      "+t._s(t.$gettext("Скрыть"))+"\n    ")])],1)])}),[],!1,null,null,null).exports},props:{unit_users:{type:Array,required:!0,validator:Object(T.a)(A.a)}}},Q=Object(v.a)(K,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"flex-column panel-body panel-body-stripped"},this._l(this.unit_users,(function(t){return i("ClientUnitUserDeadLineListItem",{key:t.uid,attrs:{unit_user:t}})})),1)}),[],!1,null,null,null).exports,V={name:"ClientDeadlineList",components:{ClientUnitUsersFetcher:P.a,ClientUnitUserDeadLineTable:j.a,ClientUnitUserDeadLineList:Q},computed:{unit_user_filters:function unit_user_filters(){return[{applied:{solution_datetime_till__gte:m()().toISOString(),solution_datetime_till__lte:m()().add(180,"days").toISOString()}}]}},data:function data(){var t=[new D.b("lesson",this.$gettext("Занятие")).css("text-truncate col-xs-5"),new D.b("unit",this.$gettext("Блок")).css("col-xs-3"),new D.b("solution_datetime_till",this.$gettext("Окончание")).css("col-xs-2"),new D.b("status","").css("col-xs-2")];return{table_columns:new D.a("pupil:unit_user:columns",(new D.c).add_columns(t))}}},W=Object(v.a)(V,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ClientUnitUsersFetcher",{attrs:{unit_user_filters:t.unit_user_filters,limit:3},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.unit_users;return[a.length?r("div",{staticClass:"panel panel-borderless"},[r("div",{staticClass:"panel-heading flex flex-row-between flex-vertical-center"},[r("div",{staticClass:"panel-title"},[t._v(t._s(t.$gettext("Актуальные задания")))]),t._v(" "),r("router-link",{attrs:{to:{name:"pupil_unit_users"}}},[t._v(t._s(t.$gettext("Посмотреть все")))])],1),t._v(" "),r("ClientUnitUserDeadLineTable",{staticClass:"hidden-xs",attrs:{unit_users:a,table_columns:t.table_columns}}),t._v(" "),r("ClientUnitUserDeadLineList",{staticClass:"visible-xs",attrs:{unit_users:a}})],1):t._e()]}}])})}),[],!1,null,null,null).exports,X=r(2088),Y=r(2022),Z=r(2190),tt={name:"PupilMainPage",components:{PupilMainRowLayout:X.a,UserAchievementsPanel:S.a,UserAchievementsFetcher:O.a,UserPasswordResetChecker:L,PupilMainClasses:x.a,PupilMainFeedsList:y,ClientUnitUsersDeadlineList:W,PupilNotifications:Y.a,UserPollsNotificationList:Z.a}},et=Object(v.a)(tt,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("UserPasswordResetChecker"),this._v(" "),i("ClientUnitUsersDeadlineList"),this._v(" "),i("PupilMainClasses"),this._v(" "),i("PupilMainRowLayout",[i("div",{attrs:{slot:"right-column"},slot:"right-column"},[i("div",{staticClass:"modern-page notifications__main"},[i("PupilNotifications"),this._v(" "),i("UserPollsNotificationList")],1),this._v(" "),i("UserAchievementsFetcher",{attrs:{limit:6},scopedSlots:this._u([{key:"default",fn:function(t){var r=t.user_achievements;return[i("UserAchievementsPanel",{attrs:{user_achievements:r}})]}}])})],1),this._v(" "),i("PupilMainFeedsList",{attrs:{slot:"left-column"},slot:"left-column"})],1)],1)}),[],!1,null,null,null);i.default=et.exports},522:function(t,i,r){"use strict";r.d(i,"b",(function(){return get_unit_timing})),r.d(i,"c",(function(){return get_unit_user})),r.d(i,"a",(function(){return get_problem_contest_counter}));r(70),r(7),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(1617),l=r(374),o=r(48);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,l=function F(){};return{s:l,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return u=t.done,t},e:function e(t){c=!0,o=t},f:function f(){try{u||null==r.return||r.return()}finally{if(c)throw o}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}function get_unit_timing(t,i){var r;return t.login.user_data.is_pupil&&(r=get_unit_user(t,i))||(r=new l.a(t.models.units[i],t)),r.get_timing()}function get_unit_user(t,i){var r=t.login.user_data;if(t.result.is_preview_mode){var l=t.result.user_id,u=t.models.users[l];r=u&&new o.a(u,t)}if(t.result.is_preview_mode||r.is_client){var c,_=_createForOfIteratorHelper(t.unit_users.ids);try{for(_.s();!(c=_.n()).done;){var d=c.value,p=t.models.unit_users[d];if(p&&p.unit_id===i)return new a.a(p,t)}}catch(t){_.e(t)}finally{_.f()}}}function get_problem_contest_counter(t,i){var r=t.models.problem_contest_counters;return r&&r[i]?r[i].to_check:t.models.problem_contests[i].to_check}},532:function(t,i,r){"use strict";r(70),r(7),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(34),l=r.n(a),o=r(20),u=r.n(o);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,l=function F(){};return{s:l,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return u=t.done,t},e:function e(t){c=!0,o=t},f:function f(){try{u||null==r.return||r.return()}finally{if(c)throw o}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}var c={name:"FormattedContent",props:{html_content:{required:!0,type:String}},mounted:function mounted(){var t=this;return l()(u.a.mark((function _callee(){var i,r,a,l,o,c,_,d,p,m;return u.a.wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:i=_createForOfIteratorHelper(t.$el.getElementsByTagName("table"));try{for(i.s();!(r=i.n()).done;)a=r.value,l=a.parentNode,(o=document.createElement("div")).classList.add("table-responsive"),o.appendChild(a),l.appendChild(o)}catch(t){i.e(t)}finally{i.f()}c=_createForOfIteratorHelper(t.$el.getElementsByTagName("iframe"));try{for(c.s();!(_=c.n()).done;)d=_.value,p=d.parentNode,(m=document.createElement("div")).classList.add("embed-responsive"),m.classList.add("embed-responsive-16by9"),m.appendChild(d),p.appendChild(m)}catch(t){c.e(t)}finally{c.f()}return u.next=6,t.$nextTick();case 6:t.$emit("ready");case 7:case"end":return u.stop()}}),_callee)})))()}},_=r(3),d=Object(_.a)(c,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"entry-content-text",domProps:{innerHTML:this._s(this.html_content)}})}),[],!1,null,null,null);i.a=d.exports}}]);
//# sourceMappingURL=124.124.5e627df6b8781a9e3f07.js.map