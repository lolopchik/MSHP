(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1964:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return set_fixed_position}));var i=n(4),a=n.n(i),r=n(5),s=n.n(r),o=(n(7),n(82),n(1)),l=function(){function FrameUidHandler(){var e=this;a()(this,FrameUidHandler),this.uid=Math.floor(1e9*Math.random()).toString(),this.destroy=function(){return e._destroy()},this.is_show=!1}return s()(FrameUidHandler,[{key:"_destroy",value:function _destroy(){window.removeEventListener("beforeunload",this.destroy),window.localStorage.getItem("webinar_uid")===this.uid&&(window.localStorage.removeItem("webinar_uid"),window.localStorage.removeItem("webinar_uid_date"))}},{key:"init",value:function init(){var e=Math.round(+new Date/1e3),t=window.localStorage.getItem("webinar_uid_date");t&&e-parseInt(t)>7200&&(window.localStorage.removeItem("webinar_uid"),window.localStorage.removeItem("webinar_uid_date")),window.localStorage.getItem("webinar_uid")||(this.is_show=!0,window.localStorage.setItem("webinar_uid",this.uid),window.localStorage.setItem("webinar_uid_date",e.toString())),window.addEventListener("beforeunload",this.destroy)}}]),FrameUidHandler}();function set_fixed_position(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(o.isRequired)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(o.isRequired)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1050,i=e.getBoundingClientRect();t.style.position="fixed",t.style.visibility="visible",t.style.left=i.left+"px",t.style.top=i.top+"px",t.style.width=i.width+"px",t.style.height=i.height+"px",t.style["z-index"]=n}},2180:function(e,t,n){},2188:function(e,t,n){"use strict";var i=n(850),a=n(2194),r=(n(31),n(11),n(7),n(12),n(63)),s=n(22),o=n(873),l=n(21),_=n(16),d={name:"WebinarZoomPanel",components:{AlertError:r.a},props:{webinar:{required:!0,type:i.a},margin:{required:!1,default:void 0}},data:function data(){var e="webinar:auth:".concat(this.$store.state.login.user_data.id,":").concat(this.webinar.values.id),t=this.webinar.uid+"link";return{user_data:this.$store.state.login.user_data,show_link:window.sessionStorage.getItem(e),uid:t,link_key:e,auth_info:new _.b(this.$store.state,t)}},methods:{get_zoom_link:function get_zoom_link(){var e=this;new l.a(s.b["api:webinar_auth_api"](this.webinar.values.id),this.uid).single().on_before(l.c.hide_errors(this.uid)).on_success(l.c.update_instance(o.a)).on_success((function(){window.sessionStorage.setItem(e.link_key,!0),e.show_link=!0})).on_error(l.c.show_errors(this.uid)).execute(this.$store,{})}}},u=n(3),c=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel panel-default"},[n("div",{staticClass:"panel-body"},[e._v("\n    "+e._s(e.$gettext("Ссылка для учащихся:"))+" "),n("a",{attrs:{href:e.webinar.values.embed_url,target:"_blank"}},[e._v(e._s(e.webinar.values.embed_url))]),e._v(" "),n("alert-error",{attrs:{uid:e.uid}})],1),e._v(" "),n("div",{staticClass:"panel-footer"},[e.show_link?n("div",{staticClass:"inline-block"},[n("span",{staticClass:"mr"},[e._v(e._s(e.$gettext("Вы авторизованы в zoom!")))]),e._v(" "),n("a",{staticClass:"btn btn-info",attrs:{href:e.webinar.values.url,target:"_blank"}},[e._v(e._s(e.$gettext("Перейти")))])]):n("a",{staticClass:"btn btn-primary",class:{disabled:e.auth_info.is_pending},attrs:{target:"_blank"},on:{click:e.get_zoom_link}},[e._v("\n      "+e._s(e.$gettext("Авторизоваться"))+"\n    ")])])])}),[],!1,null,null,null).exports,m=n(324),h={name:"WebinarFrameFetcher",components:{AlertError:r.a,InstanceFetcher:m.a},props:{webinar:{required:!0,type:i.a}},data:function data(){return{webinar_model:o.a}},methods:{configure:function configure(e){e.post()}}},b=Object(u.a)(h,(function(){var e=this.$createElement,t=this._self._c||e;return t("InstanceFetcher",{attrs:{model:this.webinar_model,url:"api:webinar_link_api",instance_id:this.webinar.values.id,is_need:!this.webinar.iframe_href,configure:this.configure},scopedSlots:this._u([{key:"error",fn:function(e){var n=e.uid;return[t("AlertError",{attrs:{uid:n,classes:"lead text-center text-danger"}})]}}])},[this._t("default")],2)}),[],!1,null,null,null).exports,f={name:"WebinarZoomHostKey",props:{webinar:{required:!0,type:i.a}},data:function data(){return{open:!0}},methods:{close:function close(){this.webinar.action_operator.set(this.$store,null,"host_key")}}},w=Object(u.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{"append-to-body":!0,footer:!1},on:{hide:e.close},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$gettext("Код доступа")))]),e._v(" "),n("h3",{staticClass:"text-center"},[e._v("\n    "+e._s(e.webinar.values.host_key)+"\n  ")])])}),[],!1,null,null,null).exports,v={name:"WebinarZoomSharedPanel",components:{ModalError:n(1655).a,WebinarZoomHostKey:w},props:{webinar:{required:!0,type:i.a}},data:function data(){var e=this.webinar.uid+"host_key";return{uid:e,auth_info:new _.b(this.$store.state,e)}},methods:{get_webinar_host_key:function get_webinar_host_key(){var e=this;new l.a(s.b["api:webinar_host_key_api"](this.webinar.values.id),this.uid).single().on_before(l.c.hide_errors(this.uid)).on_success(l.c.update_instance(o.a)).on_success((function(){e.webinar.action_operator.set(e.$store,"edit","host_key")})).on_error(l.c.show_errors(this.uid)).execute(this.$store,{})}}},p={name:"webinar-frame",components:{WebinarZoomSharedPanel:Object(u.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel panel-default"},[n("div",{staticClass:"panel-body"},[n("h3",[e._v("\n      "+e._s(e.$gettext("Инструкция для преподавателя по работе с Zoom через Informatics LMS"))+"\n    ")]),e._v(" "),n("ol",[n("li",[e._v("\n        "+e._s(e.$gettext("Авторизуйтесь в приложении Zoom через корпоративный Google аккаунт."))+"\n      ")]),e._v(" "),n("li",[e._v("\n        "+e._s(e.$gettext("Перейдите в трансляцию"))+"\n        "),n("a",{attrs:{href:e.webinar.values.embed_url,target:"_blank"}},[e._v("\n          "+e._s(e.$gettext("по ссылке"))+"\n        ")]),e._v(".\n      ")]),e._v(" "),n("li",[e._v("\n        "+e._s(e.$gettext("После входа в Zoom трансляцию убедитесь, что вы вошли с корпоративного аккаунта."))+"\n      ")]),e._v(" "),n("li",[e._v("\n        "+e._s(e.$gettext('Далее необходимо назначить себя организатором трансляции через кнопку "Участники", потом нажать "Принять роль организатора". Подробная инструкция как стать организатором трансляции в'))+"\n        "),n("a",{attrs:{href:"https://support.zoom.us/hc/en-us/articles/115001315866-Host-Key-Control-For-Zoom-Rooms",target:"_blank"}},[e._v("\n          "+e._s(e.$gettext("инструкции."))+"\n        ")])]),e._v(" "),n("li",[e._v("\n        "+e._s(e.$gettext('После нажатия на кнопку "Принять роль организатора" в Zoom во всплывающем окне, необходимо ввести код доступа'))+"\n        "),n("br"),e._v(" "),n("a",{staticClass:"btn btn-primary btn-xs",class:{disabled:e.auth_info.is_pending},attrs:{target:"_blank"},on:{click:e.get_webinar_host_key}},[e._v("\n          "+e._s(e.$gettext("Получите код доступа"))+"\n        ")]),e._v(" "),n("div",{staticClass:"bold"},[e._v("\n          "+e._s(e.$gettext("Внимание!"))+"\n        ")]),e._v("\n        "+e._s(e.$gettext("Стать организатором конференции можно один раз на одну конференцию."))+"\n        "),n("br"),e._v("\n        "+e._s(e.$gettext("Получить код доступа можно за полчаса до занятия. При этом забронировать время конференции можно предварительно в любое удобное для вас время."))+"\n      ")]),e._v(" "),n("li",[e._v("\n        "+e._s(e.$gettext("Учащийся может перейти в конференцию после начала блока с этой конференции."))+"\n      ")]),e._v(" "),n("li",[e._v("\n        "+e._s(e.$gettext("После окончания занятия не забудьте завершить конференцию."))+"\n      ")])]),e._v(" "),n("h3",[e._v("\n      "+e._s(e.$gettext("URL ссылки на конференцию"))+"\n    ")]),e._v(" "),n("a",{attrs:{href:e.webinar.values.embed_url,target:"_blank"}},[e._v(e._s(e.webinar.values.embed_url))]),e._v(" "),n("h3",[e._v("\n      "+e._s(e.$gettext("Учётная запись"))+"\n    ")]),e._v("\n    "+e._s(e.webinar.values.host_email)+"\n  ")]),e._v(" "),n("ModalError",{attrs:{uid:e.uid}},[n("template",{slot:"no-errors"},[e.webinar.action_info.is("edit","host_key")?n("WebinarZoomHostKey",{attrs:{webinar:e.webinar}}):e._e()],1)],2)],1)}),[],!1,null,null,null).exports,WebinarFrameFetcher:b,WebinarZoomPanel:c,WebinarSingleton:a.a},props:{webinar:{required:!0,type:i.a},margin:{required:!1,default:void 0}},data:function data(){return{user_data:this.$store.state.login.user_data}}},g=Object(u.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("WebinarFrameFetcher",{attrs:{webinar:e.webinar}},[e.webinar.iframe_href?[e.webinar.is_show_embed?n("div",[n("div",{staticClass:"full-screen-item"},[n("div",{staticClass:"webinar__container"},[n("WebinarSingleton",{attrs:{webinar:e.webinar}})],1)])]):e._e(),e._v(" "),e.user_data.is_client?n("div",{staticClass:"webinar webinar-linked text-center flex flex-vertical-center flex-center",on:{click:function(t){return t.target!==t.currentTarget?null:e.$refs.link.click()}}},[n("div",[n("a",{ref:"link",staticClass:"btn btn-success btn-lg mb",attrs:{href:e.webinar.values.embed_url,target:"_blank"}},[e._v("\n          "+e._s(e.$gettext("Открыть трансляцию"))+"\n        ")]),e._v(" "),"zoom_shared"===e.webinar.values.type||"zoom"===e.webinar.values.type?n("div",{staticClass:"flex"},[n("div",{staticClass:"mr-xs"},[e._v("\n            "+e._s(e.$gettext("Если у вас еще нет Zoom, то его можно скачать заранее по ссылке: "))+"\n          ")]),e._v(" "),n("a",{attrs:{href:"https://zoom.us/support/download",target:"_blank"}},[e._v("https://zoom.us/support/download")])]):e._e()])]):e._e()]:e._e(),e._v(" "),e.user_data.is_client?e._e():["zoom_shared"===e.webinar.values.type?n("WebinarZoomSharedPanel",{attrs:{webinar:e.webinar}}):"zoom"===e.webinar.values.type?n("WebinarZoomPanel",{attrs:{webinar:e.webinar}}):e._e()]],2)],1)}),[],!1,null,null,null);t.a=g.exports},2194:function(e,t,n){"use strict";n(11),n(7),n(12);var i=n(850),a=n(1964),r={name:"WebinarSingletonIframe",props:{webinar:{type:i.a,required:!0}},data:function data(){return{user_data:this.$store.state.login.user_data,uid_handler:new a.a}},created:function created(){this.uid_handler.init()},beforeDestroy:function beforeDestroy(){this.uid_handler.destroy()},mounted:function mounted(){this.$emit("mounted",this.$el)}},s=n(3),o=Object(s.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.uid_handler.is_show?n("iframe",{ref:"frame",staticClass:"webinar",attrs:{id:"webinar:"+e.webinar.values.id,allowfullscreen:"",allow:"camera; microphone","data-username":e.user_data.initials,"data-auto-login":e.user_data.is_client,src:e.webinar.iframe_href}}):n("div",{staticClass:"webinar text-center flex flex-vertical-center flex-center"},[n("a",{staticClass:"btn btn-primary webinar-btn",on:{click:function(t){e.uid_handler.is_show=!0}}},[e._v(e._s(e.$gettext("Показать трансляцию")))])])}),[],!1,null,null,null).exports,l=n(385),_=n(4),d=n.n(_),u=n(5),c=n.n(u),m=(n(82),n(447)),h=n.n(m),b=function(){function WebinarFrameDisplayState(e,t,n){d()(this,WebinarFrameDisplayState);var i=this.get_step_element(e,n);this.is_related=i&&i.id.toString()===String(t.params.step_element_id),this.is_related_step=i&&i.step_id.toString()===String(t.params.step_id);var a=e.webinar_data;this.modal_enabled=n===a.webinar_id,this.modal_enabled?(this.is_in_content=!a.fullscreen&&this.is_related||a.force_close&&this.is_related_step,this.is_in_modal=!this.is_in_content&&!a.force_close):(this.is_in_content=this.is_related_step,this.is_in_modal=!1),this.is_hide=!this.is_in_content&&!this.is_in_modal}return c()(WebinarFrameDisplayState,[{key:"get_step_element",value:function get_step_element(e,t){var n=e.models.step_elements,i=void 0===n?{}:n,a=null;return h()(i,(function(e){e.webinar_id===t&&(a=e)})),a}}]),WebinarFrameDisplayState}(),f={name:"WebinarSingleton",components:{WebinarSingletonIframe:o},props:{webinar:{type:i.a,required:!0},display:{type:String,default:"content"}},watch:{"frame_state.is_in_modal":{handler:function handler(e){var t={show:e};e&&(t.force_close=!1),Object(l.c)(this.$store,t),this.$emit("mount"),this.mount_iframe()},immediate:!0},"frame_state.is_in_content":{handler:function handler(e){e&&(this.$emit("mount"),this.mount_element())},immediate:!0},"frame_state.is_hide":{handler:function handler(e){e&&l.d.$el&&(l.d.$el.style.visibility="hidden")},immediate:!0}},created:function created(){document.getElementById("content-wrapper").addEventListener("scroll",this.mount_element),window.addEventListener("resize",this.mount_element)},beforeDestroy:function beforeDestroy(){document.getElementById("content-wrapper").removeEventListener("scroll",this.mount_element),window.removeEventListener("resize",this.mount_element)},computed:{frame_state:function frame_state(){var e=new b(this.$store.state,this.$route,this.webinar.values.id);return console.debug("is_in_content =",e.is_in_content,"is_in_modal =",e.is_in_modal),e},can_mount:function can_mount(){return"content"===this.display&&this.frame_state.is_in_content||"modal"===this.display&&this.frame_state.is_in_modal},is_mount_frame:function is_mount_frame(){return"content"===this.display&&!this.frame_state.modal_enabled||"modal"===this.display&&this.frame_state.modal_enabled}},methods:{on_mount:function on_mount(e){Object(l.a)(e),Object(l.c)(this.$store,{loaded:!0})},mount_iframe:function mount_iframe(){var e=this;setTimeout((function(){return e.mount_element()}),1e3)},mount_element:function mount_element(){this.can_mount&&this.$el&&this.$el.parentElement&&l.d.$el&&(Object(a.b)(this.$el.parentElement,l.d.$el,999),this.set_transition(""))},set_transition:function set_transition(e){l.d.$el&&(l.d.$el.style.transition=e)}}},w=Object(s.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.is_mount_frame?t("WebinarSingletonIframe",{attrs:{webinar:this.webinar},on:{mounted:this.on_mount}}):this._e()],1)}),[],!1,null,null,null);t.a=w.exports},385:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return update_webinar_modal})),n.d(t,"b",(function(){return show_webinar_in_full_screen})),n.d(t,"a",(function(){return set_webinar_frame})),n.d(t,"e",(function(){return l}));var i=n(13),a=n.n(i),r=(n(7),n(28),n(222),n(173),n(35)),s={namespaced:!0,actions:{},mutations:{update:function update(e,t){e.webinar_id=t},fullscreen:function fullscreen(e,t){e.fullscreen=t},show:function show(e){e.show=!0},hide:function hide(e){e.show=!1},update_data:function update_data(e,t){Object.entries(t).forEach((function(t){e[t[0]]=t[1]}))},add_link:function add_link(e,t){var n=e.counters[t];e.counters=n?Object.assign({},e.counters,a()({},t,n+1)):Object.assign({},e.counters,a()({},t,1))},remove_link:function remove_link(e,t){var n=e.counters[t];e.counters=n?Object.assign({},e.counters,a()({},t,n-1)):Object.assign({},e.counters,a()({},t,0)),e.show=e.counters[t]>1}},state:{webinar_id:null,show:!1,loaded:!1,fullscreen:!1,collapse:!1,force_close:!1,counters:{}}},o={$el:null};function update_webinar_modal(e,t){e.commit("webinar_data/update_data",t)}function show_webinar_in_full_screen(e){e.commit("webinar_data/update_data",{show:!0,fullscreen:!0,collapse:!1,force_close:!1})}function set_webinar_frame(e){o.$el=e}var l=new r.a("webinar_data",s)}}]);
//# sourceMappingURL=43.43.9ef3cc87419d6aa5d705.js.map