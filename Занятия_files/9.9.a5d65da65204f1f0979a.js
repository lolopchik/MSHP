(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1257:function(e,t,n){"use strict";n.d(t,"c",(function(){return get_current_menu_item})),n.d(t,"d",(function(){return get_menu_item})),n.d(t,"b",(function(){return get_closest_route_meta_param})),n.d(t,"a",(function(){return catch_old_page_clicks}));var i=n(10),s=n.n(i),a=(n(41),n(65),n(7),n(70),n(102),n(103),n(53),n(96),n(11),n(29),n(12),n(884),n(637),n(190)),l=n(1);function find_current_item(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=e.names_map[n.name];if(!i){var s=t.currentRoute.matched.slice().reverse().find((function(t){return e.names_map[t.name]}));s&&(i=e.names_map[s.name])}return i}function get_current_menu_item(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(l.isRequired)(),i=find_current_item(e,t,n);return i?new a.b(i,t):null}function get_menu_item(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var s=find_current_item(e,t,n);return s&&(s=s.get_from_root(i),s=new a.b(s,t)),s}function get_closest_route_meta_param(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)(),n=s()(e.matched||[]).reverse(),i=n.find((function(e){return e.meta&&e.meta[t]}));return i&&i.meta[t]}var r=["get-modal-btn","toggle-btn","get_tab_btn","ajax_btn","file-input-wrapper"],o=["change-url-btn"];function catch_old_page_clicks(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)(),i=n.target;if("A"===(null===(e=i.parentElement)||void 0===e?void 0:e.tagName)&&(i=i.parentElement),"A"===i.tagName&&"_blank"!==i.target&&!r.some((function(e){return i.classList.contains(e)}))&&!i.href.includes("#extended_filters")&&!(i.origin&&i.origin!==window.location.origin||(n.preventDefault(),o.some((function(e){return i.classList.contains(e)}))))){var a=i.href.replace(i.origin,"");if(a.length){var _=new URL(i.href).searchParams;if("/"!==s()(a).reverse().shift()&&0===_.size&&(a+="/"),n.ctrlKey)return window.open(a,"_blank");t.push({path:a})}}}},1845:function(e,t,n){"use strict";n(41),n(11),n(7),n(12),n(53),n(96);var i=n(839),s=n(21),a=n(22),l=n(873),r=n(18),o=n(622),_=n(374),c=n(1825),u={name:"step-element-settings-dropdown",props:{step_element:{required:!1,type:i.a}},data:function data(){return{title_width:"200px",material_archive_href:this.step_element&&this.step_element.material&&a.b["api:material_download_api"](this.step_element.material.values.id)}},computed:{element:function element(){return this.step_element.problem?this.step_element.element.problem:this.step_element.element},unit:function unit(){var e,t=this.$store.state.models.steps&&this.$store.state.models.steps[this.step_element.values.step_id],n=t&&(null===(e=this.$store.state.models.units)||void 0===e?void 0:e[t.unit_id]);return n&&new _.a(n,this.$store.state)},is_run_solve:function is_run_solve(){return"run_solve"===this.$route.meta.name},can_edit:function can_edit(){return!this.is_run_solve&&this.$has_permission(c.a,!0)},can_delete:function can_delete(){return!this.is_run_solve&&!this.$store.state.result.is_preview_mode&&this.$has_permission(c.a,!0)}},methods:{get_client_link:function get_client_link(){var e=window.location.href.replace("teaching_situation/studies/schedule","pupil/calendar").replace("/content","");Object(r.c)(e,this.$refs.copy)},call_pupils:function call_pupils(){return new s.a(a.b["api:step_element_navigate_api"](this.step_element.values.id),this.step_element.uid).execute(this.$store,{})},change_material_order:function change_material_order(){this.element.action_operator.set(this.$store,"sort")},upload_webinar:function upload_webinar(){new s.a(a.b["api:webinar_upload_api"](this.step_element.webinar.values.id),this.step_element.webinar.uid).on_before(s.c.hide_errors(this.step_element.webinar.uid)).on_error(s.c.show_errors(this.step_element.webinar.uid)).on_success(s.c.update_instance(l.a)).execute(this.$store,{})},show_testnig_attempt:function show_testnig_attempt(){new o.a(this.step_element.testing.values.id,this.$store.state).save_state(this.$store).action_operator.edit(this.$store)},set_dropdown_width:function set_dropdown_width(){this.title_width=this.$refs.title&&this.$refs.title.offsetWidth+"px"}}},p=n(3),m=Object(p.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.$store.state.login.user_data.is_client||e.$store.state.result.is_preview_mode?[e._t("step_element_title")]:e.step_element?n("dropdown",{ref:"dropdown"},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$gettext("Настройки"),expression:"$gettext('Настройки')"}],ref:"title",attrs:{gettext:"Настройки",role:"button"},on:{click:e.set_dropdown_width}},[e._t("step_element_title"),e._v(" "),n("i",{ref:"icon_angle",staticClass:"icon-angle-down"})],2),e._v(" "),n("template",{slot:"dropdown"},[e.can_edit?n("li",[n("a",{attrs:{role:"button"},on:{click:function(t){return e.element.action_operator.edit(e.$store)}}},[n("i",{staticClass:"m-r icon-pencil icon-large"}),e._v("\n          "+e._s(e.$gettext("Редактировать"))+"\n        ")])]):e._e(),e._v(" "),"testing"===e.step_element.values.type?n("li",[n("a",{attrs:{role:"button"},on:{click:e.show_testnig_attempt}},[n("i",{staticClass:"m-r icon-eye-open icon-large"}),e._v("\n        "+e._s(e.$gettext("Пробное прохождение"))+"\n      ")])]):e._e(),e._v(" "),"problem"===e.step_element.values.type?n("li",[n("router-link",{attrs:{to:{name:"problem_detail",params:{problem_id:e.step_element.problem.values.problem_id}}}},[n("i",{staticClass:"m-r icon-book icon-large"}),e._v("\n          "+e._s(e.$gettext("Перейти к задаче"))+"\n        ")])],1):e._e(),e._v(" "),e.can_edit&&"material"===e.step_element.values.type?n("li",[n("a",{attrs:{role:"button"},on:{click:e.change_material_order}},[n("i",{staticClass:"m-r icon-sort-by-order icon-large"}),e._v("\n        "+e._s(e.$gettext("Изменить порядок файлов"))+"\n      ")])]):e._e(),e._v(" "),"material"===e.step_element.values.type?n("li",[n("a",{attrs:{href:e.material_archive_href,role:"button"}},[n("i",{staticClass:"m-r icon-download-alt icon-large"}),e._v("\n        "+e._s(e.$gettext("Скачать все архивом"))+"\n      ")])]):e._e(),e._v(" "),e.unit&&!e.unit.values.private?[n("li",[n("a",{ref:"copy",attrs:{role:"button"},on:{click:e.get_client_link}},[n("i",{staticClass:"m-r icon-link icon-large"}),e._v("\n          "+e._s(e.$gettext("Скопировать ссылку для ученика"))+"\n        ")])]),e._v(" "),n("li",[n("a",{attrs:{role:"button"},on:{click:e.call_pupils}},[n("i",{staticClass:"m-r icon-group icon-large"}),e._v("\n          "+e._s(e.$gettext("Направить учеников сюда"))+"\n        ")])])]:e._e(),e._v(" "),"webinar"===e.step_element.values.type?[n("li",[n("a",{attrs:{role:"button"},on:{click:e.upload_webinar}},[n("i",{staticClass:"m-r icon-download-alt icon-large"}),e._v("\n          "+e._s(e.$gettext("Скачать"))+"\n        ")])]),e._v(" "),e._l(e.step_element.webinar.records,(function(t){return n("li",{key:t.values.id},[n("a",{attrs:{href:t.download_url}},[e._v("\n            "+e._s(t.values.full_name)+"\n          ")])])}))]:e._e(),e._v(" "),e.can_delete?n("li",{style:{"min-width":e.title_width}},[n("a",{attrs:{role:"button"},on:{click:function(t){return e.element.action_operator.remove(e.$store)}}},[n("i",{staticClass:"m-r icon-trash icon-large"}),e._v("\n        "+e._s(e.$gettext("Удалить"))+"\n      ")])]):e._e()],2)],2):e._e()],2)}),[],!1,null,null,null).exports,d={name:"StepElementQuestionButton",components:{TestingDiscussions:n(1863).a},props:{step_element:{required:!0,type:i.a}},data:function data(){return{is_question:this.step_element.element.get_is_question_data()}}},v=Object(p.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$gettext("Задать вопрос"),expression:"$gettext('Задать вопрос')"}],staticClass:"pull-right step_element_icon",on:{click:function(t){return e.is_question.action_operator.edit(e.$store)}}},[n("span",{staticClass:"glyphicon glyphicon-question-sign"})]),e._v(" "),e.is_question.action_info.is_edit?n("testing-discussions",{attrs:{object_id:e.step_element.element.values.id,model:e.is_question.model,is_question:e.is_question}},[n("template",{slot:"title"},[e._v("\n      "+e._s(e.is_question.question_title)+"\n    ")])],2):e._e()],1)}),[],!1,null,null,null).exports,h=n(2354),g=n(1257),f={name:"StepElementHeading",components:{StepElementNavigation:h.a,StepElementQuestionButton:v,StepElementSettingsDropdown:m},props:{step_element:{required:!0,type:i.a}},computed:{show_arrows_nav:function show_arrows_nav(){return this.$route.meta.show_arrows_nav},is_import:function is_import(){return"import_step_element_content"===this.$route.name||"import_step_content"===this.$route.name},show_step_element_title:function show_step_element_title(){return Object(g.b)(this.$route,"show_step_element_title")}}},b=Object(p.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-9"},[e.show_step_element_title?n("div",{staticClass:"step_element__title"},[e.show_arrows_nav?[n("step-element-navigation",{attrs:{step_element:e.step_element}},[n("step-element-settings-dropdown",{attrs:{step_element:e.step_element}},[n("template",{slot:"step_element_title"},[e._t("name_prefix"),e._v(e._s(e.step_element.element.title)+"\n            ")],2)],2),e._v(" "),e._t("name_suffix")],2)]:e.is_import?[e._t("name_prefix"),e._v(e._s(e.step_element.element.title)+"\n        "),e._t("name_suffix")]:[n("step-element-settings-dropdown",{attrs:{step_element:e.step_element}},[n("template",{slot:"step_element_title"},[e._t("name_prefix"),e._v(e._s(e.step_element.element.title)+"\n          ")],2)],2),e._v(" "),e._t("name_suffix")]],2):e._e()]),e._v(" "),n("div",{staticClass:"col-xs-3 flex flex-vertical-center flex-end"},[e._t("buttons"),e._v(" "),e.is_import||e.$store.state.result.is_preview_mode?e._e():n("step-element-question-button",{staticClass:"ml-xs",attrs:{step_element:e.step_element}})],2)])}),[],!1,null,null,null);t.a=b.exports},1863:function(e,t,n){"use strict";var i={name:"testing-discussions",components:{DiscussionListFetcher:n(879).default},props:{is_question:{required:!0},object_id:{required:!0},model:{required:!0,type:String}},data:function data(){return{is_open:!0}},beforeDestroy:function beforeDestroy(){this.to_detail()},methods:{to_detail:function to_detail(){var e=this;this.is_open=!1,this.$nextTick((function(){e.is_question.action_operator.detail(e.$store)}))}}},s=n(3),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{staticClass:"modal-extra-large",staticStyle:{"z-index":"10001"},attrs:{footer:!1,"append-to-body":!0,backdrop:!1},on:{hide:e.to_detail},model:{value:e.is_open,callback:function(t){e.is_open=t},expression:"is_open"}},[n("template",{slot:"title"},[e._t("title",(function(){return[e._v("\n        "+e._s(e.$gettext("Задайте вопрос"))+"\n      ")]}))],2),e._v(" "),n("discussion-list-fetcher",{attrs:{object_id:e.object_id,model:e.model}})],2)}),[],!1,null,null,null);t.a=a.exports},2354:function(e,t,n){"use strict";var i=n(106),s=n.n(i),a=(n(11),n(7),n(12),n(272),n(839)),l={name:"StepElementNavigationPrev",functional:!0},r=n(3),o=Object(r.a)(l,(function(e,t){var n=t._c;return n("div",{staticClass:"inline-block"},[t.props.link?n("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.props.gettext("Предыдущий элемент"),expression:"props.gettext('Предыдущий элемент')"}],staticClass:"inline-nav",attrs:{to:t.props.link}},[n("span",{staticClass:"glyphicon glyphicon-chevron-left"})]):n("a",{staticClass:"disabled inline-nav"},[n("span",{staticClass:"glyphicon glyphicon-chevron-left"})])],1)}),[],!0,null,null,null).exports,_={name:"StepElementNavigationNext"},c=Object(r.a)(_,(function(e,t){var n=t._c;return n("div",{staticClass:"inline-block"},[t.props.link?n("div",{staticClass:"next-element-link"},[n("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.props.gettext("Следующий элемент"),expression:"props.gettext('Следующий элемент')"}],ref:"next",staticClass:"inline-nav",attrs:{gettext:"Следующий элемент",to:t.props.link}},[n("span",{staticClass:"glyphicon glyphicon-chevron-right"})])],1):n("a",{staticClass:"disabled inline-nav"},[n("span",{staticClass:"glyphicon glyphicon-chevron-right"})])])}),[],!0,null,null,null).exports,u=n(374),p=n(1827),m={name:"StepElementNavigation",components:{StepElementNavigationNext:c,StepElementNavigationPrev:o},props:{step_element:{required:!0,type:a.a},to_next_unit:{required:!1,default:!1,type:Boolean}},data:function data(){return{unit_detail_links:p.c}},computed:{neighbours:function neighbours(){var e=this.step_element.values.id,t=this.$route.params.classes_id;if(this.to_next_unit){var n=Object(a.e)(this.$store,t,this.step_element.values.step_id),i=s()(n,2),l=i[0],r=i[1],o=Object(u.c)(this.$store,l),_=Object(u.b)(this.$store,r);return{prev:o&&new a.a(o),next:o&&new a.a(_)}}var c=Object(a.c)(this.$store,t),p=c.findIndex((function(t){return t.id===e}));return{prev:p>0?new a.a(c[p-1],this.$store.state):null,next:p+1<c.length?new a.a(c[p+1],this.$store.state):null}},is_client:function is_client(){return this.$store.state.login.user_data.is_client}}},d=Object(r.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-vertical-center"},[n("div",{staticClass:"h3 no-top inline-block"},[n("div",{staticClass:"flex"},[n("step-element-navigation-prev",{attrs:{gettext:e.$gettext,link:e.neighbours.prev&&e.unit_detail_links.step_element_detail_link(e.$route,e.neighbours.prev)}}),e._v(" "),n("span",{staticClass:"bold"},[e._t("default")],2),e._v(" "),n("step-element-navigation-next",{attrs:{gettext:e.$gettext,link:e.neighbours.next&&e.unit_detail_links.step_element_detail_link(e.$route,e.neighbours.next)}}),e._v(" "),n("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$gettext("Вернуться назад"),expression:"$gettext('Вернуться назад')"}],attrs:{gettext:"Вернуться назад",to:e.unit_detail_links.step_element_link(e.$route,e.step_element)}},[n("span",{staticClass:"glyphicon glyphicon-remove"})])],1)])])}),[],!1,null,null,null);t.a=d.exports}}]);
//# sourceMappingURL=9.9.a5d65da65204f1f0979a.js.map