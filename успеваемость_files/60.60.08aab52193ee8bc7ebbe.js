(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1827:function(t,i,r){"use strict";r.d(i,"c",(function(){return l})),r.d(i,"a",(function(){return c})),r.d(i,"d",(function(){return u})),r.d(i,"e",(function(){return _})),r.d(i,"b",(function(){return p}));var a=r(13),o=r.n(a);r(11),r(7),r(12),r(33),r(36),r(25),r(23),r(28),r(38);function ownKeys(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach((function(i){o()(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}function get_prefixed_name(t,i){return t&&t.meta&&t.meta.name_prefix?t.meta.name_prefix+i:i}var l={unit_link:function unit_link(t,i,r){return{name:get_prefixed_name(t,"unit_content"),params:{classes_id:r||t.params.classes_id,unit_id:i.values.id}}},step_link:function step_link(t,i,r){return{name:get_prefixed_name(t,"step_content_root"),params:{step_id:i.values.id,unit_id:i.values.unit_id,classes_id:t.params.classes_id||r}}},step_element_link:function step_element_link(t,i,r,a){return{name:get_prefixed_name(t,a||"step_element_content"),params:{classes_id:t.params.classes_id||r,step_id:i.values.step_id,step_element_id:i.values.id}}},step_element_detail_link:function step_element_detail_link(t,i,r){return l.step_element_link(t,i,r,"step_element_detail")}},u=_objectSpread(_objectSpread({},l),{},{unit_link:function unit_link(t,i){return{name:"unit_edit",params:{unit_id:i.values.id}}}}),c=_objectSpread(_objectSpread({},l),{},{unit_link:function unit_link(t,i){return{name:"contest_edit",params:{unit_id:i.values.id}}}}),_=_objectSpread(_objectSpread({},l),{},{unit_link:function unit_link(t,i){if(i.values.steps)return{name:"import_step_content",params:{step_id:i.values.steps[0],unit_id:i.values.id,import_id:t.params.import_id}}},step_link:function step_link(t,i){return{name:"import_step_content",params:{step_id:i.values.id,unit_id:i.values.unit_id,import_id:t.params.import_id}}},step_element_link:function step_element_link(t,i){return{name:"import_step_element_content",params:{import_id:t.params.import_id,step_id:i.values.step_id,step_element_id:i.values.id}}}}),p=_objectSpread(_objectSpread({},l),{},{unit_link:function unit_link(t,i){return{name:"classes_checking_problem",params:{unit_id:i.values.id}}},step_link:function step_link(t,i){return{name:"classes_checking",params:{step_id:i.values.id,unit_id:i.values.unit_id}}},step_element_link:function step_element_link(t,i){return{name:"classes_checking_problem",params:{classes_id:t.params.classes_id,step_id:i.values.step_id,step_element_id:i.values.id}}}})},1856:function(t,i,r){"use strict";var a={name:"FallbackImage",props:{src:{type:[String,null],required:!1},fallback_src:{type:String,required:!0},alt:{type:String,default:""}},data:function data(){return{error:!1}},computed:{_src:function _src(){return this.src?this.error?this.fallback_src:this.src:this.fallback_src}}},o=r(3),l=Object(o.a)(a,(function(){var t=this,i=t.$createElement;return(t._self._c||i)("img",{attrs:{src:t._src,alt:t.alt},on:{error:function(i){t.error=!0},click:function(i){return t.$emit("click",i)}}})}),[],!1,null,null,null);i.a=l.exports},2031:function(t,i,r){"use strict";r(33);var a=r(294),o=r(1691),l=r(757),u=r.n(l);function set_css_vh_variable(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}var c=u()(set_css_vh_variable,100);var _=r(1257),p=r(48),d=r(1735),m=r(18),v={name:"ModernNavigation",components:{ResponsiveWidth:a.a,ResponsiveWidthProvider:d.a,GlobalErrorWrapper:o.a},props:{uid:{type:String,default:"modern_navigation"},watch_scroll:{type:Boolean,default:!1},footer_on_tablet:{type:Boolean,default:!1},user:{type:p.a,required:!0},sidebar_storage_key:{type:String,default:"client_classes_navigation_sidebar_status"}},data:function data(){var t=!0,i=localStorage.getItem(this.sidebar_storage_key);return i&&(t=JSON.parse(i)),{is_collapsed:!1,old_scroll_position:0,debounced_on_scroll:u()(this.onScroll,50),is_sidebar_open:t}},created:function created(){!function fix_mobile_height(){set_css_vh_variable(),window.addEventListener("resize",c)}()},computed:{properties_object:function properties_object(){return{user:this.user,toggle_sidebar:this.toggle_sidebar,is_sidebar_open:this.is_sidebar_open,is_collapsed_header:this.is_collapsed}},navigation_config:function navigation_config(){return Object(_.b)(this.$route,"navigation_config")||{}},navigation_footer:function navigation_footer(){return this.navigation_config.mobile_footer},top_nav_bar:function top_nav_bar(){return this.navigation_config.top_nav_bar},is_need_footer:function is_need_footer(){return this.is_need_element("navigation_footer")},is_need_top_nav_bar:function is_need_top_nav_bar(){return this.is_need_element("top_nav_bar")}},methods:{is_display_footer:function is_display_footer(t,i){return!t&&(!(!this.footer_on_tablet||!i)||(!t&&!i||!i))},onScroll:function onScroll(t){if(t.target){var i=t.target.scrollTop;i<=100?this.is_collapsed=!1:i-this.old_scroll_position>50?this.is_collapsed=!0:i-this.old_scroll_position<-100&&(this.is_collapsed=!1),this.old_scroll_position=i}},is_need_element:function is_need_element(t){var i=this.navigation_config[t];return"boolean"!=typeof i||i},toggle_sidebar:function toggle_sidebar(){this.is_sidebar_open=!this.is_sidebar_open,localStorage.setItem(this.sidebar_storage_key,JSON.stringify(this.is_sidebar_open))},on_resize_header:function on_resize_header(){Object(m.k)()}},beforeDestroy:function beforeDestroy(){!function clear_fix_mobile_height(){window.removeEventListener("resize",c)}()}},h=r(3),g=Object(h.a)(v,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ResponsiveWidth",{attrs:{storage_key:"modern-navigation"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.width;return[r("ResponsiveWidthProvider",{staticClass:"modern-navigation",class:t.$vnode.data.staticClass,attrs:{width:a},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.is_md,o=i.is_lg;return[r("div",{directives:[{name:"resize",rawName:"v-resize",value:{on_resize:t.on_resize_header},expression:"{on_resize: on_resize_header}"}],staticClass:"navigation-header modern-page"},[t.is_need_top_nav_bar?[t.top_nav_bar?r(t.top_nav_bar,t._b({tag:"component"},"component",Object.assign({},{is_lg:o,is_md:a},t.properties_object),!1)):t._t("header",null,null,Object.assign({},{is_lg:o,is_md:a},t.properties_object))]:t._e(),t._v(" "),t._t("additional_actions",null,{is_lg:o})],2),t._v(" "),r("GlobalErrorWrapper",t._g({staticClass:"content-wrapper",attrs:{id:"content-wrapper"}},t.watch_scroll&&{scroll:t.debounced_on_scroll}),[t._t("left_sidebar",null,null,Object.assign({},{is_lg:o,is_md:a},t.properties_object)),t._v(" "),r("div",{staticClass:"main-content"},[t._t("default",null,{is_lg:o})],2)],2),t._v(" "),t.is_need_footer&&t.is_display_footer(o,a)&&(t.navigation_footer||t.$slots.navigation_footer)?r("div",{staticClass:"navigation-footer modern-page"},[t.navigation_footer?r(t.navigation_footer,t._b({tag:"component"},"component",Object.assign({},{is_lg:o,is_md:a},t.properties_object),!1)):t._t("navigation_footer",null,null,Object.assign({},{is_lg:o,is_md:a},t.properties_object))],2):t._e()]}}],null,!0)})]}}])})}),[],!1,null,null,null);i.a=g.exports},2032:function(t,i,r){"use strict";r(130);var a=r(889),o=r(849),l=r(1257),u=window.main_jquery,c={name:"ContentNavigator",components:{HtmlFetcher:a.a,OldFashionContent:o.a},data:function data(){return{old_page_url:null,old_content_watch_index:0,old_page_require_js:null}},created:function created(){var t=this;if(u){var i=u("body");i.on("reload_content","",this.update_old_page_content),i.on("changed_href","",(function(i,r){return t.redirect_to_new_url(r)}))}},computed:{old_page_key:function old_page_key(){return[this.old_content_watch_index,this.old_page_url,this.$store.state.context.current_school,this.$store.state.context.date_from].join(":")}},methods:{catch_link_clicks:function catch_link_clicks(t){Object(l.a)(this.$router,t)},open_old_page:function open_old_page(t){var i,r;this.old_page_url=t.fullPath,this.old_page_require_js=null===(i=t.meta)||void 0===i?void 0:i.require_js,this.old_page_load_callback=null===(r=t.meta)||void 0===r?void 0:r.load_callback},clear_old_page:function clear_old_page(){this.old_page_url=null,this.old_page_require_js=null,this.old_page_load_callback=null},redirect_to_new_url:function redirect_to_new_url(t){t!==this.$route.path&&this.$router.push({path:t})},update_old_page_content:function update_old_page_content(){this.old_content_watch_index++},on_fetched:function on_fetched(){this.old_page_url&&this.old_page_load_callback&&this.old_page_load_callback()}},watch:{$route:{immediate:!0,handler:function handler(t,i){var r;if(t.path!==(null==i?void 0:i.path))return null!==(r=t.meta)&&void 0!==r&&r.old_page||0===t.matched.length?this.open_old_page(t):void this.clear_old_page()}}},beforeDestroy:function beforeDestroy(){var t=u("body");t.off("reload_content"),t.off("changed_href")}},_=r(3),p=Object(_.a)(c,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.old_page_url?r("div",{staticClass:"old_page",on:{click:t.catch_link_clicks}},[r("HtmlFetcher",{key:t.old_page_key,attrs:{url:t.old_page_url,require_js:t.old_page_require_js,with_third_level_menu:""},on:{fetched:t.on_fetched},scopedSlots:t._u([{key:"default",fn:function(t){return[r("OldFashionContent",{staticClass:"relative p-md",attrs:{content:t.html_data}})]}}],null,!1,3796198412)})],1):r("div",{staticClass:"router-view"},[r("RouterView",t._b({},"RouterView",t.$props,!1))],1)}),[],!1,null,null,null);i.a=p.exports},206:function(t,i,r){"use strict";r.d(i,"a",(function(){return get_pupil_by_user})),r.d(i,"b",(function(){return get_user})),r.d(i,"c",(function(){return set_user}));var a=r(13),o=r.n(a),l=(r(11),r(7),r(12),r(33),r(36),r(25),r(23),r(28),r(38),r(172)),u=r(48),c=r(21),_=r(22),p=r(1),d=r(66),m=r(51);function ownKeys(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach((function(i){o()(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}function get_pupil_by_user(t){var i=t.state.models.pupils[t.values.pupil];return i&&new l.a(i,t.state)}function get_user(t){var i=t.state.login.user_data.user_id,r=t.state.models.users&&t.state.models.users[i];return r&&new u.a(r,t)}function set_user(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(p.isRequired)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.a(_.b["api:user_account_detail_api"](),t).get().on_success(c.c.update_instance(m.a)).on_error(c.c.show_errors(t)).on_before(c.c.hide_errors(t)).execute(i,_objectSpread(_objectSpread({},r),{},{schema:JSON.stringify(d.i)}))}},2112:function(t,i,r){"use strict";r.d(i,"a",(function(){return _}));var a=r(4),o=r.n(a),l=r(5),u=r.n(l),c=(r(153),r(7),r(28),r(11),r(12),r(1)),_=function(){function ClassesScoreProvider(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,ClassesScoreProvider),this.units=t,this.results=i}return u()(ClassesScoreProvider,[{key:"score",get:function get(){for(var t=0,i=0,r=Object.values(this.results);i<r.length;i++){var a=r[i];a.score&&a.score>0&&(t+=a.score)}return t}},{key:"classes_score",get:function get(){var t=0;return this.units.forEach((function(i){t+=i.values.total_score||0})),parseInt(t)}}]),ClassesScoreProvider}()},2196:function(t,i,r){"use strict";var a=r(2097),o=r(2087),l=r(48),u={name:"MenuClassesUserName",components:{UserAvatar:r(521).a},props:{user:{type:l.a,required:!1}}},c=r(3),_=Object(c.a)(u,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"modern-placement flex flex-vertical-center modern-placement-avatar modern-placement-bgc-grey-soft"},[i("UserAvatar",{attrs:{user:this.user,size:"24px",font_size:"12px"}}),this._v(" "),i("span",{staticClass:"visible-lg-inline ml-sm text-subtitle"},[this._v("\n    "+this._s(this.user.values.first_name)+"\n  ")])],1)}),[],!1,null,null,null).exports,p=r(72),d={name:"ClientClassesTopNavbar",components:{NotificationsDropdown:a.a,NavigationQuestionsButton:o.a,MenuClassesUserName:_,PortalTarget:p.PortalTarget},props:{user:{type:l.a,required:!0},is_md:{type:Boolean,default:!0},is_lg:{type:Boolean,default:!0},is_sidebar_open:{type:Boolean,default:!1},toggle_sidebar:{type:Function,default:function _default(){}}}},m=Object(c.a)(d,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"top-nav-bar",attrs:{role:"navigation"}},[t.is_md||t.is_lg?r("div",{staticClass:"flex flex-vertical-center"},[r("button",{staticClass:"btn-modern-link-grey gap-sm p-0",on:{click:t.toggle_sidebar}},[t.is_sidebar_open?[r("i",{staticClass:"shp_icons-sidebar_left_close"}),t._v("\n        "+t._s(t.$gettext("Свернуть"))+"\n      ")]:[r("i",{staticClass:"shp_icons-sidebar_left_open"}),t._v("\n        "+t._s(t.$gettext("Показать"))+"\n      ")]],2),t._v(" "),t.is_lg?r("MenuClassesUserName",{staticClass:"ml",attrs:{user:t.user}}):t._e()],1):t._e(),t._v(" "),r("PortalTarget",{staticClass:"classes_navigation_title",attrs:{name:"classes_navigation_title"}}),t._v(" "),r("div",{staticClass:"flex flex-vertical-center flex-end"},[t._t("right-side-actions",(function(){return[t.user.is_client?r("NotificationsDropdown",[r("i",{staticClass:"shp_icons-notifications_notification text-subtext-color",attrs:{slot:"button_icon"},slot:"button_icon"})]):t._e(),t._v(" "),t.user.is_client?r("NavigationQuestionsButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$gettext("Задать вопрос"),expression:"$gettext('Задать вопрос')"}],staticClass:"btn-modern-link-grey ml",attrs:{gettext:"Задать вопрос"}}):r("NavigationQuestionsButton",{staticClass:"btn-modern-link-grey"}),t._v(" "),r("button",{staticClass:"btn-modern-link-grey gap-sm ml-md",on:{click:function(i){return t.$router.push({name:"pupil_root"})}}},[t.is_lg?[t._v("\n          "+t._s(t.$gettext("На главную"))+"\n        ")]:t._e(),t._v(" "),r("i",{staticClass:"shp_icons-arrow_logout"})],2)]}))],2)],1)}),[],!1,null,null,null);i.a=m.exports},2263:function(t,i,r){"use strict";var a=r(975),o={name:"ClassesTeacherAvatar",components:{FallbackImage:r(1856).a},props:{classes_teacher:{type:a.a,required:!0},size:{type:String,default:"48px"}}},l=r(3),u=Object(l.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("FallbackImage",{staticClass:"img-rounded rounded_avatar teacher-avatar",style:{height:this.size,width:this.size},attrs:{alt:this.classes_teacher.teacher.full_name,src:this.classes_teacher.teacher.user.values.avatar,fallback_src:"/static/mshp/img/empty_avatar_lg.jpg"}})}),[],!1,null,null,null);i.a=u.exports},2729:function(t,i,r){"use strict";r.r(i);var a=r(48),o=(r(11),r(7),r(12),r(2031)),l=r(51),u=(r(68),r(43),r(33),r(65),r(25),r(105),r(881)),c=r(1617),_=r(27),p=r(1876),d=r(268),m=r(1625),v={name:"ClientClassesNavigationDataProvider",props:{classes_id:{type:[String,Number],required:!0},user:{type:a.a,required:!0}},data:function data(){return{internal_classes:null}},computed:{classes:function classes(){var t,i=null===(t=this.$store.state.models.classes)||void 0===t?void 0:t[this.classes_id];return i&&new d.a(i,this.$store.state)},is_team_enabled:function is_team_enabled(){var t;return null===(t=this.classes)||void 0===t?void 0:t.is_team_enabled},classes_team:function classes_team(){var t=this;if(!this.is_team_enabled)return null;var i=this.$store.state.models.classes_teams||{};return Object.keys(i).map((function(r){return new u.a(i[r],t.$store.state)})).find((function(i){return i.team.has_user(t.user.values.id)}))},unit_users_results:function unit_users_results(){var t=this,i=this.$store.state.models.unit_users||{};return Object.keys(i).map((function(r){return new m.a(i[r],t.$store.state)})).filter((function(i){return i.values.user_id===t.user.values.id&&i.values.unit_id>=0}))},results:function results(){var t=this,i=Object(_.f)(this.unit_users_results,(function(t){return t.values.unit_id}));return Object(_.i)(i,(function(i){return new p.a(t.$store.state,i)}))},unit_users:function unit_users(){var t=this,i=this.$store.state.models.unit_users||{},unit_users=Object.keys(i).map((function(r){return new c.a(i[r],t.$store.state)}));return unit_users.filter((function(i){return i.values.user_id===t.user.values.id&&i.values.unit_id>=0&&Number(t.classes_id)===i.values.unit.classes_id}))},units:function units(){var units=this.unit_users.map((function(t){return t.unit}));return units.sort((function(t,i){return t.values.number-i.values.number})).filter((function(t){return!1===t.values.private}))}},watch:{classes:{immediate:!0,handler:function handler(t){t&&(this.internal_classes=t)}}}},h=r(3),g=Object(h.a)(v,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default",null,{classes:this.internal_classes,classes_team:this.classes_team,results:this.results,units:this.units})],2)}),[],!1,null,null,null).exports,b={name:"ClientClassesSidebarArrows",components:{ClientClassesArrowsProvider:r(2416).a},props:{classes:{type:d.a,required:!0}}},y=Object(h.a)(b,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ClientClassesArrowsProvider",{attrs:{classes:t.classes},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.has_next_class,o=i.has_previous_class,l=i.next,u=i.prev;return[r("div",{staticClass:"flex flex-vertical-center flex-space-between"},[r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$gettext("Предыдущее занятие"),expression:"$gettext('Предыдущее занятие')"}],staticClass:"btn-modern btn-modern-default",class:{invisible:!o},attrs:{gettext:"Предыдущее занятие"},on:{click:u}},[r("i",{staticClass:"shp_icons-arrow_arrow_left"})]),t._v(" "),r("span",{staticClass:"text-button"},[t._v("\n        "+t._s(t._f("moment")(t.classes.values.date_of,"L"))+"\n      ")]),t._v(" "),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$gettext("Следующее занятие"),expression:"$gettext('Следующее занятие')"}],staticClass:"btn-modern btn-modern-default",class:{invisible:!a},attrs:{gettext:"Следующее занятие"},on:{click:l}},[r("i",{staticClass:"shp_icons-arrow_arrow_right"})])])]}}])})}),[],!1,null,null,null).exports,x=r(34),w=r.n(x),C=r(20),k=r.n(C),O=r(19),j=r.n(O),S=r(374),$=r(2112),q=r(21),P=r(22),N=r(356),A=r(360),E=r(1737),L=r(2263),R=r(594),D=r(326),T={name:"ClientClassesSidebarInfoPanel",components:{ShpMark:E.a,ClassesTeacherAvatar:L.a},props:{classes:{type:d.a,required:!0},results:{type:Object,default:function _default(){return{}}},units:{type:Array,default:function _default(){return[]},validator:Object(_.a)(S.a)}},data:function data(){return{classes_marks:[]}},computed:{classes_teachers:function classes_teachers(){return this.classes.active_classes_teachers},classes_lessons:function classes_lessons(){return this.classes.classes_lessons},time_begin:function time_begin(){return j()(this.classes.values.datetime_begin).format("LT")},time_end:function time_end(){return j()(this.classes.values.datetime_end).format("LT")},classes_score_provider:function classes_score_provider(){return new $.a(this.units,this.results)},classes_score:function classes_score(){return this.classes_score_provider.classes_score},score:function score(){return this.classes_score_provider.score}},methods:{fetch_classes_marks:function fetch_classes_marks(){return new q.a(P.b["api:classes_marks_list_api"](),"classes_marks_navigation_sidebar").get().on_success(q.c.update_multiple(R.a)).execute(this.$store,{schema:JSON.stringify(N.b),pupil__user_id:Object(D.b)(this.$store.state),classes_id:this.classes.values.id})},set_classes_marks:function set_classes_marks(){var t=this;return w()(k.a.mark((function _callee(){var i,r,a,o;return k.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.fetch_classes_marks();case 2:r=l.sent,a=r.response,o=null==a||null===(i=a.data)||void 0===i?void 0:i.results.map((function(i){return new A.a(i,t.$store.state)})),t.classes_marks=o;case 6:case"end":return l.stop()}}),_callee)})))()}},watch:{classes:{immediate:!0,handler:function handler(){this.set_classes_marks()}}}},U=Object(h.a)(T,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"modern-panel modern-panel-s modern-panel-decorated modern-panel-grey-soft"},[r("div",{staticClass:"panel-body"},[r("div",{staticClass:"flex-column gap-standart"},[1===t.classes_teachers.length?r("div",[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color"},[t._v("\n          "+t._s(t.$gettext("Преподаватель"))+"\n        ")]),t._v(" "),r("div",{staticClass:"flex flex-space-between"},[r("div",{staticClass:"text-subtitle text-subtext-color mt-xs"},[t._v("\n            "+t._s(t.classes_teachers[0].teacher.full_name)+"\n          ")]),t._v(" "),r("ClassesTeacherAvatar",{attrs:{classes_teacher:t.classes_teachers[0],size:"32px"}})],1)]):t.classes_teachers.length>1?r("div",[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color"},[t._v("\n          "+t._s(t.$gettext("Преподаватели"))+"\n        ")]),t._v(" "),r("div",{staticClass:"flex gap-sm"},t._l(t.classes_teachers,(function(t){return r("ClassesTeacherAvatar",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.teacher.full_name,expression:"classes_teacher.teacher.full_name"}],key:t.uid,attrs:{classes_teacher:t,size:"32px"}})})),1)]):t._e(),t._v(" "),t.classes_lessons.length>0?r("div",[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color"},[t._v("\n          "+t._s(t.$gettext("Темы"))+"\n        ")]),t._v(" "),t._l(t.classes.classes_lessons,(function(i){return r("div",{key:i.lesson.values.id,staticClass:"text-subtitle text-subtext-color mt-xs"},[t._v("\n          "+t._s(i.lesson.values.name)+"\n        ")])}))],2):t._e(),t._v(" "),t.time_begin&&t.time_end?r("div",[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color"},[t._v("\n          "+t._s(t.$gettext("Время занятия"))+"\n        ")]),t._v(" "),r("div",{staticClass:"text-subtitle text-subtext-color mt-xs"},[t._v("\n          "+t._s(t.time_begin)+" - "+t._s(t.time_end)+"\n        ")])]):t._e(),t._v(" "),0!==t.classes_score?r("div",[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color"},[t._v("\n          "+t._s(t.$gettext("Баллов за занятие"))+"\n        ")]),t._v(" "),r("div",{staticClass:"text-subtitle text-subtext-color mt-xs"},[t._v("\n          "+t._s(t.score)+" "+t._s(t.$gettext("из"))+" "+t._s(t.classes_score)+"\n        ")])]):t._e(),t._v(" "),t.classes_marks.length>0?r("div",[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color"},[t._v("\n          "+t._s(t.$gettext("Оценки"))+"\n        ")]),t._v(" "),r("div",{staticClass:"flex flex-gap-xs mt-xs"},t._l(t.classes_marks,(function(t){return r("ShpMark",{key:t.uid,attrs:{mark:t}})})),1)]):t._e()])])])}),[],!1,null,null,null).exports,z=r(871),I={name:"ClientClassesSidebarTeamPanel",components:{UserAvatar:r(521).a},props:{team:{type:z.a,required:!0}},computed:{teammates:function teammates(){return this.team.teammates},teammates_users:function teammates_users(){return this.teammates.map((function(t){return t.get_user()}))}}},M=Object(h.a)(I,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"modern-panel modern-panel-s modern-panel-decorated modern-panel-grey-soft"},[r("div",{staticClass:"panel-body"},[r("div",{staticClass:"text-overline text-uppercase text-placeholder-color mb-sm"},[t._v("\n      "+t._s(t.$gettext("Команда"))+"\n    ")]),t._v(" "),r("div",{staticClass:"flex-column gap-sm"},t._l(t.teammates_users,(function(i){return r("div",{key:i.uid,staticClass:"flex flex-vertical-center"},[r("UserAvatar",{staticClass:"mr-sm",attrs:{user:i,size:"32px"}}),t._v(" "),r("span",{staticClass:"text-subtitle text-subtext-color"},[t._v("\n          "+t._s(i.initials)+"\n        ")])],1)})),0)])])}),[],!1,null,null,null).exports,B={1:"primary-subpanel",2:"success-soft",3:"error-soft",4:"primary-subpanel",5:"warning-soft",6:"amazing-soft"},Q={1:"primary",2:"success",3:"error",4:"primary",5:"yellow",6:"amazing"},H=r(522),V=r(244),W={name:"UnitProgressLinear",components:{ShpLinearProgress:r(1770).a},props:{color:{type:String,default:"primary"},max_score:{type:Number,required:!0},score:{type:Number,required:!0}},computed:{progress:function progress(){return Math.floor(this.score/this.max_score*100)||0},color_class:function color_class(){return"linear-progress__".concat(this.color)}}},J=Object(h.a)(W,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",[r("ShpLinearProgress",{class:t.color_class,attrs:{progress:t.progress}}),t._v(" "),r("div",{staticClass:"flex flex-space-between flex-vertical-center mt-xs"},[r("div",{staticClass:"text-caption text-subtext-color"},[t._v("\n      "+t._s(t.$gettext("Баллов за блок"))+"\n    ")]),t._v(" "),r("div",{staticClass:"text-caption text-subtext-color"},[t._v("\n      "+t._s(t.score)+"\n      "+t._s(t.$gettext("из"))+"\n      "+t._s(t.max_score)+"\n    ")])])],1)}),[],!1,null,null,null).exports,K={name:"ClientClassesSidebarUnitStatus",components:{RemainDate:r(640).a},props:{unit_timers:{type:V.b,required:!0}}},G={name:"ClientClassesSidebarUnitHeader",components:{UnitProgressLinear:J,ClientClassesSidebarUnitStatus:Object(h.a)(K,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.unit_timers.is_visible?r("div",{staticClass:"text-caption text-subtext-color"},[t.unit_timers.is_infinity?r("span"):t.unit_timers.is_finished?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$options.filters.moment(t.unit_timers.unit_timing.date_till,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.date_till, 'L LT')"}],staticClass:"inline-block"},[t._v("\n    "+t._s(t.$gettext("Завершен"))+"\n  ")]):t.unit_timers.is_solution_ended?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$options.filters.moment(t.unit_timers.unit_timing.date_till,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.date_till, 'L LT')"}],staticClass:"inline-block"},[t._v("\n    "+t._s(t.$gettext("Время на дорешивание"))+":\n    "),r("RemainDate",{staticClass:"text-error",attrs:{value:t.unit_timers.unit_timing.date_till,period:1e3,tag:"span"}})],1):t.unit_timers.is_started?r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$options.filters.moment(t.unit_timers.unit_timing.solution_datetime_till,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.solution_datetime_till, 'L LT')"}],staticClass:"inline-block"},[t._v("\n    "+t._s(t.$gettext("Время до завершения"))+":\n    "),r("RemainDate",{attrs:{value:t.unit_timers.unit_timing.solution_datetime_till,period:1e3,tag:"span"}})],1):r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$options.filters.moment(t.unit_timers.unit_timing.date_from,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.date_from, 'L LT')"}],staticClass:"inline-block"},[t._v("\n    "+t._s(t.$gettext("Начало"))+"\n    "),r("RemainDate",{attrs:{value:t.unit_timers.unit_timing.date_from,period:1e3,tag:"span"}})],1)]):t._e()}),[],!1,null,null,null).exports},props:{unit:{type:S.a,required:!0},unit_detail_links:{type:Object,required:!0},unit_timers:{type:V.b,default:null},unit_score:{type:Number,default:null}},computed:{unit_max_score:function unit_max_score(){return this.unit.get_score()},progress_color:function progress_color(){return Q[this.unit.values.type_id]||"primary"}}},X=Object(h.a)(G,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",[r("RouterLink",{staticClass:"text-button text-black classes-navigation-unit",attrs:{to:t.unit_detail_links.unit_link(t.$route,t.unit,t.unit.values.classes_id),"active-class":"active"}},[t._v("\n    "+t._s(t.unit.values.name)+"\n  ")]),t._v(" "),t.unit_timers?r("ClientClassesSidebarUnitStatus",{attrs:{unit_timers:t.unit_timers}}):t._e(),t._v(" "),t.unit_max_score>0?r("div",{staticClass:"mt-sm"},[r("UnitProgressLinear",{attrs:{color:t.progress_color,score:t.unit_score,max_score:t.unit_max_score}})],1):t._e()],1)}),[],!1,null,null,null).exports,Y=r(2405),Z=r(2406),tt=r(2102),et=r(860),st={name:"ClientClassesSidebarUnitStepContent",components:{RunResultScore:Y.a,TestingAttemptScore:Z.a,ScratchProblemScore:tt.a},props:{unit:{type:S.a,required:!0},step:{type:et.a,required:!0},unit_user:{type:c.a,default:null},unit_detail_links:{type:Object,required:!0},result:{required:!0,type:p.a}},computed:{filtered_step_elements:function filtered_step_elements(){var t=this;return this.step.step_elements.filter((function(i){return!t.is_element_required||t.is_element_required(i)}))}}},nt={name:"ClientClassesSidebarUnitPanel",components:{ClientClassesSidebarUnitHeader:X,ClientClassesSidebarUnitStepContent:Object(h.a)(st,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",[r("RouterLink",{staticClass:"text-overline text-uppercase text-placeholder-color classes-navigation-step",attrs:{to:t.unit_detail_links.step_link(t.$route,t.step,t.unit.values.classes_id),"active-class":"active"}},[t._v("\n    "+t._s(t.step.values.title)+"\n  ")]),t._v(" "),t._l(t.filtered_step_elements,(function(i){return r("RouterLink",{key:i.uid,staticClass:"classes-navigation-step-element",attrs:{to:t.unit_detail_links.step_element_link(t.$route,i,t.unit.values.classes_id),"active-class":"active"}},[r("div",{staticClass:"flex flex-nowrap"},[r("i",{staticClass:"shp_icons-lg text-subtext-color mr-xs flex-no-resizable",class:i.get_modern_icon()}),t._v(" "),r("div",{staticClass:"text-subtitle text-subtext-color"},[t._v("\n        "+t._s(i.get_title())+"\n      ")])]),t._v(" "),t.unit_user?r("div",{staticClass:"text-caption text-placeholder-color flex-no-resizable"},["problem"===i.values.type?r("RunResultScore",{attrs:{run_result:t.result.get_problem_result(i.problem.values.problem_id),problem:i.problem}}):"testing"===i.values.type?r("TestingAttemptScore",{attrs:{attempt:t.result.get_attempt_result(i.testing.values.id),testing:i.testing}}):"scratch"===i.values.type?r("ScratchProblemScore",{attrs:{scratch_problem_results:t.result.get_scratch_problem_result(i.values.scratch_problem_id)}}):t._e()],1):t._e()])}))],2)}),[],!1,null,null,null).exports},props:{unit:{type:S.a,required:!0},unit_detail_links:{type:Object,required:!0},result:{required:!0,type:p.a}},data:function data(){return{unit_timers:null}},created:function created(){this.update_timers()},computed:{panel_color:function panel_color(){return B[this.unit.values.type_id]||"grey"},panel_color_class:function panel_color_class(){return"modern-panel-".concat(this.panel_color)},unit_steps:function unit_steps(){return this.unit.steps},unit_user:function unit_user(){return Object(H.c)(this.$store.state,this.unit.values.id)},unit_timing:function unit_timing(){return this.unit_timers?this.unit_timers.unit_timing:null},unit_score:function unit_score(){return this.unit_timing&&this.unit_timing.is_result_published()&&this.result.score||0},time_to_pass:function time_to_pass(){return this.unit_user&&this.unit_user.values.time_to_pass||this.unit.values.time_to_pass}},watch:{unit:function unit(){this.update_timers()}},methods:{update_timers:function update_timers(){var t=Object(H.b)(this.$store.state,this.unit.values.id);this.unit_timers=new V.b(t).create_timers(this)}}},it=Object(h.a)(nt,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"modern-panel modern-panel-s modern-panel-decorated",class:t.panel_color_class},[r("ClientClassesSidebarUnitHeader",{staticClass:"panel-heading p-sm",attrs:{unit:t.unit,unit_timers:t.unit_timers,unit_score:t.unit_score,unit_detail_links:t.unit_detail_links}}),t._v(" "),r("div",{staticClass:"panel-body"},[t.unit_user&&t.unit_user.values.is_timer_solution&&!t.unit_user.values.is_started&&t.unit_timing.is_finished()?[r("RouterLink",{staticClass:"classes-navigation-step-element",attrs:{to:t.unit_detail_links.unit_link(t.$route,t.unit,t.unit.values.classes_id),"active-class":"active"}},[r("div",{staticClass:"flex flex-nowrap"},[r("i",{staticClass:"shp_icons-time_timer shp_icons-lg text-subtext-color mr-xs flex-no-resizable"}),t._v(" "),r("div",{staticClass:"text-subtitle text-center text-subtext-color"},[t._v("\n            "+t._s(t.$gettext("Блок окончен"))+"\n          ")])])])]:t.unit_user&&t.unit_user.values.is_timer_solution&&!t.unit_user.values.is_started?[r("RouterLink",{staticClass:"classes-navigation-step-element",attrs:{to:t.unit_detail_links.unit_link(t.$route,t.unit,t.unit.values.classes_id),"active-class":"active"}},[r("div",{staticClass:"flex flex-nowrap"},[r("i",{staticClass:"shp_icons-time_timer shp_icons-lg text-subtext-color mr-xs flex-no-resizable"}),t._v(" "),r("div",{staticClass:"text-subtitle text-subtext-color"},[t._v("\n            "+t._s(t.$gettext("Блок с заданиями на время"))+"\n          ")])]),t._v(" "),r("div",{staticClass:"text-caption text-placeholder-color flex-no-resizable"},[t._v("\n          "+t._s(t.time_to_pass)+" "+t._s(t.$gettext("минут"))+"\n        ")])])]:t._l(t.unit_steps,(function(i){return r("ClientClassesSidebarUnitStepContent",{key:i.uid,attrs:{unit:t.unit,step:i,unit_detail_links:t.unit_detail_links,result:t.result,unit_user:t.unit_user}})}))],2)],1)}),[],!1,null,null,null).exports,rt=r(1827),at={name:"ClientClassesSidebarUnits",components:{ClientClassesSidebarUnitPanel:it},props:{units:{type:Array,default:function _default(){return[]},validator:Object(_.a)(S.a)},results:{type:Object,default:function _default(){return{}}}},data:function data(){return{unit_detail_links:rt.c}},methods:{get_result:function get_result(t){return this.results[t]||new p.a(this.$store.state,[])}}},ot={name:"ClientClassesSidebarContent",components:{ClientClassesNavigationDataProvider:g,ClientClassesSidebarArrows:y,ClientClassesSidebarInfoPanel:U,ClientClassesSidebarTeamPanel:M,ClientClassesSidebarUnits:Object(h.a)(at,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"flex-column gap-md"},t._l(t.units,(function(i){return r("div",{key:i.uid},[r("ClientClassesSidebarUnitPanel",{attrs:{result:t.get_result(i.values.id),unit:i,unit_detail_links:t.unit_detail_links}})],1)})),0)}),[],!1,null,null,null).exports},props:{user:{type:a.a,required:!0}},computed:{classes_id:function classes_id(){return this.$route.params.classes_id}}},lt=Object(h.a)(ot,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ClientClassesNavigationDataProvider",{staticClass:"flex-column gap-md",attrs:{classes_id:t.classes_id,user:t.user},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.classes,o=i.classes_team,l=i.results,u=i.units;return[a?r("ClientClassesSidebarArrows",{attrs:{classes:a}}):t._e(),t._v(" "),a?r("ClientClassesSidebarInfoPanel",{attrs:{classes:a,units:u,results:l}}):t._e(),t._v(" "),o?r("ClientClassesSidebarTeamPanel",{attrs:{team:o.team}}):t._e(),t._v(" "),a?r("ClientClassesSidebarUnits",{attrs:{units:u,results:l}}):t._e()]}}])})}),[],!1,null,null,null).exports,ut=r(2196),ct={name:"ClientClassesNavigationModal",components:{ClientClassesSidebarContent:lt},props:{append_to_body:{type:Boolean,default:!0},user:{type:a.a,required:!0}},data:function data(){return{is_open:!0}},methods:{close:function close(){this.$emit("close")}}},_t={name:"ClientClassesNavigationFooter",components:{ClientClassesNavigationModal:Object(h.a)(ct,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("modal",{staticClass:"modern-page mobile-navigation-modal full-height",attrs:{"append-to-body":t.append_to_body,header:!1},on:{show:function(i){return t.$emit("show")},hide:t.close},model:{value:t.is_open,callback:function(i){t.is_open=i},expression:"is_open"}},[r("ClientClassesSidebarContent",{staticClass:"classes_navigation_sidebar modern-page",attrs:{user:t.user}}),t._v(" "),r("div",{staticClass:"flex flex-vertical-center flex-center",attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn-modern btn-modern-link-grey full-width",on:{click:t.close}},[r("i",{staticClass:"shp_icons-action_close mr-sm"}),t._v("\n      "+t._s(t.$gettext("Закрыть"))+"\n    ")])])],1)}),[],!1,null,null,null).exports},props:{user:{type:a.a,required:!0}},data:function data(){return{is_modal_open:!1}},methods:{toggle_modal:function toggle_modal(){this.is_modal_open=!this.is_modal_open}},watch:{$route:function $route(){this.is_modal_open=!1}}},pt=Object(h.a)(_t,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"classes_navigation_footer"},[r("button",{staticClass:"btn-modern btn-modern-link-grey full-width",on:{click:t.toggle_modal}},[r("i",{staticClass:"shp_icons-menu mr-sm"}),t._v("\n    "+t._s(t.$gettext("План занятия"))+"\n  ")]),t._v(" "),t.is_modal_open?r("ClientClassesNavigationModal",{attrs:{user:t.user},on:{close:function(i){t.is_modal_open=!1}}}):t._e()],1)}),[],!1,null,null,null).exports,dt=r(542),mt={name:"ClassesNavigation",components:{ModernNavigation:o.a,ClientClassesSidebarContent:lt,ClientClassesTopNavbar:ut.a,ClientClassesNavigationFooter:pt},props:{user:{type:a.a,required:!0}},computed:{content_user:function content_user(){if(this.user.values.is_client)return this.user;var t=Object(D.b)(this.$store.state);return Object(dt.b)(this.$store.state,l.a,a.a,t)||this.user}},methods:{}},ft=Object(h.a)(mt,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ModernNavigation",{staticClass:"classes-navigation",attrs:{watch_scroll:"",user:t.user},scopedSlots:t._u([{key:"header",fn:function(i){var a=i.is_lg,o=i.is_md,l=i.is_sidebar_open,u=i.toggle_sidebar;return[r("ClientClassesTopNavbar",{attrs:{user:t.user,is_md:o,is_lg:a,is_sidebar_open:l,toggle_sidebar:u}})]}},{key:"navigation_footer",fn:function(){return[r("ClientClassesNavigationFooter",{attrs:{user:t.user}})]},proxy:!0},{key:"left_sidebar",fn:function(i){var a=i.is_lg,o=i.is_md,l=i.is_sidebar_open;return[a||o?r("ClientClassesSidebarContent",{staticClass:"classes_navigation_sidebar modern-page",class:{"hide-to-left-side":!l},attrs:{user:t.content_user}}):t._e()]}}])},[t._v(" "),t._t("default",null,{slot:"default"})],2)}),[],!1,null,null,null).exports,vt=r(1691),ht=r(2032),gt=r(206),bt={name:"ClientClassesRoot",components:{ClassesNavigation:ft,GlobalErrorWrapper:vt.a,ContentNavigator:ht.a},data:function data(){return{UserData:a.a}},computed:{current_user:function current_user(){return Object(gt.b)(this.$store)}}},yt=Object(h.a)(bt,(function(){var t=this.$createElement,i=this._self._c||t;return i("ClassesNavigation",{attrs:{user:this.current_user}},[i("div",{staticClass:"page-wrapper-client"},[i("GlobalErrorWrapper",[i("ContentNavigator")],1)],1)])}),[],!1,null,null,null);i.default=yt.exports},522:function(t,i,r){"use strict";r.d(i,"b",(function(){return get_unit_timing})),r.d(i,"c",(function(){return get_unit_user})),r.d(i,"a",(function(){return get_problem_contest_counter}));r(70),r(7),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(1617),o=r(374),l=r(48);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==r.return||r.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}function get_unit_timing(t,i){var r;return t.login.user_data.is_pupil&&(r=get_unit_user(t,i))||(r=new o.a(t.models.units[i],t)),r.get_timing()}function get_unit_user(t,i){var r=t.login.user_data;if(t.result.is_preview_mode){var o=t.result.user_id,u=t.models.users[o];r=u&&new l.a(u,t)}if(t.result.is_preview_mode||r.is_client){var c,_=_createForOfIteratorHelper(t.unit_users.ids);try{for(_.s();!(c=_.n()).done;){var p=c.value,d=t.models.unit_users[p];if(d&&d.unit_id===i)return new a.a(d,t)}}catch(t){_.e(t)}finally{_.f()}}}function get_problem_contest_counter(t,i){var r=t.models.problem_contest_counters;return r&&r[i]?r[i].to_check:t.models.problem_contests[i].to_check}},849:function(t,i,r){"use strict";var a={name:"old-fashion-content",props:{content:{type:String}},mounted:function mounted(){window.$(this.$el).run_preparers()}},o=r(3),l=Object(o.a)(a,(function(){var t=this.$createElement;return(this._self._c||t)("div",{domProps:{innerHTML:this._s(this.content)}})}),[],!1,null,null,null);i.a=l.exports},862:function(t,i,r){"use strict";r.d(i,"b",(function(){return A})),r.d(i,"a",(function(){return E}));r(26);var a,o,l,u,c=r(14),_=r.n(c),p=r(15),d=r.n(p),m=r(8),v=r.n(m),h=r(4),g=r.n(h),b=r(5),y=r.n(b),x=r(9),w=r.n(x),C=(r(11),r(7),r(12),r(25),r(43),r(23),r(65),r(28),r(893),r(18)),k=r(887),O=r(1),j=r(17),S=r.n(j),$=r(0);function _createSuper(t){var i=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,a=v()(t);if(i){var o=v()(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return d()(this,r)}}var q=(a=function(){function InputAnswerScoring(t,i,r){g()(this,InputAnswerScoring),this.state=t,this.attempt=i,this.question_input=r,this._is_custom=("custom"===this.question_input.values.widget||"input"===this.question_input.values.widget)&&this.question_input.values.check_answers}return y()(InputAnswerScoring,[{key:"right_answers",get:function get(){var t=this;return this.answers.filter((function(i){return i.variant&&i.variant.values.is_answer&&(i.variant.values.checked_at&&t._is_custom||!t._is_custom)}))}},{key:"wrong_answers",get:function get(){var t=this;return this.answers.filter((function(i){return i.variant&&!i.variant.values.is_answer&&(i.variant.values.checked_at&&t._is_custom||!t._is_custom)}))}},{key:"is_answered",get:function get(){return this.right_answers.length>0}},{key:"is_errors",get:function get(){return this.wrong_answers.length>0||0===this.answers.length}},{key:"is_checked",get:function get(){return this.right_answers.length+this.wrong_answers.length===this.answers.length}},{key:"is_partial",get:function get(){return this.answers.length&!this.right_answers.length&&!this.wrong_answers.length}},{key:"has_answers",get:function get(){return this.answers.length>0}},{key:"answers",get:function get(){var t=this,i=this.state,r=i.models.testing_attempts[this.attempt.values.id].question_answers||[];return(r=r.filter((function(r){return i.models.question_answers[r]&&i.models.question_answers[r].input_id===t.question_input.values.id}))).map((function(t){return new k.a(i.models.question_answers[t],i)}))}},{key:"percent",get:function get(){return this.right_answers.length?1:0}},{key:"score",get:function get(){return this.percent*this.question_input.get_score()}},{key:"background_color",get:function get(){return this.is_checked?this.is_partial?"warning-background":this.is_errors?"error-background":"success-background":"info-background"}}]),InputAnswerScoring}(),w()(a.prototype,"right_answers",[C.a],Object.getOwnPropertyDescriptor(a.prototype,"right_answers"),a.prototype),w()(a.prototype,"wrong_answers",[C.a],Object.getOwnPropertyDescriptor(a.prototype,"wrong_answers"),a.prototype),w()(a.prototype,"answers",[C.a],Object.getOwnPropertyDescriptor(a.prototype,"answers"),a.prototype),w()(a.prototype,"score",[C.a],Object.getOwnPropertyDescriptor(a.prototype,"score"),a.prototype),a),P=(o=function(t){_()(MultipleVariantAnswerScoring,t);var i=_createSuper(MultipleVariantAnswerScoring);function MultipleVariantAnswerScoring(){return g()(this,MultipleVariantAnswerScoring),i.apply(this,arguments)}return y()(MultipleVariantAnswerScoring,[{key:"is_answered",get:function get(){var t=this;return(this.state.models.question_inputs[this.question_input.values.id].question_variants||[]).filter((function(i){return t.state.models.question_variants[i].is_answer})).length===this.right_answers.length&&!this.wrong_answers.length}},{key:"right_variants",get:function get(){return this.question_input.question_variants.filter((function(t){return t.values.is_answer}))}},{key:"is_errors",get:function get(){var t=this.question_input.values.max_errors;return t=t?parseInt(t):0,!this.right_answers.length||this.is_partial&&this.right_variants.length-this.right_answers.length+this.wrong_answers.length>t}},{key:"is_partial",get:function get(){return!this.is_answered&&this.right_answers.length>0}},{key:"percent",get:function get(){if(this.is_errors)return 0;var t=1*this.question_input.question_variants.filter((function(t){return t.values.is_answer})).length;if(this.question_input.question_variants.length===t)return this.right_answers.length/t;var i=t/(t+(this.question_input.question_variants.length-t)),r=t*(1-i);if(r<=0)return 0;var a=(this.right_answers.length*(1-i)-this.wrong_answers.length*i)/r;return Math.max(a,0)}}]),MultipleVariantAnswerScoring}(q),w()(o.prototype,"right_variants",[C.a],Object.getOwnPropertyDescriptor(o.prototype,"right_variants"),o.prototype),w()(o.prototype,"is_errors",[C.a],Object.getOwnPropertyDescriptor(o.prototype,"is_errors"),o.prototype),w()(o.prototype,"percent",[C.a],Object.getOwnPropertyDescriptor(o.prototype,"percent"),o.prototype),o);function get_input_answer_scoring(t,i,r){return"multiple_variant"===r.values.widget?new P(t,i,r):new q(t,i,r)}var N=(l=function(){function QuestionInputScoring(t,i){g()(this,QuestionInputScoring),this.question_scoring=t,this.input_scoring=i}return y()(QuestionInputScoring,[{key:"is_answered",get:function get(){return this.input_scoring.is_answered}},{key:"is_errors",get:function get(){return this.input_scoring.is_errors}},{key:"is_checked",get:function get(){return this.input_scoring.is_checked}},{key:"is_partial",get:function get(){return this.input_scoring.is_partial}},{key:"has_answers",get:function get(){return this.input_scoring.has_answers}},{key:"score",get:function get(){return this.input_scoring.score}}]),QuestionInputScoring}(),w()(l.prototype,"score",[C.a],Object.getOwnPropertyDescriptor(l.prototype,"score"),l.prototype),l),A=(u=function(){function QuestionScoring(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(O.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(O.isRequired)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(O.isRequired)();g()(this,QuestionScoring),this.question=r,this.attempt=i,this.inputs_scoring=r.inputs.map((function(r){return get_input_answer_scoring(t,i,r)}))}return y()(QuestionScoring,[{key:"get_input_scoring",value:function get_input_scoring(t){return this.inputs_scoring.find((function(i){return i.question_input.values.id===t}))}},{key:"get_question_input_scoring",value:function get_question_input_scoring(t){return new N(this,this.get_input_scoring(t))}},{key:"score",get:function get(){var t=0;return this.question.values.max_errors<this.errors_amount?0:(this.inputs_scoring.forEach((function(i){t+=i.score})),t)}},{key:"errors_amount",get:function get(){return this.inputs_scoring.filter((function(t){return 0!==t.wrong_answers.length})).length}},{key:"is_checked",value:function is_checked(){var t=!0;return this.inputs_scoring.forEach((function(i){t&=i.is_checked})),t}},{key:"show_wrong_answers",get:function get(){return!(!this.attempt||!this.attempt.is_result_published())&&(this.attempt.testing&&this.attempt.testing.values.show_wrong_answers)}},{key:"is_partial",value:function is_partial(){return this.is_errors()&&this.is_have_result()}},{key:"is_have_result",value:function is_have_result(){var t=!1;return this.inputs_scoring.forEach((function(i){t|=i.is_partial})),t|=Boolean(this.inputs_scoring.find((function(t){return t.is_errors}))&&this.inputs_scoring.find((function(t){return!t.is_errors})))}},{key:"is_errors",value:function is_errors(){var t=!1;return this.inputs_scoring.forEach((function(i){t|=i.is_partial})),t|=Boolean(this.inputs_scoring.find((function(t){return t.is_errors})))}},{key:"has_answers",value:function has_answers(){var t=!1;return this.inputs_scoring.forEach((function(i){t|=i.has_answers})),t}},{key:"background_color",get:function get(){return this.has_answers()?this.is_checked()?this.is_partial()?"warning-background":this.is_errors()?"error-background":"success-background":"info-background":""}},{key:"get_label_color",value:function get_label_color(){return this.has_answers()?this.is_checked()?this.is_partial()?"label-warning":this.is_errors()?"label-danger":"label-success":"label-info":""}},{key:"score_text",value:function score_text(t){if(!(t||this.attempt.is_finished&&this.attempt.values.is_last))return Object($.$gettext)("? баллов");var i=S.a.prototype.$ngettext("балл","балла",Math.trunc(this.score));return this.score.pretty_format(2)+" "+i}}]),QuestionScoring}(),w()(u.prototype,"score",[C.a],Object.getOwnPropertyDescriptor(u.prototype,"score"),u.prototype),w()(u.prototype,"errors_amount",[C.a],Object.getOwnPropertyDescriptor(u.prototype,"errors_amount"),u.prototype),u),E=function(){function AttemptScoring(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(O.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(O.isRequired)();g()(this,AttemptScoring),this.state=t,this.attempt=i,this._cache={}}return y()(AttemptScoring,[{key:"get_question_scoring",value:function get_question_scoring(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(O.isRequired)(),i=t.values.id;return this._cache.hasOwnProperty(i)||(this._cache[i]=new A(this.state,this.attempt,t)),this._cache[i]}}]),AttemptScoring}()}}]);
//# sourceMappingURL=60.60.08aab52193ee8bc7ebbe.js.map