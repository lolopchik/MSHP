(window.webpackJsonp=window.webpackJsonp||[]).push([[6,365],{2297:function(s,e,t){},2440:function(s,e,t){"use strict";t(2297)},326:function(s,e,t){"use strict";t.d(e,"a",(function(){return get_current_pupil})),t.d(e,"b",(function(){return get_current_user_id}));t(11),t(7),t(12);var i=t(1),r=t(172);function get_current_pupil(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(i.isRequired)();if(s.login.representative_pupil_id&&s.models.pupils){var e=s.models.pupils[s.login.representative_pupil_id];if(e)return new r.a(e,s)}var t=s.login.user_data.user_id;if(s.models.users&&s.models.users[t]){var n=s.models.users[t].pupil;return s.models.pupils[n]&&new r.a(s.models.pupils[n],s)}}function get_current_user_id(s){if(s.result&&s.result.is_preview_mode)return s.result.user_id;if(s.login.user_data.is_representative){var e=get_current_pupil(s);if(e)return e.values.user_id}return s.login.user_data.id}},389:function(s,e,t){"use strict";t.d(e,"a",(function(){return i}));t(65),t(7),t(167),t(272);var i=new(t(35).a)("discussions",{namespaced:!0,actions:{},mutations:{set_unread:function set_unread(s,e){s.unread=e},add_unread:function add_unread(s,e){s.unread.find((function(s){return s===e}))||s.unread.splice(s.unread.length-1,0,e)},remove_unread:function remove_unread(s,e){var t=s.unread.findIndex((function(s){return s===e}));t<0||s.unread.splice(t,1)}},state:{list:[],comments:{},unread:[]}})},429:function(s,e,t){"use strict";t.d(e,"a",(function(){return u}));var i=t(6),r=t(292),n=t(51),o=new i.a("content_types"),a=new i.a("discussion_labels"),c=new i.a("discussion_users").add_related("user",new i.b(n.a).remove_without_relations()),u=new i.a("discussions").add_related("content_type",new i.b(o).remove_without_relations()).add_related("discussion_labels",new i.b(a).multiple().remove_on_delete()).add_related("discussion_users",new i.b(c).multiple().remove_on_delete()).add_related("comments",new i.b(r.a).multiple().remove_on_delete())},430:function(s,e,t){"use strict";t.d(e,"a",(function(){return p})),t.d(e,"b",(function(){return get_unread_count}));var i=t(4),r=t.n(i),n=t(5),o=t.n(n),a=(t(65),t(7),t(11),t(12),t(153),t(93)),c=t(45),u=t(429),d=t(292),l=t(1),_=t(326),p=function(){function DiscussionSocket(){var s=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(l.isRequired)();r()(this,DiscussionSocket),this.centrifuge=t,this.discussion_callbacks={subscribe:function subscribe(s){0},error:function error(s){0},publish:function publish(e){s.handle_message(e.data)}},this.subscriptions={},this.$store=e}return o()(DiscussionSocket,[{key:"handle_message",value:function handle_message(s){var e;var t=this.$store;if("discussion_update"===s.message_type&&"problemcontest"!==(null===(e=s.data)||void 0===e||null===(e=e.content_type)||void 0===e?void 0:e.model)){var i=t.state.login.user_data.is_client,r=t.state.login.user_data.id,n=i?function(s){return s.is_client}:function(s){return s.user.id===r},o=s.data.discussion_users.find(n);o&&o.need_read?t.commit("discussions/add_unread",s.data.id):o&&!o.need_read&&t.commit("discussions/remove_unread",s.data.id)}if(t.state.models.discussions)if("discussion_update"===s.message_type){if(t.state.models.discussions[s.data.id]){var l=Object(a.a)([s.data],[u.a.normalizr_entity]);(new c.d).insert_list(this.$store,u.a,l)}}else if("comment_create"===s.message_type||"comment_update"===s.message_type){var _=Object(a.a)([s.data],[d.b.normalizr_entity]);(new c.d).insert_list(this.$store,d.b,_)}else"comment_delete"===s.message_type&&new c.a([s.data.id],d.b).force().collect(this.$store)}},{key:"add_discussion",value:function add_discussion(s){if(!this.$store.state.login.user_data.is_client){var e="$discussions_admin:".concat(s);this.subscriptions[s]=this.centrifuge.subscribe(e,this.discussion_callbacks)}}},{key:"remove_discussion",value:function remove_discussion(s){this.subscriptions[s]&&(this.subscriptions[s].unsubscribe(),this.subscriptions[s]=null)}},{key:"subscribe_to_global_discussions",value:function subscribe_to_global_discussions(s){var e="discussions#".concat(s.state.login.user_data.id);if(s.state.login.user_data.is_representative){var t=Object(_.a)(s.state);t&&(e="$discussions:".concat(t.values.user_id))}this.centrifuge.subscribe(e,this.discussion_callbacks)}},{key:"destroy",value:function destroy(){for(var s=0,e=Object.values(this.subscriptions);s<e.length;s++){e[s].unsubscribe()}this.subscriptions={}}}]),DiscussionSocket}();function get_unread_count(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.isRequired)();return s.discussions&&s.discussions.unread?s.discussions.unread.length:0}},879:function(s,e,t){"use strict";t.r(e);t(33),t(36),t(25),t(7),t(23),t(28),t(38);var i=t(13),r=t.n(i),n=t(80),o=t(1904),a=t(429),c=(t(68),t(43),t(31),t(1630)),u=t(89),d=t(45),l=(t(11),t(12),t(41),t(121)),_=t(110),p=t(63),f=t(469),m=t(144),h=t(22),v=t(21),b=t(2370),g=t(133),w={components:{FormField:m.a,FieldOnlyWrapper:f.a,AlertError:p.a},name:"discussion-create",props:{object_id:{required:!0},model:{required:!0},list:{required:!0}},data:function data(){var s=this;Object(g.a)(this.$store,"discussion:create","");var e={object_id:this.$store.state.login.user_data.id,object_type:"user"},t=Object(b.a)("comment_create",this.model,this.object_id);return{message_key:"discussion:create",formEngine:new l.a(this,"comment_create").with_fields([new _.a("message").use_component_name("fieldMavon").add_options({img_params:e}).set_focus()]).on_change((function(e,t){"message"===t&&Object(g.c)(s.$store,"discussion:create",e)})),form_model:{message:this.$store.state.persistent.values["discussion:create"],object_id:this.object_id,object_type:this.model,user:"",classes:this.$route.params.classes_id},user_data:this.$store.state.login.user_data,form:t,update_key:0}},methods:{create:function create(){var s=this;new v.a(h.b["api:discussion_create_api"](),this.formEngine.name).single().on_success(v.c.update_instance(a.a)).on_success((function(e,t){s.list.push_id(e,t.data.id),Object(g.c)(e,s.message_key,""),s.form_model.message=""})).on_success((function(){return s.update_key++})).on_success((function(){s.$emit("uploaded")})).on_before(v.c.hide_errors(this.formEngine.name)).parse_errors(this.formEngine).execute(this.$store,this.form_model)},on_user_select:function on_user_select(s){this.form_model.user=s.id}}},$=t(3),y=Object($.a)(w,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[s._l(s.formEngine.fields,(function(e){return[t("FieldOnlyWrapper",{key:e.name,attrs:{field:e,model:s.form_model,formEngine:s.formEngine}},[t("FormField",{key:s.update_key,attrs:{field:e,model:s.form_model,formEngine:s.formEngine}})],1)]})),s._v(" "),t("AlertError",{staticClass:"clearfix",attrs:{uid:s.formEngine.name}}),s._v(" "),t("div",{staticClass:"shp-form-inline"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"btn btn-success",on:{click:s.create}},[s._v(s._s(s.$gettext("Отправить")))])]),s._v(" "),s.user_data.is_client||"run"===s.model?s._e():t("div",{staticClass:"form-group"},[t("FormulateInput",s._b({attrs:{"element-class":"shp-input-xlg"},model:{value:s.form_model.user,callback:function(e){s.$set(s.form_model,"user",e)},expression:"form_model.user"}},"FormulateInput",s.form.get_props("user"),!1))],1)])],2)}),[],!1,null,null,null).exports,k=t(1647),j=t(464),C=t.n(j),x=t(2356),q=t(2393),O=t(19),F=t.n(O),D=t(521),S={components:{DiscussionLabels:q.a,DiscussionRespondents:x.a,PrettyCheckbox:C.a,UserAvatar:D.a},name:"discussion-row",props:{checked_rows:{required:!0,type:u.b},discussion:{required:!0,type:c.a},object_id:{required:!1},for_user:{required:!1}},data:function data(){return{user_data:this.$store.state.login.user_data,moment:F.a}},computed:{discussion_badge_class:function discussion_badge_class(){return this.for_user?this.discussion.get_badge_class_for_teacher(this.for_user):this.discussion.badge_class}},methods:{open_discussion:function open_discussion(s){this.$route.params.discussion_id!=s&&this.$router.push({name:"discussion_detail",params:{discussion_id:s}})}}},E={name:"discussion-list",components:{DiscussionRow:Object($.a)(S,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"discus-row",class:{"discussion-row__active":s.$route.params.discussion_id==s.discussion.values.id}},[s.user_data.is_client||s.$store.state.discussions.is_readonly?s._e():t("div",{staticClass:"discus-row__checkbox-column"},[t("pretty-checkbox",{key:s.discussion.values.id,attrs:{color:"success",checked:s.checked_rows.opened[s.discussion.values.id]},on:{change:function(e){return s.checked_rows.toggle(s.discussion.values.id,e)}}})],1),s._v(" "),t("div",{staticClass:"flex flex-vertical-center full-width clickable",on:{click:function(e){return s.open_discussion(s.discussion.values.id)}}},[s.discussion.client?t("div",{staticClass:"discus-row__pupil-column flex flex-vertical-center"},[t("div",{staticClass:"relative"},[s.discussion.client?t("user-avatar",{staticClass:"mr-sm",attrs:{user:s.discussion.client.user,width:"40px",height:"40px"}}):s._e(),s._v(" "),t("div",{staticClass:"discus-userinfo__label badge",class:s.discussion_badge_class},[s._v(s._s(s.discussion.values.answers))])],1),s._v("\n      "+s._s(s.discussion.client.user.short_initials)+"\n    ")]):t("div",[s._v("\n      "+s._s(s.$gettext("Неизвестный пользователь"))+"\n    ")]),s._v(" "),s.$route.params.discussion_id?s._e():[t("div",{staticClass:"discus-row__teacher-column"},[t("discussion-respondents",{attrs:{discussion:s.discussion}})],1),s._v(" "),t("div",{staticClass:"discus-row__question-column"},[t("div",{staticClass:"full-width to-top flex-1000"},[t("span",{staticClass:"bold"},[s._v(s._s(s.discussion.values.related_text))]),s._v(" "),s.object_id?s._e():t("a",{staticClass:"text-info",attrs:{href:s.discussion.user_link,target:"_blank"}},[t("i",{staticClass:"icon-link"})]),s._v(" -\n          "),t("span",[s._v(s._s(s.discussion.values.preview))])]),s._v(" "),t("div",{staticClass:"pull-right"},[t("discussion-labels",{attrs:{discussion:s.discussion}})],1)]),s._v(" "),t("div",{staticClass:"discus-row__date-column"},[s._v("\n        "+s._s(s._f("moment")(s.discussion.values.commented_at,"calendar"))+"\n      ")])]],2)])}),[],!1,null,null,null).exports,RowChecker:k.a},props:{checked_rows:{required:!0,type:u.b},list_data:{required:!0},batch_operator:{required:!0,type:o.a},object_id:{required:!1},for_user:{required:!1}},data:function data(){return{user_data:this.$store.state.login.user_data}},computed:{disabled:function disabled(){return!this.checked_rows.is_opened}}},L=Object($.a)(E,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"discus-list inline-block full-width"},[t("div",{staticClass:"discus-header font-bold"},[s.$store.state.discussions.is_readonly?s._e():t("div",{staticClass:"discus-header__checkbox-column"},[s.user_data.is_client||s.$store.state.discussions.is_readonly?s._e():t("row-checker",{attrs:{checked_rows:s.checked_rows}}),s._v(" "),s.user_data.is_client||s.$store.state.discussions.is_readonly?s._e():t("dropdown",{ref:"dropdown",staticClass:"pointer-events-toggled-dropdown",attrs:{tag:"span"}},[t("btn",{staticClass:"btn-xs"},[t("i",{staticClass:"icon icon-pencil"}),s._v(" "),t("span",{staticClass:"caret"})]),s._v(" "),t("template",{staticClass:"pull-right",slot:"dropdown"},[t("li",{class:{disabled:s.disabled},on:{click:function(e){return s.batch_operator.open()}}},[t("a",[s._v(s._s(s.$gettext("Открыть")))])]),s._v(" "),t("li",{class:{disabled:s.disabled},on:{click:function(e){return s.batch_operator.close()}}},[t("a",[s._v(s._s(s.$gettext("Закрыть")))])]),s._v(" "),t("li",{class:{disabled:s.disabled},on:{click:function(e){return s.batch_operator.privatize()}}},[t("a",[s._v(s._s(s.$gettext("Забрать себе")))])]),s._v(" "),t("li",{class:{disabled:s.disabled},on:{click:function(e){return s.batch_operator.deprivatize()}}},[t("a",[s._v(s._s(s.$gettext("Сделать общим")))])])])],2)],1),s._v(" "),t("div",{staticClass:"discus-row__pupil-column"},[s._v(s._s(s.$gettext("Ученик")))]),s._v(" "),s.$route.params.discussion_id?s._e():[t("div",{staticClass:"discus-row__teacher-column"},[s._v(s._s(s.$gettext("Преподаватели")))]),s._v(" "),t("div",{staticClass:"discus-header__question-column"},[s._v(s._s(s.$gettext("Вопрос")))]),s._v(" "),t("div",{staticClass:"discus-row__date-column"},[s._v(s._s(s.$gettext("Последний ответ")))])]],2),s._v(" "),s._l(s.list_data,(function(e){return t("discussion-row",{key:e.id,attrs:{discussion:e,checked_rows:s.checked_rows,object_id:s.object_id,for_user:s.for_user}})}))],2)}),[],!1,null,null,null).exports,P={name:"client-discussion-list",components:{UserAvatar:D.a},props:{list_data:{required:!0},object_id:{required:!1}},data:function data(){return{user_data:this.$store.state.login.user_data}},methods:{open_discussion:function open_discussion(s){this.$route.params.discussion_id!=s&&this.$router.push({name:"discussion_detail",params:{discussion_id:s}})}}},R=Object($.a)(P,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"discus-list"},[t("div",{staticClass:"discus-header font-bold"},[t("div",{staticClass:"flex-1000"},[s._v(s._s(s.$gettext("Вопрос")))]),s._v(" "),s.$route.params.discussion_id?s._e():t("div",{staticClass:"discus-row__date-column"},[s._v(s._s(s.$gettext("Последний ответ")))])]),s._v(" "),s._l(s.list_data,(function(e){return[t("div",{key:e.uid,staticClass:"client-discus-row clickable",class:{"discussion-row__active":s.$route.params.discussion_id==e.values.id},on:{click:function(t){return s.open_discussion(e.values.id)}}},[e.active_respondent?t("user-avatar",{staticClass:"mr-sm",attrs:{user:e.active_respondent,width:"36px",height:"36px"}}):s._e(),s._v(" "),t("div",{staticClass:"mr-sm inline-block",staticStyle:{"min-width":"45px"}},["question"===e.values.reason?t("span",[t("i",{staticClass:"icon-arrow-left"})]):t("span",[t("i",{staticClass:"icon-arrow-right"})]),s._v(" "),t("div",{staticClass:"badge",class:e.badge_class},[s._v(s._s(e.values.answers||"0"))])]),s._v(" "),t("div",{staticClass:"inline-block to-top client-discus-row__question"},[t("span",{staticClass:"bold"},[s._v(s._s(e.values.related_text)+" "),s.object_id?s._e():t("a",{staticClass:"text-info",attrs:{href:e.user_link,target:"_blank"}},[t("i",{staticClass:"icon-link"})])]),s._v(" "),t("span",[s._v(s._s(e.values.preview))])]),s._v(" "),s.$route.params.discussion_id?s._e():t("div",{staticClass:"discus-row__date-column"},[s._v(s._s(s._f("moment")(e.values.commented_at,"HH:mm DD.MM.YYYY")))])],1)]}))],2)}),[],!1,null,null,null).exports,A=t(430),H=t(97),U=t(1732),z=t(381),Y=t(326),I={name:"discussion-list-root",components:{ShpAside:U.a,ClientDiscussionList:R,DiscussionList:L,DiscussionCreate:y},props:{list:{required:!0,type:H.a},object_id:{required:!1},model:{required:!1},for_user:{required:!1}},data:function data(){var s=this;new o.e(this.$store).for_user(this.$store,this.for_user||Object(Y.b)(this.$store.state));var e=this.object_id?"instance":"all",t=new u.b("discussions_list_checked"+e).clear_on_page_change(this.list).use_possible((function(){return s.list.ids})),i=this.$store.state.login.user_data,r=new A.a(this.$store,Object(z.a)(this.$store.state));return this.$store.state.login.user_data.is_teacher&&r.subscribe_to_global_discussions(this.$store),{user_data:i,socket:r,checked_rows:t}},mounted:function mounted(){(new o.f).update(this.$store)},computed:{is_custom_discussion:function is_custom_discussion(){var s=Number(this.$route.params.discussion_id);return this.$route.params.discussion_id&&this.list.ids.indexOf(s)<0},list_data:function list_data(){var s=[];if(this.is_custom_discussion){if(!this.$store.state.models.discussions||!this.$store.state.models.discussions[this.$route.params.discussion_id])return[];s=[this.$route.params.discussion_id]}var e=this.$store.state;return s.concat(this.list.ids).map((function(s){return new c.a(e.models.discussions[s],e)}))},batch_operator:function batch_operator(){return new o.a(this.$store,this.checked_rows,this.list_data)}},methods:{kill:function kill(s){new d.a([s],a.a).force().collect(this.$store)}},watch:{"$route.params.discussion_id":function $routeParamsDiscussion_id(s,e){e&&this.socket.remove_discussion(e),s&&this.socket.add_discussion(s)}},created:function created(){this.$route.params.discussion_id&&this.socket.add_discussion(this.$route.params.discussion_id)},beforeDestroy:function beforeDestroy(){this.list.destroy(this.$store)}},K=Object($.a)(I,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("div",{staticClass:"flex flex-wrap flex-no-stretch"},[t("shp-aside",{staticClass:"discussion__list__container",class:{"discussion__list__container-detailed":s.$route.params.discussion_id},attrs:{is_enabled:Boolean(s.$route.params.discussion_id),fix_height:!1}},[s.user_data.is_client?[s.list_data.length?t("client-discussion-list",{style:{width:s.$route.params.discussion_id?"275px":"100%"},attrs:{list_data:s.list_data,object_id:s.object_id}}):s._e()]:[s.list_data.length?t("discussion-list",{attrs:{list_data:s.list_data,checked_rows:s.checked_rows,for_user:s.for_user,batch_operator:s.batch_operator,object_id:s.object_id}}):s._e()]],2),s._v(" "),t("router-view",{staticClass:"inline-block ml discussion__detail",attrs:{discussion_list:s.list_data,for_user:s.for_user}})],1),s._v(" "),s.list_data.length||!s.list.initiated||s.object_id?s._e():t("div",{staticClass:"bs-callout bs-callout-info no-top full-width"},[t("span",{staticClass:"h4"},[s._v(s._s(s.$gettext("Вопросов нет. Вопросы можно задавать к учебным материалам на странице занятия.")))])]),s._v(" "),s.object_id?t("discussion-create",{staticClass:"m-t full-width",attrs:{object_id:s.object_id,model:s.model,list:s.list}}):s._e()],1)}),[],!1,null,null,null).exports,M=t(4),J=t.n(M),W=t(5),B=t.n(W),N=t(39),G=t(24),Q=t(131),T=t(1801),V=t(154),X=t(0);!function(){function DiscussionFiltersUpateHandler(s){J()(this,DiscussionFiltersUpateHandler),this.component=s,this.state=s.$store.state}B()(DiscussionFiltersUpateHandler,[{key:"on_change",value:function on_change(s,e){var t=this.component.$route.params.discussion_id;if(t){if(s.query!==e.query)if(new c.a(this.state.models.discussions[t],this.state).is_have_label(s.query)||!s.query)return;this.component.$router.push({name:"discussion_list"}).catch((function(){}))}}}])}();var Z=t(209),ss={name:"discussion-list-filters",components:{ShpFilterString:t(840).a,ShpFilterFormField:Z.a},props:{form:{required:!0,type:N.a},for_user:{required:!1}},data:function data(){return{user_data:this.$store.state.login.user_data}},computed:{direction_options:function direction_options(){return[{value:"income",label:this.$gettext("Входящие")},{value:"outcome",label:this.$gettext("Исходящие")}]}}},es=(t(2440),Object($.a)(ss,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"shp-form-inline"},[t("div",{staticClass:"flex-1"},[s.form.has_field("direction")?t("ShpFilterFormField",s._b({attrs:{form:s.form,options:s.direction_options}},"ShpFilterFormField",s.form.get_props("direction"),!1)):s._e()],1),s._v(" "),s.form.has_field("show_all")?t("ShpFilterFormField",s._b({staticClass:"form-group",attrs:{form:s.form}},"ShpFilterFormField",s.form.get_props("show_all"),!1)):s._e(),s._v(" "),s.form.has_field("status")?t("ShpFilterFormField",s._b({staticClass:"form-group",attrs:{form:s.form}},"ShpFilterFormField",s.form.get_props("status"),!1)):s._e(),s._v(" "),t("ShpFilterString",{staticClass:"form-group",attrs:{apply_btn:!0,clear_btn:!0,group:s.form.uid,name:"query"}})],1)}),[],!1,null,null,null).exports),ts=t(648);function ownKeys(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),t.push.apply(t,i)}return t}function _objectSpread(s){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach((function(e){r()(s,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(t,e))}))}return s}var is={name:"DiscussionListFetcher",components:{DiscussionListFilters:es,DiscussionListRoot:K,ListFetcher:n.a},props:{object_id:{required:!1},model:{required:!1},for_user:{required:!1},extra_filter:{required:!1,type:Object}},data:function data(){new o.e(this.$store).for_user(this.$store,this.for_user||Object(Y.b)(this.$store.state));var s=this.object_id?"instance":"all";s="DiscussionList:filters:"+s,s="discussions:filters";var e=this.$store.state.login.user_data.id;return{form:this.$store.state.login.user_data.is_client||this.object_id?function get_discussion_light_filters(s,e){var t=new N.a(e,[new G.a("query","").text_input()]);return new V.a(t).create(s,["query"]),t}(this.$store,s,this.for_user):function get_discussion_filters(s,e,t,i){var r=new N.a(e,[new G.a("query","").text_input(),new G.a("status","").select().choices(T.b),new G.a("direction","").select().choices(T.a),new G.a("show_all",Object(X.$gettext)("только мои вопросы")).checkbox()]);return new Q.a("status","select").immediate().persistent().default("need_read").adapter((function(s,e){"need_read"===e.value&&(s.status="open",s.discussionuser__need_read=!0),"only_opened"===e.value&&(s.status="open")})).add(s,e),new Q.a("direction","select").immediate().persistent().default("income").adapter((function(s,e){s.discussionuser__is_ask="income"!==e.value})).on_change((function(){i&&i.app.$route.params.discussion_id&&i.push({name:"discussion_list"})})).add(s,e),new Q.a("show_all","boolean").immediate().persistent().default(!0).adapter((function(s,e){e.value&&(s.discussionuser__is_current=!0,s.for_user=t)})).add(s,e),new V.a(r).create(s,["query"]),r}(this.$store,s,this.for_user||e,this.$router),discussion_model:a.a}},computed:{filters:function filters(){return this.$store.state.shp_filters[this.form.uid]},query_filters:function query_filters(){var s={};return this.extra_filter&&(s=_objectSpread({},this.extra_filter)),this.object_id&&(s.object_id=this.object_id),this.model&&(s.content_type__model=this.model),this.for_user&&(s.for_user=this.for_user),Object(ts.isEmpty)(this.$route.query)||(s=_objectSpread(_objectSpread({},s),this.$route.query)),[{applied:this.filters.result},{applied:s}]}}},rs=Object($.a)(is,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("DiscussionListFilters",{staticClass:"full-width",attrs:{form:s.form}}),s._v(" "),s.filters.iteration>0?t("ListFetcher",{attrs:{url:"api:discussion_list_api",limit:"10",use_default_paginator:!s.object_id,model:s.discussion_model,filters:s.query_filters},scopedSlots:s._u([{key:"default",fn:function(e){var i=e.list;return[t("DiscussionListRoot",{attrs:{list:i,object_id:s.object_id,filters:s.filters,model:s.model,for_user:s.for_user}})]}}],null,!1,1524332835)}):s._e()],1)}),[],!1,null,null,null);e.default=rs.exports}}]);
//# sourceMappingURL=6.6.be461523d31e7381e865.js.map