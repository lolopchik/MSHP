(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{1004:function(t,s,i){"use strict";i.r(s);i(53),i(96),i(11),i(7),i(12),i(25),i(105),i(43);var e=i(374),n=i(1834),a=i(2222),u=i(2221),r=i(522),o=i(27),_=i(2058),l={name:"client-unit-content",components:{ClientUnitTimerBanner:a.a,UserNavigationButtons:u.a},props:{unit:e.a,unit_navigator:n.b},computed:{navigation_steps:function navigation_steps(){return new _.b(this.$store.state,this.$route.params.classes_id).get_steps()},unit_user:function unit_user(){return Object(r.c)(this.$store.state,this.unit.values.id)},units:function units(){var t=this;return this.unit_navigator&&this.unit_navigator.units_ids.map((function(s){return new e.a(t.$store.state.models.units[s],t.$store.state)})).sort((function(t,s){return t.values.number-s.values.number})).filter((function(t){return!t.values.private&&t.is_started}))},steps:function steps(){return Object(o.k)(this.units.filter((function(t){return t})),(function(t){return t.steps}))},unit_timing:function unit_timing(){return Object(r.b)(this.$store.state,this.unit.values.id)}},created:function created(){this.unit_user&&this.unit_user.values.is_timer_solution&&!this.unit_user.values.is_started||this.navigate()},methods:{navigate:function navigate(){this.unit.steps&&this.unit.steps.length&&this.unit_navigator.to_step_content_root(this.$router,{step_id:this.unit.steps[0].values.id})}}},c=i(3),h={name:"ClientUnitContentRoot",components:{ClientUnitContent:Object(c.a)(l,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[t.unit.steps.length?i("h3",{staticClass:"bold"},[t._v(t._s(t.unit&&t.unit.values.name))]):t.steps.length&&!t.unit.steps.length?i("div",{staticClass:"bs-callout bs-callout-danger no-top"},[i("div",{staticClass:"cell full-width"},[i("span",{staticClass:"h4"},[t._v("\n        "+t._s(t.$gettext("В этом блоке нет шагов"))+"\n      ")]),t._v(" "),t._t("default")],2)]):t.steps.length||t.unit.steps.length?t._e():i("div",{staticClass:"bs-callout bs-callout-info no-top"},[i("div",{staticClass:"cell full-width"},[i("span",{staticClass:"h4"},[t._v("\n        "+t._s(t.$gettext("В этом занятии сейчас нет учебных материалов"))+"\n      ")]),t._v(" "),t._t("default")],2)]),t._v(" "),t.unit_user&&t.unit_user.is_show_timer?i("div",[i("ClientUnitTimerBanner",{attrs:{unit_user:t.unit_user,unit_timing:t.unit_timing,unit_navigator:t.unit_navigator}}),t._v(" "),i("UserNavigationButtons",{attrs:{steps:t.navigation_steps,current_step_id:"unit_id:"+t.$route.params.unit_id}})],1):t._e()])}),[],!1,null,null,null).exports},data:function data(){return{unit_navigator:new n.b(+this.$route.params.classes_id,this.$store.state)}},computed:{unit_id:function unit_id(){return this.$route.params.unit_id},unit:function unit(){var t=this.unit_id&&this.$store.state.models.units[this.unit_id];return t&&new e.a(t,this.$store.state)}},created:function created(){if(!(this.$route.params.unit_id&&this.$store.state.models.units[this.$route.params.unit_id]))return this.$router.replace({name:"classes_unit_content"})}},d=Object(c.a)(h,(function(){var t=this.$createElement,s=this._self._c||t;return this.unit&&this.unit_navigator?s("ClientUnitContent",{key:this.$route.params.unit_id,attrs:{unit:this.unit,unit_navigator:this.unit_navigator}}):this._e()}),[],!1,null,null,null);s.default=d.exports},1834:function(t,s,i){"use strict";i.d(s,"b",(function(){return l})),i.d(s,"a",(function(){return c}));var e=i(4),n=i.n(e),a=i(5),u=i.n(a),r=(i(11),i(7),i(12),i(153),i(105),i(25),i(43),i(53),i(96),i(374)),o=i(268),_=i(132),l=function(){function UnitNavigator(t,s){var i;n()(this,UnitNavigator),this.classes_id=t,this.state=s,this.prefix=this.state.result.is_preview_mode?"results_":"",this.is_client=!!this.state.result.is_preview_mode||this.state.login.user_data.is_client,this.classes=this.state.models.classes&&this.state.models.classes[t]&&new o.a(this.state.models.classes[t],this.state),this.course_id=null===(i=this.classes)||void 0===i?void 0:i.values.course_id,this.is_abstract=this.classes&&"A"===this.classes.course.values.usage,this.is_abstract&&(this.prefix="abstract_"+this.prefix)}return u()(UnitNavigator,[{key:"units_ids",get:function get(){var t=this,s=[],i=this.state.models.units&&Object.values(this.state.models.units);return i&&(i.sort((function(t,s){return t.number-s.number})),this.prefix&&!this.is_abstract&&(i=i.filter((function(t){return!1===t.private}))),i.map((function(i){String(i.classes_id)===String(t.classes_id)&&s.push(i.id)}))),s}},{key:"route",value:function route(t){var s=this.units_ids;if(s.length){var i={unit_id:s[0],classes_id:this.classes_id};this.is_abstract&&this.course_id&&(i.course_id=this.course_id),t.replace({name:this.prefix+"unit_content",params:i})}else this.is_client||(this.is_abstract?t.replace({name:this.prefix+"classes_lessons_add_theme"}):t.replace({name:this.prefix+"classes_lessons"}))}},{key:"next",value:function next(t){var s=this.units_ids;if(s.length){var i={unit_id:s[0]};t({name:this.prefix+"unit_content",params:i})}else this.is_client||(this.is_abstract?t({name:this.prefix+"classes_lessons_add_theme"}):t({name:this.prefix+"classes_lessons"}))}},{key:"get_link",value:function get_link(){var t=this.units_ids;if(t.length){var s={unit_id:t[0]};return{name:this.prefix+"unit_content",params:s}}return this.is_client?{name:this.prefix+"classes_content"}:this.is_abstract?{name:this.prefix+"classes_lessons_add_theme"}:{name:this.prefix+"classes_lessons"}}},{key:"to_step_content_root",value:function to_step_content_root(t,s){t.replace({name:this.prefix+"step_content_root",params:s})}},{key:"to_unit_content",value:function to_unit_content(t,s){t.push({name:this.prefix+"unit_content",params:s})}}]),UnitNavigator}(),c=function(){function UnitImportNavigator(t,s,i){n()(this,UnitImportNavigator),this.classes_id=s,this.import_id=t,this.state=i}return u()(UnitImportNavigator,[{key:"route",value:function route(t){var s=this.state.models.classes[this.import_id].units;if(s.length&&this.state.models.units[s[0]]){var i=new r.a(this.state.models.units[s[0]],this.state),e={unit_id:s[0],classes_id:this.classes_id,import_id:this.import_id,step_id:i.steps.length&&i.steps[0].values.id},n=Object(_.c)(t.currentRoute,"import_step_content");t.replace({name:n,params:e})}else if(!this.state.login.user_data.is_client){var a=Object(_.c)(t.currentRoute,"classes_lessons");t.replace({name:a})}}},{key:"next",value:function next(t){var s=this.units_ids;s.length?t({name:"import_step_content",params:{unit_id:s[0]}}):this.state.login.user_data.is_client||t({name:"classes_lessons"})}},{key:"get_link",value:function get_link(){var t=this.units_ids;return t.length?{name:"import_step_content",params:{unit_id:t[0]}}:this.state.login.user_data.is_client?{name:"classes_content"}:{name:"classes_lessons"}}}]),UnitImportNavigator}()},2049:function(t,s,i){"use strict";i(65),i(7),i(153),i(11),i(12);var e=i(374),n=i(1631),a=i(22),u=i(1617),r=i(21),o=i(522),_=i(1834),l={name:"unit-menu-client-timer",props:{unit:{required:!0,type:e.a},unit_navigator:{type:_.b,required:!0}},data:function data(){var t=this,s=this.$store.state.login.user_data.id,i=Object.values(this.$store.state.models.unit_users).find((function(i){return i.user_id===s&&i.unit_id===t.unit.values.id})),e=i&&new u.a(i,this.$store.state);return{time_to_pass:e&&e.values.time_to_pass||this.unit.values.time_to_pass,unit_user:e,unit_timing:Object(o.b)(this.$store.state,this.unit.values.id)}},methods:{start_unit_passing:function start_unit_passing(){var t="unit_user:".concat(this.unit_user.values.id);new r.a(a.b["api:unit_user_start_api"](this.unit_user.values.id),t).on_error(r.c.show_errors(t,!0)).on_success(r.c.update_instance(n.a)).on_success(this.route).execute(this.$store,{})},route:function route(){this.unit.steps&&this.unit.steps.length&&this.unit_navigator.to_step_content_root(this.$router,{step_id:this.unit.steps[0].values.id})}}},c=i(3),h=Object(c.a)(l,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"text-center"},[i("div",{staticClass:"unit-menu-client-timer__timer"},[i("span",{staticClass:"text-muted"},[t._v(t._s(t.$gettext("время на выполнение")))]),t._v(" "),i("h3",[t._v(t._s(t.time_to_pass+":00"))])]),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.$store.state.login.user_data.is_pupil},on:{click:t.start_unit_passing}},[t._v("\n      "+t._s(t.$gettext("Начать прохождение"))+"\n  ")])])}),[],!1,null,null,null);s.a=h.exports},2222:function(t,s,i){"use strict";i(11),i(7),i(12);var e=i(2049),n=i(1617),a=i(374),u=i(1834),r={name:"ClientUnitTimerBanner",components:{UnitMenuClientTimer:e.a},props:{unit_user:{required:!0,type:n.a},unit_timing:{required:!0},unit_navigator:{type:u.b,required:!0}},computed:{unit:function unit(){var t=this.$store.state.models.units[this.unit_user.values.unit_id];return new a.a(t,this.$store.state)}}},o=i(3),_=Object(o.a)(r,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"panel m-b text-center"},[i("div",{staticClass:"panel-body client-unit-content-root__panel"},[t.unit_timing.is_finished()?[i("h4",{staticClass:"m-b-lg"},[t._v("\n          "+t._s(t.$gettext("Блок окончен"))+"\n        ")])]:[i("h4",{staticClass:"m-b-lg"},[t._v("\n          "+t._s(t.$gettext("Этот блок нужно решить за ограниченное время. После нажатия кнопки тебе откроются задания"))+"\n        ")]),t._v(" "),i("UnitMenuClientTimer",{attrs:{unit:t.unit,unit_navigator:t.unit_navigator}})]],2)])])}),[],!1,null,null,null);s.a=_.exports}}]);
//# sourceMappingURL=240.240.10016ffd0475ab1b0662.js.map