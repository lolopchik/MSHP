(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{1856:function(t,i,r){"use strict";var a={name:"FallbackImage",props:{src:{type:[String,null],required:!1},fallback_src:{type:String,required:!0},alt:{type:String,default:""}},data:function data(){return{error:!1}},computed:{_src:function _src(){return this.src?this.error?this.fallback_src:this.src:this.fallback_src}}},o=r(3),l=Object(o.a)(a,(function(){var t=this,i=t.$createElement;return(t._self._c||i)("img",{attrs:{src:t._src,alt:t.alt},on:{error:function(i){t.error=!0},click:function(i){return t.$emit("click",i)}}})}),[],!1,null,null,null);i.a=l.exports},1919:function(t,i,r){"use strict";var a=r(926),o=r.n(a),l=r(871),u={name:"TeamLogo",components:{Avatar:o.a},props:{team:{type:l.a,required:!1}}},c=r(3),_=Object(c.a)(u,(function(){var t=this.$createElement,i=this._self._c||t;return this.team?i("div",[this.team.values.logo?i("img",{staticClass:"team__logo mr-sm",attrs:{src:this.team.values.logo}}):i("div",{staticClass:"inline-block"},[i("avatar",{staticClass:"mr-sm inline-block",attrs:{username:this.team.values.name,size:32,customStyle:{"font-weight":"bold","font-size":"14px"}}})],1)]):i("div",{staticClass:"text-muted"},[i("div",{staticClass:"inline-block"},[i("avatar",{staticClass:"mr-sm inline-block",attrs:{username:this.$gettext("Без команды"),customStyle:{"font-weight":"bold","font-size":"14px"},size:32}})],1)])}),[],!1,null,null,null);i.a=_.exports},1964:function(t,i,r){"use strict";r.d(i,"a",(function(){return _})),r.d(i,"b",(function(){return set_fixed_position}));var a=r(4),o=r.n(a),l=r(5),u=r.n(l),c=(r(7),r(82),r(1)),_=function(){function FrameUidHandler(){var t=this;o()(this,FrameUidHandler),this.uid=Math.floor(1e9*Math.random()).toString(),this.destroy=function(){return t._destroy()},this.is_show=!1}return u()(FrameUidHandler,[{key:"_destroy",value:function _destroy(){window.removeEventListener("beforeunload",this.destroy),window.localStorage.getItem("webinar_uid")===this.uid&&(window.localStorage.removeItem("webinar_uid"),window.localStorage.removeItem("webinar_uid_date"))}},{key:"init",value:function init(){var t=Math.round(+new Date/1e3),i=window.localStorage.getItem("webinar_uid_date");i&&t-parseInt(i)>7200&&(window.localStorage.removeItem("webinar_uid"),window.localStorage.removeItem("webinar_uid_date")),window.localStorage.getItem("webinar_uid")||(this.is_show=!0,window.localStorage.setItem("webinar_uid",this.uid),window.localStorage.setItem("webinar_uid_date",t.toString())),window.addEventListener("beforeunload",this.destroy)}}]),FrameUidHandler}();function set_fixed_position(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c.isRequired)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1050,a=t.getBoundingClientRect();i.style.position="fixed",i.style.visibility="visible",i.style.left=a.left+"px",i.style.top=a.top+"px",i.style.width=a.width+"px",i.style.height=a.height+"px",i.style["z-index"]=r}},1978:function(t,i,r){"use strict";var a=r(871),o=r(1919),l={name:"TeamName",props:{team:{required:!1,type:a.a}},components:{TeamLogo:o.a}},u=r(3),c=Object(u.a)(l,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",[r("TeamLogo",{staticClass:"inline-block",attrs:{team:t.team}}),t._v(" "),r("span",{staticClass:"text-overflow-ellipsis overflow-hidden"},[t.team?[t._v("\n      "+t._s(t.team.values.name)+"\n    ")]:[t._v("\n      "+t._s(t.$gettext("Без команды"))+"\n    ")]],2)],1)}),[],!1,null,null,null);i.a=c.exports},2112:function(t,i,r){"use strict";r.d(i,"a",(function(){return _}));var a=r(4),o=r.n(a),l=r(5),u=r.n(l),c=(r(153),r(7),r(28),r(11),r(12),r(1)),_=function(){function ClassesScoreProvider(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,ClassesScoreProvider),this.units=t,this.results=i}return u()(ClassesScoreProvider,[{key:"score",get:function get(){for(var t=0,i=0,r=Object.values(this.results);i<r.length;i++){var a=r[i];a.score&&a.score>0&&(t+=a.score)}return t}},{key:"classes_score",get:function get(){var t=0;return this.units.forEach((function(i){t+=i.values.total_score||0})),parseInt(t)}}]),ClassesScoreProvider}()},2116:function(t,i,r){},2194:function(t,i,r){"use strict";r(11),r(7),r(12);var a=r(850),o=r(1964),l={name:"WebinarSingletonIframe",props:{webinar:{type:a.a,required:!0}},data:function data(){return{user_data:this.$store.state.login.user_data,uid_handler:new o.a}},created:function created(){this.uid_handler.init()},beforeDestroy:function beforeDestroy(){this.uid_handler.destroy()},mounted:function mounted(){this.$emit("mounted",this.$el)}},u=r(3),c=Object(u.a)(l,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.uid_handler.is_show?r("iframe",{ref:"frame",staticClass:"webinar",attrs:{id:"webinar:"+t.webinar.values.id,allowfullscreen:"",allow:"camera; microphone","data-username":t.user_data.initials,"data-auto-login":t.user_data.is_client,src:t.webinar.iframe_href}}):r("div",{staticClass:"webinar text-center flex flex-vertical-center flex-center"},[r("a",{staticClass:"btn btn-primary webinar-btn",on:{click:function(i){t.uid_handler.is_show=!0}}},[t._v(t._s(t.$gettext("Показать трансляцию")))])])}),[],!1,null,null,null).exports,_=r(385),d=r(4),m=r.n(d),h=r(5),p=r.n(h),v=(r(82),r(447)),g=r.n(v),b=function(){function WebinarFrameDisplayState(t,i,r){m()(this,WebinarFrameDisplayState);var a=this.get_step_element(t,r);this.is_related=a&&a.id.toString()===String(i.params.step_element_id),this.is_related_step=a&&a.step_id.toString()===String(i.params.step_id);var o=t.webinar_data;this.modal_enabled=r===o.webinar_id,this.modal_enabled?(this.is_in_content=!o.fullscreen&&this.is_related||o.force_close&&this.is_related_step,this.is_in_modal=!this.is_in_content&&!o.force_close):(this.is_in_content=this.is_related_step,this.is_in_modal=!1),this.is_hide=!this.is_in_content&&!this.is_in_modal}return p()(WebinarFrameDisplayState,[{key:"get_step_element",value:function get_step_element(t,i){var r=t.models.step_elements,a=void 0===r?{}:r,o=null;return g()(a,(function(t){t.webinar_id===i&&(o=t)})),o}}]),WebinarFrameDisplayState}(),w={name:"WebinarSingleton",components:{WebinarSingletonIframe:c},props:{webinar:{type:a.a,required:!0},display:{type:String,default:"content"}},watch:{"frame_state.is_in_modal":{handler:function handler(t){var i={show:t};t&&(i.force_close=!1),Object(_.c)(this.$store,i),this.$emit("mount"),this.mount_iframe()},immediate:!0},"frame_state.is_in_content":{handler:function handler(t){t&&(this.$emit("mount"),this.mount_element())},immediate:!0},"frame_state.is_hide":{handler:function handler(t){t&&_.d.$el&&(_.d.$el.style.visibility="hidden")},immediate:!0}},created:function created(){document.getElementById("content-wrapper").addEventListener("scroll",this.mount_element),window.addEventListener("resize",this.mount_element)},beforeDestroy:function beforeDestroy(){document.getElementById("content-wrapper").removeEventListener("scroll",this.mount_element),window.removeEventListener("resize",this.mount_element)},computed:{frame_state:function frame_state(){var t=new b(this.$store.state,this.$route,this.webinar.values.id);return console.debug("is_in_content =",t.is_in_content,"is_in_modal =",t.is_in_modal),t},can_mount:function can_mount(){return"content"===this.display&&this.frame_state.is_in_content||"modal"===this.display&&this.frame_state.is_in_modal},is_mount_frame:function is_mount_frame(){return"content"===this.display&&!this.frame_state.modal_enabled||"modal"===this.display&&this.frame_state.modal_enabled}},methods:{on_mount:function on_mount(t){Object(_.a)(t),Object(_.c)(this.$store,{loaded:!0})},mount_iframe:function mount_iframe(){var t=this;setTimeout((function(){return t.mount_element()}),1e3)},mount_element:function mount_element(){this.can_mount&&this.$el&&this.$el.parentElement&&_.d.$el&&(Object(o.b)(this.$el.parentElement,_.d.$el,999),this.set_transition(""))},set_transition:function set_transition(t){_.d.$el&&(_.d.$el.style.transition=t)}}},y=Object(u.a)(w,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",[this.is_mount_frame?i("WebinarSingletonIframe",{attrs:{webinar:this.webinar},on:{mounted:this.on_mount}}):this._e()],1)}),[],!1,null,null,null);i.a=y.exports},2263:function(t,i,r){"use strict";var a=r(975),o={name:"ClassesTeacherAvatar",components:{FallbackImage:r(1856).a},props:{classes_teacher:{type:a.a,required:!0},size:{type:String,default:"48px"}}},l=r(3),u=Object(l.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("FallbackImage",{staticClass:"img-rounded rounded_avatar teacher-avatar",style:{height:this.size,width:this.size},attrs:{alt:this.classes_teacher.teacher.full_name,src:this.classes_teacher.teacher.user.values.avatar,fallback_src:"/static/mshp/img/empty_avatar_lg.jpg"}})}),[],!1,null,null,null);i.a=u.exports},244:function(t,i,r){"use strict";r.d(i,"a",(function(){return m})),r.d(i,"b",(function(){return h})),r.d(i,"c",(function(){return p}));var a=r(4),o=r.n(a),l=r(5),u=r.n(l),c=(r(7),r(28),r(19)),_=r.n(c),d=r(67),m=function(){function EventTimer(t){o()(this,EventTimer),this.datetime=_()(t),this.callbacks=[],this.on_tick_callbacks=[],this.interval_id=null,this._is_resolved=!1}return u()(EventTimer,[{key:"start",value:function start(){var t=this;return this.callbacks.push((function(){return t.destroy()})),Object(d.a)().isAfter(_()(this.datetime))||(this.interval_id=setInterval((function(){t.tick()}),1e3)),this}},{key:"tick",value:function tick(){return this.on_tick_callbacks.forEach((function(t){return t()})),_.a.now()>this.datetime&&(this._is_resolved=!0,this.callbacks.forEach((function(t){return t()}))),this}},{key:"destroy",value:function destroy(){this.interval_id&&(clearInterval(this.interval_id),this.interval_id=null)}},{key:"on_event",value:function on_event(t){return this.callbacks.push(t),this._is_resolved&&t(),this}},{key:"on_tick",value:function on_tick(t){return this.on_tick_callbacks.push(t),this}}]),EventTimer}(),h=function(){function UnitTimers(t){o()(this,UnitTimers),this.unit_timing=t,this.is_started=this.unit_timing.is_started(),this.is_finished=this.unit_timing.is_finished(),this.is_solution_ended=this.unit_timing.is_solution_ended(),this.is_show_answers=this.unit_timing.is_result_published(),this.is_infinity=t.is_infinity,this.is_visible=t.is_visible,this.start_timer=void 0,this.end_timer=void 0,this.publish_timer=void 0,this.publish_timer=void 0,this.solution_ended_timer=void 0}return u()(UnitTimers,[{key:"is_active",get:function get(){return this.is_started&&!this.is_finished}},{key:"create_timers",value:function create_timers(){var t=this;return this.start_timer=new m(this.unit_timing.date_from).on_event((function(){t.is_started=t.unit_timing.is_started()})).on_tick((function(){t.start_at=_()(t.unit_timing.date_from).fromNow()})).start(),this.end_timer=new m(this.unit_timing.date_till).on_event((function(){t.is_finished=t.unit_timing.is_finished()})).start(),this.solution_ended_timer=new m(this.unit_timing.solution_datetime_till).on_event((function(){t.is_solution_ended=t.unit_timing.is_solution_ended()})).start(),this.publish_timer=new m(this.unit_timing.publish_date).on_event((function(){t.is_show_answers=t.unit_timing.is_result_published()})).start(),this}},{key:"destroy",value:function destroy(){this.start_timer&&(this.start_timer.destroy(),this.end_timer.destroy(),this.publish_timer.destroy(),this.solution_ended_timer.destroy())}}]),UnitTimers}(),p=function(){function UnitTimingData(t){o()(this,UnitTimingData),this.is_have_time=t.is_have_time,this.solution_datetime_till=t.solution_datetime_till&&Object(d.d)(t.solution_datetime_till),this.publish_date=t.publish_date&&Object(d.d)(t.publish_date),this.date_till=t.date_till&&Object(d.d)(t.date_till),this.date_from=t.date_from&&Object(d.d)(t.date_from),this.is_infinity=t.is_infinity||this.date_till&&this.date_till.year()>=2050,this.is_visible=(t.is_have_time||t.is_timer_solution&&t.is_started)&&!this.is_infinity,this._is_started=t.is_started,this.is_publish_before_now=this.publish_date&&this.publish_date.isBefore(_.a.now())}return u()(UnitTimingData,[{key:"is_started",value:function is_started(){return!this.is_have_time||_()().isAfter(this.date_from)||this._is_started}},{key:"is_finished",value:function is_finished(){return this.is_have_time&&_()().isAfter(this.date_till)}},{key:"is_result_published",value:function is_result_published(){return _()().isAfter(this.publish_date)}},{key:"is_solution_ended",value:function is_solution_ended(){return _()().isAfter(this.solution_datetime_till)}}]),UnitTimingData}()},385:function(t,i,r){"use strict";r.d(i,"d",(function(){return c})),r.d(i,"c",(function(){return update_webinar_modal})),r.d(i,"b",(function(){return show_webinar_in_full_screen})),r.d(i,"a",(function(){return set_webinar_frame})),r.d(i,"e",(function(){return _}));var a=r(13),o=r.n(a),l=(r(7),r(28),r(222),r(173),r(35)),u={namespaced:!0,actions:{},mutations:{update:function update(t,i){t.webinar_id=i},fullscreen:function fullscreen(t,i){t.fullscreen=i},show:function show(t){t.show=!0},hide:function hide(t){t.show=!1},update_data:function update_data(t,i){Object.entries(i).forEach((function(i){t[i[0]]=i[1]}))},add_link:function add_link(t,i){var r=t.counters[i];t.counters=r?Object.assign({},t.counters,o()({},i,r+1)):Object.assign({},t.counters,o()({},i,1))},remove_link:function remove_link(t,i){var r=t.counters[i];t.counters=r?Object.assign({},t.counters,o()({},i,r-1)):Object.assign({},t.counters,o()({},i,0)),t.show=t.counters[i]>1}},state:{webinar_id:null,show:!1,loaded:!1,fullscreen:!1,collapse:!1,force_close:!1,counters:{}}},c={$el:null};function update_webinar_modal(t,i){t.commit("webinar_data/update_data",i)}function show_webinar_in_full_screen(t){t.commit("webinar_data/update_data",{show:!0,fullscreen:!0,collapse:!1,force_close:!1})}function set_webinar_frame(t){c.$el=t}var _=new l.a("webinar_data",u)},522:function(t,i,r){"use strict";r.d(i,"b",(function(){return get_unit_timing})),r.d(i,"c",(function(){return get_unit_user})),r.d(i,"a",(function(){return get_problem_contest_counter}));r(70),r(7),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(1617),o=r(374),l=r(48);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==r.return||r.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}function get_unit_timing(t,i){var r;return t.login.user_data.is_pupil&&(r=get_unit_user(t,i))||(r=new o.a(t.models.units[i],t)),r.get_timing()}function get_unit_user(t,i){var r=t.login.user_data;if(t.result.is_preview_mode){var o=t.result.user_id,u=t.models.users[o];r=u&&new l.a(u,t)}if(t.result.is_preview_mode||r.is_client){var c,_=_createForOfIteratorHelper(t.unit_users.ids);try{for(_.s();!(c=_.n()).done;){var d=c.value,m=t.models.unit_users[d];if(m&&m.unit_id===i)return new a.a(m,t)}}catch(t){_.e(t)}finally{_.f()}}}function get_problem_contest_counter(t,i){var r=t.models.problem_contest_counters;return r&&r[i]?r[i].to_check:t.models.problem_contests[i].to_check}},755:function(t,i,r){"use strict";r.d(i,"a",(function(){return l})),r.d(i,"b",(function(){return u})),r.d(i,"c",(function(){return update_model_solve_types}));r(7),r(28),r(70),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(0),o=r(375);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==r.return||r.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}var l=[["tex","latex"],["html","html"]],u={tex:"latex",html:"html",text:Object(a.$gettext)("текст"),bbcode:"bbcode"};function update_model_solve_types(t){var i,r=_createForOfIteratorHelper(o.d);try{for(r.s();!(i=r.n()).done;){var a=i.value;t[a[0]]=!1}}catch(t){r.e(t)}finally{r.f()}return(t.solve_types||[]).forEach((function(i){t[i]=!0})),t}},756:function(t,i,r){"use strict";r.d(i,"a",(function(){return icon_by_extension_and_mime}));for(var a={},o=0,l=["bmp.png","png.png","html.png","txt.png","mov.png","mpeg.png","psd.png","zip.png","jpg.png","PL.png","wmv.png","mp4.png","wma.png","gif.png","rar.png","wav.png","doc.png","docx.png","avi.png","css.png","pdf.png","tiff.png","mp3.png","xlsx.png","xls.png","pptx.png","ppt.png","proj.png","pst.png","pub.png","readme.png","vsd.png","midi.png","ini.png","fla.png","accdb.png","settings.png","url.png","jsf.png","ods.png"];o<l.length;o++){var u=l[o];a[u.split(".")[0]]=u}function icon_by_extension_and_mime(t,i){var r=a[t.toLowerCase()];return r||(i.indexOf("audio/")>=0?r="audio.png":i.indexOf("video/")>=0?r="video.png":i.indexOf("image/")>=0?r="image.png":i.indexOf("text")>=0&&(r="text.png")),function path(t){return"/static/file_icons/"+t}(r||"unknown.png")}},990:function(t,i,r){"use strict";r.r(i);r(65),r(7),r(153),r(11),r(12),r(41);var a=r(268),o=r(1834),l=r(34),u=r.n(l),c=r(20),_=r.n(c),d=(r(82),r(25),r(105),r(43),r(102),r(103),r(2116),r(374)),m={name:"ClassesClassroom",functional:!0},h=r(3),p=Object(h.a)(m,(function(t,i){var r=i._c;return r("div",[r("span",{staticClass:"text-muted"},[i._v(i._s(i.parent.$gettext("Кабинет:")))]),i._v(" "+i._s(i.props.classroom.values.name))])}),[],!0,null,null,null).exports,v={name:"classes-time",functional:!0},g=Object(h.a)(v,(function(t,i){var r=i._c;return r("div",[r("span",{staticClass:"text-muted"},[i._v(i._s(i.parent.$gettext("Время занятия"))+":")]),i._v(" "+i._s(i.props.time_begin)+"-"+i._s(i.props.time_end)+"\n")])}),[],!0,null,null,null).exports,b=r(1827),w={name:"classes-lessons-list",props:{classes_lessons:{required:!0,type:Array},show_title:{default:!0}}},y=Object(h.a)(w,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return t.classes_lessons&&t.classes_lessons.length?r("div",[t.show_title?r("div",{staticClass:"text-muted inline-block classes-lessons-title"},[t.classes_lessons.length>1?[t._v(" "+t._s(t.$gettext("Темы:")))]:t.classes_lessons.length?[t._v(" "+t._s(t.$gettext("Тема:")))]:t._e()],2):t._e(),t._v(" "),t._l(t.classes_lessons,(function(i){return r("div",{key:i.lesson.values.id,staticClass:"mb-sm"},[t._v("\n    "+t._s(i.lesson.values.name)+"\n  ")])}))],2):t._e()}),[],!1,null,null,null).exports,x=r(27),$=r(1876),C=r(2394),k=r(2112),O={name:"ClassesScore",props:{results:{required:!0},units:{required:!0,type:Array}},computed:{classes_score_provider:function classes_score_provider(){return new k.a(this.units,this.results)},classes_score:function classes_score(){return this.classes_score_provider.classes_score},score:function score(){return this.classes_score_provider.score}}},j=Object(h.a)(O,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return 0!==t.classes_score?r("div",[r("div",{staticClass:"text-muted inline-block classes-lessons-title"},[t._v("\n    "+t._s(t.$gettext("Баллов за занятие:"))+"\n  ")]),t._v(" "),r("div",[t._v("\n    "+t._s(t.score)+" / "+t._s(t.classes_score)+"\n  ")])]):t._e()}),[],!1,null,null,null).exports,S=r(2364),T=r(714),E={name:"classes-teacher-name",components:{ClassesTeacherAvatar:r(2263).a},props:{classes_teacher:{type:T.a,required:!0},size:{type:String,default:"48px"}}},I=Object(h.a)(E,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{key:t.classes_teacher.teacher.values.id,staticClass:"flex flex-vertical-center shp_list__item"},[r("div",[r("ClassesTeacherAvatar",{attrs:{classes_teacher:t.classes_teacher,size:t.size}})],1),t._v(" "),r("div",{staticClass:"ml-sm"},[r("span",{staticClass:"font-lg"},[t._t("default"),t._v("\n      "+t._s(t.classes_teacher.teacher.full_name)+"\n    ")],2)])])}),[],!1,null,null,null).exports,L=r(19),z=r.n(L),A={name:"ClientContentInProcess"},D=Object(h.a)(A,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"flex-column flex-vertical-center"},[i("h2",{staticClass:"semi-bold"},[this._t("title")],2),this._v(" "),i("div",{staticClass:"m-b-sm"},[this._v(this._s(this.$gettext("Скоро тут появятся задания")))]),this._v(" "),i("img",{attrs:{src:"/static/img/manuals/make-lesson.png"}})])}),[],!1,null,null,null).exports,q={name:"ClientContentInProcessModern",props:{classes:{type:a.a,required:!0}},computed:{is_virtual_course:function is_virtual_course(){var t;return null===(t=this.classes.course)||void 0===t?void 0:t.values.is_infinite},title_text:function title_text(){return this.classes.course.is_exam?this.$gettext("Готовим экзамен"):this.$gettext("Готовим занятие")},time_begin:function time_begin(){return z()(this.classes.values.datetime_begin).format("LT")},time_end:function time_end(){return z()(this.classes.values.datetime_end).format("LT")}}},M=Object(h.a)(q,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"flex-column flex-vertical-center modern-page"},[r("div",{staticClass:"h3"},[t._v("\n    "+t._s(t.title_text)+"\n  ")]),t._v(" "),r("table",[r("tbody",[!t.is_virtual_course&&t.classes.values.datetime_begin?r("tr",[r("td",{staticClass:"text-subtitle text-subtext-color text-right pr-xs"},[t._v("\n          "+t._s(t.$gettext("Дата занятия:"))+"\n        ")]),t._v(" "),r("td",[t._v("\n          "+t._s(t._f("moment")(t.classes.moment_begin,"L"))+"\n        ")])]):t._e(),t._v(" "),t.time_begin&&t.time_end?r("tr",[r("td",{staticClass:"text-subtitle text-subtext-color text-right pr-xs"},[t._v("\n          "+t._s(t.$gettext("Время:"))+"\n        ")]),t._v(" "),r("td",[t._v("\n          "+t._s(t.time_begin)+" - "+t._s(t.time_end)+"\n        ")])]):t._e(),t._v(" "),t.classes.classroom?r("tr",[r("td",{staticClass:"text-subtitle text-subtext-color text-right pr-xs"},[t._v("\n          "+t._s(t.$gettext("Кабинет:"))+"\n        ")]),t._v(" "),r("td",[t._v("\n          "+t._s(t.classes.classroom.values.name)+"\n        ")])]):t._e()])]),t._v(" "),r("img",{staticClass:"mt-md",attrs:{src:"/static/img/classes/shish_informatics_opros.png"}})])}),[],!1,null,null,null).exports,P=r(1257),U={name:"client-classes-units-list",components:{ClientContentInProcess:D,ClassesTeacherName:I,ClassesMenuContainer:S.a,ClassesScore:j,ClientUnitMenuDetail:C.a,ClassesTime:g,ClassesClassroom:p,ClassesLessonsList:y,ClientContentInProcessModern:M},props:{classes:{type:a.a,required:!0},results:{type:Object},unit_ids:{type:Array,required:!1}},data:function data(){return{unit_navigator:new o.b(this.classes.values.id,this.$store.state),unit_detail_links:b.c,time_begin:z()(this.classes.values.datetime_begin).format("HH:mm"),time_end:z()(this.classes.values.datetime_end).format("HH:mm")}},created:function created(){this.route()},beforeDestroy:function beforeDestroy(){this.$store.commit("webinar_data/update",null)},mounted:function mounted(){var t=this.step_elements.find((function(t){return t.values.webinar_id&&t.webinar.is_show_embed}));t&&(this.$store.commit("webinar_data/update",t.webinar.values.id),this.$route.params.step_element_id&&this.$route.params.step_element_id.toString()!==t.values.id.toString()&&this.$store.commit("webinar_data/show"))},computed:{units:function units(){var t=this;return this.unit_navigator.units_ids.map((function(i){return new d.a(t.$store.state.models.units[i],t.$store.state)})).sort((function(t,i){return t.values.number-i.values.number})).filter((function(t){return!1===t.values.private}))},steps:function steps(){return Object(x.k)(this.units,(function(t){return t.steps}))},step_elements:function step_elements(){return Object(x.k)(this.steps,(function(t){return t.step_elements}))},contest_id:function contest_id(){if(this.$route.params.unit_id)return this.$store.state.models.units[this.$route.params.unit_id].contest;var t=+this.$route.params.step_id,i=this.$store.state.models.steps[t].unit_id;return this.$store.state.models.units[i].contest},filtered_units:function filtered_units(){var t=this,i=this.units&&this.units.filter((function(t){return t.steps.length&&Object(x.k)(t.steps,(function(t){return t.step_elements})).length}));return this.$store.state.result.is_preview_mode&&i&&this.unit_ids&&(i=i.filter((function(i){return t.unit_ids.includes(i.values.id)}))),i},is_modern_classes:function is_modern_classes(){return Object(P.b)(this.$route,"modern_classes")}},methods:{route:function route(){var t=this;return u()(_.a.mark((function _callee(){return _.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:("classes_content"===t.$route.meta.name||"classes_unit_content"===t.$route.meta.name||t.$store.state.result.is_preview_mode)&&t.unit_navigator.route(t.$router);case 1:case"end":return i.stop()}}),_callee)})))()},get_result:function get_result(t){return this.results[t]||new $.a(this.$store.state,[])}}},W=Object(h.a)(U,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ClassesMenuContainer",{attrs:{classes:t.classes},scopedSlots:t._u([{key:"side-menu",fn:function(){return[r("div",[t.$store.state.result.is_preview_mode?r("RouterLink",{staticClass:"btn btn-primary m-b w-100",attrs:{to:"/teaching_situation/studies/schedule/"+t.classes.values.id+"/",tag:"button"}},[t._v("\n        "+t._s(t.$gettext("Вернуться в занятие"))+"\n      ")]):t._e(),t._v(" "),r("div",{staticClass:"panel panel-default m-b"},[r("div",{staticClass:"panel-body panel-body-sm"},[t.classes.active_classes_teachers?r("div",{staticClass:"text-muted m-b-xs"},[t._v("\n            "+t._s(t.$gettext("Преподаватели"))+"\n          ")]):t._e(),t._v(" "),t._l(t.classes.active_classes_teachers,(function(t){return r("ClassesTeacherName",{key:t.uid,attrs:{classes_teacher:t}})})),t._v(" "),t.classes.classroom&&"D"!==t.classes.course.values.usage?r("ClassesClassroom",{attrs:{classroom:t.classes.classroom}}):t._e(),t._v(" "),t.time_begin&&t.time_end?r("ClassesTime",{attrs:{time_begin:t.time_begin,time_end:t.time_end}}):t._e(),t._v(" "),r("ClassesLessonsList",{attrs:{classes_lessons:t.classes.classes_lessons}}),t._v(" "),r("ClassesScore",{attrs:{units:t.units,results:t.results}})],2)]),t._v(" "),t._t("pre-menu"),t._v(" "),t._l(t.filtered_units,(function(i){return r("div",{key:i.uid},[r("ClientUnitMenuDetail",{attrs:{result:t.get_result(i.values.id),unit:i,unit_detail_links:t.unit_detail_links}})],1)}))],2)]},proxy:!0},{key:"content",fn:function(){return[r("div",[t.step_elements.length?r("RouterView"):[t.is_modern_classes?r("ClientContentInProcessModern",{staticClass:"mt-xl",attrs:{classes:t.classes}}):r("ClientContentInProcess",[t.classes.course.is_exam?r("template",{slot:"title"},[t._v("\n            "+t._s(t.$gettext("Готовим экзамен"))+"\n          ")]):r("template",{slot:"title"},[t._v("\n            "+t._s(t.$gettext("Готовим занятие"))+"\n          ")])],2)]],2)]},proxy:!0}],null,!0)})}),[],!1,null,null,null).exports,H=r(324),R=r(850),N=r(873),B=(r(33),r(36),r(23),r(28),r(38),r(13)),X=r.n(B),Y=r(17),K=r.n(Y);function ownKeys(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach((function(i){X()(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}var J={name:"ModalDraggableWindow",props:{fullscreen:{required:!0},show:{required:!0},collapse:{required:!0}},data:function data(){return{is_grabbing:!1,current_size:{},is_mounted:!1,enable_transition:!1,shiftX:0,shiftY:0}},mounted:function mounted(){this.is_mounted=!0,this.save_position()},watch:{style:function style(){var t=this;this.fix_position(),setTimeout((function(){t.enable_transition=!1,t.fix_position()}),200)}},computed:{positions:function positions(){return this.is_mounted?this.collapse?{height:"39px",bottom:0,right:0}:this.fullscreen?{left:0,top:0,right:0,bottom:0,width:"100%",height:"100%"}:{left:this.current_size.left+"px",top:this.current_size.top+"px",width:this.current_size.width+"px",height:this.current_size.height+"px"}:{}},style:function style(){var t=this.show?"visible":"hidden",i=this.enable_transition?"0.2s":"";return _objectSpread(_objectSpread({visibility:t},this.positions),{},{transition:i})}},methods:{move_at:function move_at(t){var i=Math.min(window.innerWidth-this.current_size.width,Math.max(0,t.pageX-this.shiftX)),r=Math.min(window.innerHeight-this.current_size.height,Math.max(0,t.pageY-this.shiftY));this.current_size.left=i,this.current_size.top=r,this.fix_position(),this.is_grabbing=!0},start_drag:function start_drag(t){if(t.target===t.currentTarget){var i=this.$refs.modal.getBoundingClientRect();this.shiftX=t.pageX-i.left,this.shiftY=t.pageY-i.top,this.move_at(t),window.addEventListener("mousemove",this.move_at),window.addEventListener("mouseup",this.stop_drag)}},stop_drag:function stop_drag(){window.removeEventListener("mousemove",this.move_at),window.removeEventListener("mouseup",this.stop_drag),this.is_grabbing=!1},start_resize:function start_resize(t){t.target===t.currentTarget&&(window.addEventListener("mousemove",this.fix_position),window.addEventListener("mouseup",this.stop_resize))},stop_resize:function stop_resize(){window.removeEventListener("mousemove",this.fix_position)},fix_position:function fix_position(){this.$refs.content&&this.$emit("fix_position",this.$refs.content)},save_position:function save_position(){if(this.$el){var t=this.$el.getBoundingClientRect();t.height<350||t.height>355||K.a.set(this,"current_size",{left:t.left,width:t.width,height:t.height,top:t.top})}},handleResize:function handleResize(t){var i=t.width,r=t.height;console.log("resized",i,r)}}},V=Object(h.a)(J,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{ref:"modal",staticClass:"shp-modal",style:t.style,on:{mousedown:t.start_resize}},[r("div",{staticClass:"shp-modal__title",class:{"shp-modal__title_is-grabbing":t.is_grabbing},on:{mousedown:function(i){return i.preventDefault(),t.start_drag.apply(null,arguments)}}},[r("div",{staticClass:"p-sm"},[t._t("title",(function(){return[r("div",[t._v("Заголовок")])]}))],2),t._v(" "),r("div",{staticClass:"flex"},[r("div",{staticClass:"clickable p-sm",on:{click:function(i){return t.$emit("toggle_fullscreen",!t.fullscreen)}}},[r("i",{class:t.fullscreen?"icon-resize-small":"icon-resize-full"})]),t._v(" "),r("div",{staticClass:"clickable p-sm",on:{click:function(i){return t.$emit("toggle",!t.collapse)}}},[r("i",{class:t.collapse?"icon-chevron-up":"icon-chevron-down"})]),t._v(" "),r("div",{staticClass:"clickable p-sm",on:{click:function(i){return t.$emit("close")}}},[r("i",{staticClass:"icon-remove"})])])]),t._v(" "),r("div",{ref:"content",staticClass:"shp-modal__content"},[t._t("default")],2),t._v(" "),t._t("footer")],2)}),[],!1,null,null,null).exports,G=r(2194),Q=r(385),Z=r(1964),tt={name:"WebinarModalTransition",components:{WebinarSingleton:G.a,ModalDraggableWindow:V},props:{webinar:R.a},methods:{toggle_modal:function toggle_modal(t){Object(Q.c)(this.$store,{collapse:t,force_close:!1})},close_modal:function close_modal(){Object(Q.c)(this.$store,{force_close:!0,show:!1})},toggle_fullscreen:function toggle_fullscreen(t){Object(Q.c)(this.$store,{fullscreen:t,force_close:!1})},fix_position:function fix_position(t){this.$store.state.webinar_data.show&&Q.d.$el&&Object(Z.b)(t,Q.d.$el)}}},et=Object(h.a)(tt,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ModalDraggableWindow",{ref:"modal",attrs:{fullscreen:t.$store.state.webinar_data.fullscreen,show:t.$store.state.webinar_data.show,collapse:t.$store.state.webinar_data.collapse},on:{toggle:t.toggle_modal,close:t.close_modal,toggle_fullscreen:t.toggle_fullscreen,fix_position:t.fix_position},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$gettext("Трансляция")))]},proxy:!0}])},[t._v(" "),r("WebinarSingleton",{ref:"webinar",attrs:{display:"modal",webinar:t.webinar}})],1)}),[],!1,null,null,null).exports,st=r(871),nt=r(1978),it={name:"TeammateList",props:{teammates:{required:!0}}},rt={name:"TeamPanel",components:{TeammateList:Object(h.a)(it,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",t._l(t.teammates,(function(i){return r("div",{key:i.uid,staticClass:"mb-sm"},[t._v("\n    "+t._s(i.get_user().initials)+"\n  ")])})),0)}),[],!1,null,null,null).exports,TeamName:nt.a},props:{team:{type:st.a,required:!0}},data:function data(){return{show_teammates:!1}}},at=Object(h.a)(rt,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"panel panel-default"},[r("div",{staticClass:"panel-body"},[r("div",{staticClass:"flex clickable",on:{click:function(i){t.show_teammates=!t.show_teammates}}},[r("span",{staticClass:"text-muted flex-1-auto"},[t._v(t._s(t.$gettext("Твоя команда")))]),t._v(" "),r("span",[r("i",{directives:[{name:"show",rawName:"v-show",value:!t.show_teammates,expression:"!show_teammates"}],staticClass:"shp_icons-chevron_down shp_icons-sm"}),t._v(" "),r("i",{directives:[{name:"show",rawName:"v-show",value:t.show_teammates,expression:"show_teammates"}],staticClass:"shp_icons-chevron_up shp_icons-sm"})])]),t._v(" "),r("TeamName",{attrs:{team:t.team}}),t._v(" "),r("collapse",{staticClass:"mt-sm",model:{value:t.show_teammates,callback:function(i){t.show_teammates=i},expression:"show_teammates"}},[r("TeammateList",{attrs:{teammates:t.team.teammates}})],1)],1)])}),[],!1,null,null,null).exports,ot=r(2376),lt=r(1616),ut={name:"ClientClassesContentRoot",components:{TeamPanel:at,WebinarModalTransition:et,InstanceFetcher:H.a,ClientClassesUnitsList:W,ClientClassesContentFetcher:ot.a},data:function data(){var t=this.$route.params.classes_id,data=this.$store.state.models.classes[t],i=[];return this.$store.state.result.is_preview_mode&&(i=[{applied:{unituser__user_id:this.$store.state.result.user_id}}]),{data:data,classes_id:t,webinar_model:N.a,unit_filter:i}},computed:{classes:function classes(){var t=this.$store.state.models.classes[this.$route.params.classes_id];return t&&new a.a(t,this.$store.state)},classes_user:function classes_user(){var t=this;if(this.$store.state.models.classes_users&&this.classes){var i=Object.values(this.$store.state.models.classes_users).find((function(i){return i.classes_id===t.classes.values.id}));return i&&new lt.a(i,this.$store.state)}},webinar:function webinar(){var t=this.$store.state.webinar_data.webinar_id;if(t){var i=this.$store.state.models.webinars[t];return i&&new R.a(i,this.$store.state)}}},methods:{set_unit_user_ids:function set_unit_user_ids(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.$store.commit("unit_users/add_ids",i)},navigate:function navigate(t){"classes_unit_content"===this.$route.meta.name&&t.length>0&&this.classes&&new o.b(this.classes.values.id,this.$store.state).route(this.$router)}},beforeRouteUpdate:function beforeRouteUpdate(t,i,r){this.classes&&"classes_content"===t.name&&this.$refs.units_list&&this.$refs.units_list.list_data.initiated?new o.b(this.classes.values.id,this.$store.state).route(this.$router):r()}},ct=Object(h.a)(ut,(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",[r("ClientClassesContentFetcher",{attrs:{classes_id:t.$route.params.classes_id,is_fetch_teams:t.classes&&t.classes.is_team_enabled,unit_filter:t.unit_filter},on:{unit_users_fetched:t.navigate},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.results,o=i.classes_team,l=i.unit_ids;return[t.classes?r("client-classes-units-list",{key:t.classes&&t.classes.values.id,ref:"units_list",attrs:{classes:t.classes,results:a,classes_team:o,unit_ids:l}},[o?r("TeamPanel",{attrs:{slot:"pre-menu",team:o.team},slot:"pre-menu"}):t._e()],1):t._e()]}}])}),t._v(" "),t.webinar&&!t.$store.state.result.is_preview_mode?[r("InstanceFetcher",{attrs:{url:"api:webinar_link_api",instance_id:t.webinar.values.id,model:t.webinar_model,post:!0,is_need:!t.webinar.iframe_href}},[r("WebinarModalTransition",{attrs:{webinar:t.webinar}})],1)]:t._e()],2)}),[],!1,null,null,null);i.default=ct.exports}}]);
//# sourceMappingURL=117.117.2eb080a8877902d82bda.js.map