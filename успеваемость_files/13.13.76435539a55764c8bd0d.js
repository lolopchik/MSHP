(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1261:function(t,i,r){"use strict";r.d(i,"a",(function(){return l}));var a=r(4),o=r.n(a),u=r(5),c=r.n(u),_=(r(88),r(29),r(20)),d=r.n(_),l=function(){function VerdictAnalizator(t,i,r){o()(this,VerdictAnalizator),this.verdict=t,this.contest_data=i,this.testing_method=r}return c()(VerdictAnalizator,[{key:"has_score",value:function has_score(){return"IG"!==this.verdict&&"AC"!==this.verdict}},{key:"has_manual_score",value:function has_manual_score(){return this.contest_data&&"manual"===this.contest_data.manual_verdict||"manual"===this.testing_method||"outside"===this.testing_method}},{key:"is_outside",value:function is_outside(){return"outside"===this.testing_method}},{key:"is_ejudge",value:function is_ejudge(){return"ejudge"===this.testing_method||"pyrobo"===this.testing_method}},{key:"iter_verdicts",value:d.a.mark((function iter_verdicts(){return d.a.wrap((function iter_verdicts$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.has_manual_score()){t.next=5;break}return t.next=3,"OK";case 3:return t.next=5,"PS";case 5:if(!this.contest_data){t.next=8;break}return t.next=8,"IG";case 8:if(!this.is_outside()){t.next=11;break}return t.next=11,"NA";case 11:if(!this.contest_data||!this.has_manual_score()){t.next=14;break}return t.next=14,"AC";case 14:if(!this.is_ejudge()){t.next=17;break}return t.next=17,"RJ";case 17:case"end":return t.stop()}}),iter_verdicts,this)}))},{key:"get_verdicts",value:function get_verdicts(){return Array.from(this.iter_verdicts())}}]),VerdictAnalizator}()},1824:function(t,i,r){"use strict";r.d(i,"b",(function(){return B})),r.d(i,"c",(function(){return L})),r.d(i,"f",(function(){return make_etalon})),r.d(i,"g",(function(){return remove_etalon})),r.d(i,"a",(function(){return M})),r.d(i,"d",(function(){return get_prettify_form_data})),r.d(i,"e",(function(){return get_prettify_operator}));r(36),r(25),r(28),r(38);var a,o,u=r(34),c=r.n(u),_=r(13),d=r.n(_),l=r(4),h=r.n(l),p=r(5),v=r.n(p),m=r(9),g=r.n(m),b=r(20),y=r.n(b),w=(r(7),r(32),r(188),r(23),r(130),r(33),r(31),r(11),r(12),r(41),r(102),r(103),r(644)),k=r.n(w),O=r(22),j=r(89),x=r(754),A=r(523),R=r(1615),T=r(1830),S=r(1837),I=r(1),q=r(21),z=r(286),E=r(60),P=r(59),D=r(93),U=r(45),$=r(378);function ownKeys(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,a)}return r}var L=(a=Object(I.vuex_action)($.a),o=function(){function RunOperator(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(I.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(I.isRequired)();h()(this,RunOperator),this.problem_id=t,this.run_id=i,this.on_change_verdict=new j.a(this)}return v()(RunOperator,[{key:"change_verdict",value:function change_verdict(t,i,r){var a=this,o={verdict:i};return void 0!==r&&(r=Math.min(r,Object(T.a)(t.state,this.run_id)),o.score=Math.max(r,0)),new q.a(O.b["api:run_verdict_api"](this.run_id),"runs:"+this.run_id).on_before(q.c.change_instance(z.a,{id:this.run_id,current_verdict:i})).finally(q.c.change_instance(z.a,{id:this.run_id,current_verdict:void 0})).on_success(q.c.update_instance(z.a)).on_success((function(){a.on_change_verdict.emit(a.run_id,i,r)})).execute(t,o)}},{key:"download",value:function download(){window.location="".concat(O.b["api:run_download_api"](this.run_id))}},{key:"fetch_run",value:function fetch_run(t,i){var r=this;return Object(E.a)(O.b[i||"api:run_detail_api"](r.run_id)).then((function(i){r.update_row_data(t,i.data)})).catch((function(i){return new P.a(r.problem_id,t).catch_error(i)}))}},{key:"update_row_data",value:function update_row_data(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(I.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(I.isRequired)(),r=Object(D.a)([i],[z.a.normalizr_entity]);(new U.d).insert_list(t,z.a,r)}}]),RunOperator}(),g()(o.prototype,"fetch_run",[a],Object.getOwnPropertyDescriptor(o.prototype,"fetch_run"),o.prototype),o),B=function(){function RunBatchOperator(){h()(this,RunBatchOperator),this.uid="run:batch:operator",this.params={},this.checked_rows=void 0,this._deselect=!0,this.on_change_verdict=new j.a(this)}var t,i;return v()(RunBatchOperator,[{key:"download",value:function download(){var t=function _objectSpread(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach((function(i){d()(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}({id__in:Object.keys(this.checked_rows.opened).join(",")},this.params);t.id__in.length||(t.id__in="0");var i=k.a.stringify(t,{arrayFormat:"repeat"});window.location="".concat(O.b["api:run_download_list_api"](),"?").concat(i)}},{key:"deselect",value:function deselect(){return this._deselect=!0,this}},{key:"remove_select",value:function remove_select(){return this._deselect=!1,this}},{key:"change_verdict",value:(i=c()(y.a.mark((function _callee(t,i,r){var a,o,u,c,_,d,l;return y.a.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:a=t.state,o=null,u=0,c=Object.keys(this.checked_rows.opened);case 3:if(!(u<c.length)){h.next=14;break}if(_=c[u],d=a.models.runs[_],!((l=d&&new R.a(d,a))&&l.verdict_analizator.get_verdicts().indexOf(i)>=0)){h.next=11;break}return h.next=10,new L(l.values.problem_id,l.values.id).change_verdict(t,i,r);case 10:o=l;case 11:u++,h.next=3;break;case 14:this._deselect&&this.checked_rows.deselect_all(),this.on_change_verdict.emit(o,i,r);case 16:case"end":return h.stop()}}),_callee,this)}))),function change_verdict(t,r,a){return i.apply(this,arguments)})},{key:"change_score",value:(t=c()(y.a.mark((function _callee2(t,i){var r,a,o,u,c;return y.a.wrap((function _callee2$(_){for(;;)switch(_.prev=_.next){case 0:r=0,a=Object.keys(this.checked_rows.opened);case 1:if(!(r<a.length)){_.next=10;break}return o=a[r],u=t.state.models.runs[o].problem_id,c=t.state.models.problems[u].score,_.next=7,new S.a(o).change_score(t,Math.min(c,i));case 7:r++,_.next=1;break;case 10:this._deselect&&this.checked_rows.deselect_all();case 11:case"end":return _.stop()}}),_callee2,this)}))),function change_score(i,r){return t.apply(this,arguments)})},{key:"for_problem",value:function for_problem(t){return this.uid=t.uid,this.params={problem_id:t.values.id,name:"Посылки ".concat(t.values.name)},this}},{key:"for_notifications",value:function for_notifications(){return this.params={is_notification:!0},this}},{key:"for_unit",value:function for_unit(t){return this.params={contest__unit__id:t},this}},{key:"for_problem_contest_id",value:function for_problem_contest_id(t,i){return this.uid=i,this.params={contest_id:t},this}},{key:"use_checked_rows",value:function use_checked_rows(t){return this.checked_rows=t,this}}]),RunBatchOperator}();function make_etalon(){var t=this,i=(arguments.length>0&&void 0!==arguments[0]||Object(I.isRequired)(),arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(I.isRequired)());return new q.a(O.b["api:run_make_etalon_api"](i.values.id),i.uid).on_success((function(r,a){var o=A.a.get_instance(r,x.b,i.values.problem_id),u={id:t.run.values.problem_id,etalon_counter:o.values.etalon_counter+1};o&&q.c.update_instance(A.a)(t.$store,{data:u}),q.c.update_instance(z.a)(t.$store,{data:{id:t.run.values.id,etalon_id:a.data.id}})})).execute(this.$store,{})}var M=["g++","gcc","javac","mcs","node","python","python3","html","gccgo"];function get_prettify_form_data(t,i){var r=new window.Blob([t],{type:"text/plain"}),a=new window.FormData;return a.append("source",r),a.append("language",i),a}function get_prettify_operator(t,i){var r=window.location.hostname,a=window.location.host.includes(":")?"".concat(r,":8068/prettify/"):"".concat(r,"/code_prettier/prettify/"),o=window.location.protocol,u=new q.a("".concat(o,"//").concat(a),i),c=t.state.login.jwt_token;return u.config.headers.Authorization="Bearer ".concat(c),u}function remove_etalon(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(I.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(I.isRequired)();new q.a(O.b["api:run_delete_api"](i.values.id),i.uid).on_success(q.c.remove_instance(i.values.id,z.a)).on_before(q.c.hide_errors(i.uid)).on_error(q.c.show_errors(i.uid)).on_success((function(t){var r=A.a.get_instance(t,x.b,i.values.problem_id),a={id:i.values.problem_id,etalon_counter:r.values.etalon_counter-1};r&&q.c.update_instance(A.a)(t,{data:a})})).execute(t,{})}},1830:function(t,i,r){"use strict";r.d(i,"a",(function(){return get_run_max_score}));var a=r(1);function get_problem_contest(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(a.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(a.isRequired)(),r=t.models.runs[i].problem_id,o=t.models.runs[i].contest_id;for(var u in t.models.problem_contests)if(o===t.models.problem_contests[u].contest_id&&r===t.models.problem_contests[u].problem_id)return u}function get_run_max_score(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(a.isRequired)(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(a.isRequired)(),r=get_problem_contest(t,i);if(r&&r.max_points)return r.max_points;var o=t.models.runs[i].problem_id;return t.models.problems[o].score}},1837:function(t,i,r){"use strict";r.d(i,"a",(function(){return g}));var a=r(4),o=r.n(a),u=r(5),c=r.n(u),_=(r(7),r(32),r(188),r(93)),d=r(22),l=r(45),h=r(21),p=r(1),v=r(1830),m=r(286),g=function(){function RunScoreOperators(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.isRequired)();o()(this,RunScoreOperators),this.run_id=t}return c()(RunScoreOperators,[{key:"change_score",value:function change_score(t,i){i=Math.max(0,Math.min(i,Object(v.a)(t.state,this.run_id)));var r=Object(_.a)([{id:this.run_id,current_score:i}],[m.a.normalizr_entity]);(new l.d).insert_list(t,m.a,r);var a=Object(_.a)([{id:this.run_id,current_score:void 0}],[m.a.normalizr_entity]);return new h.a(d.b["api:run_score_api"](this.run_id),"runs:"+this.run_id).on_success(h.c.update_instance(m.a)).finally((function(t){(new l.d).insert_list(t,m.a,a)})).execute(t,{score:i})}}]),RunScoreOperators}()},1909:function(t,i,r){"use strict";r.d(i,"a",(function(){return attach_run_socket}));var a=r(1824),o=r(45),u=r(658),c=r(93),_=r(1668),d=r(1715),l=r(381),h=r(1);function attach_run_socket(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.isRequired)(),r=Object(l.a)(i.state),p={subscribe:function subscribe(t){0},error:function error(t){0},publish:function publish(i){t.handle_message(i.data)}};p.publish=function(t){var r=t.data;if("update"===r.type)r.data&&new a.c(r.data.problem_id,r.data.id).update_row_data(i,r.data);else if("run_result_update"===r.type){var l=Object(c.a)([r.data],[u.a.normalizr_entity]);(new o.d).insert_list(i,u.a,l)}else if("code_trace_update"===r.type){var h=Object(c.a)([r.data],[_.a.normalizr_entity]);(new o.d).insert_list(i,_.a,h)}else if("trial_run_update"===r.type){var p=Object(c.a)([r.data],[d.a.normalizr_entity]);(new o.d).insert_list(i,d.a,p)}};var v=i.state.login.user_data.id;return v&&r.subscribe("runs#".concat(v),p),r}},244:function(t,i,r){"use strict";r.d(i,"a",(function(){return h})),r.d(i,"b",(function(){return p})),r.d(i,"c",(function(){return v}));var a=r(4),o=r.n(a),u=r(5),c=r.n(u),_=(r(7),r(28),r(19)),d=r.n(_),l=r(67),h=function(){function EventTimer(t){o()(this,EventTimer),this.datetime=d()(t),this.callbacks=[],this.on_tick_callbacks=[],this.interval_id=null,this._is_resolved=!1}return c()(EventTimer,[{key:"start",value:function start(){var t=this;return this.callbacks.push((function(){return t.destroy()})),Object(l.a)().isAfter(d()(this.datetime))||(this.interval_id=setInterval((function(){t.tick()}),1e3)),this}},{key:"tick",value:function tick(){return this.on_tick_callbacks.forEach((function(t){return t()})),d.a.now()>this.datetime&&(this._is_resolved=!0,this.callbacks.forEach((function(t){return t()}))),this}},{key:"destroy",value:function destroy(){this.interval_id&&(clearInterval(this.interval_id),this.interval_id=null)}},{key:"on_event",value:function on_event(t){return this.callbacks.push(t),this._is_resolved&&t(),this}},{key:"on_tick",value:function on_tick(t){return this.on_tick_callbacks.push(t),this}}]),EventTimer}(),p=function(){function UnitTimers(t){o()(this,UnitTimers),this.unit_timing=t,this.is_started=this.unit_timing.is_started(),this.is_finished=this.unit_timing.is_finished(),this.is_solution_ended=this.unit_timing.is_solution_ended(),this.is_show_answers=this.unit_timing.is_result_published(),this.is_infinity=t.is_infinity,this.is_visible=t.is_visible,this.start_timer=void 0,this.end_timer=void 0,this.publish_timer=void 0,this.publish_timer=void 0,this.solution_ended_timer=void 0}return c()(UnitTimers,[{key:"is_active",get:function get(){return this.is_started&&!this.is_finished}},{key:"create_timers",value:function create_timers(){var t=this;return this.start_timer=new h(this.unit_timing.date_from).on_event((function(){t.is_started=t.unit_timing.is_started()})).on_tick((function(){t.start_at=d()(t.unit_timing.date_from).fromNow()})).start(),this.end_timer=new h(this.unit_timing.date_till).on_event((function(){t.is_finished=t.unit_timing.is_finished()})).start(),this.solution_ended_timer=new h(this.unit_timing.solution_datetime_till).on_event((function(){t.is_solution_ended=t.unit_timing.is_solution_ended()})).start(),this.publish_timer=new h(this.unit_timing.publish_date).on_event((function(){t.is_show_answers=t.unit_timing.is_result_published()})).start(),this}},{key:"destroy",value:function destroy(){this.start_timer&&(this.start_timer.destroy(),this.end_timer.destroy(),this.publish_timer.destroy(),this.solution_ended_timer.destroy())}}]),UnitTimers}(),v=function(){function UnitTimingData(t){o()(this,UnitTimingData),this.is_have_time=t.is_have_time,this.solution_datetime_till=t.solution_datetime_till&&Object(l.d)(t.solution_datetime_till),this.publish_date=t.publish_date&&Object(l.d)(t.publish_date),this.date_till=t.date_till&&Object(l.d)(t.date_till),this.date_from=t.date_from&&Object(l.d)(t.date_from),this.is_infinity=t.is_infinity||this.date_till&&this.date_till.year()>=2050,this.is_visible=(t.is_have_time||t.is_timer_solution&&t.is_started)&&!this.is_infinity,this._is_started=t.is_started,this.is_publish_before_now=this.publish_date&&this.publish_date.isBefore(d.a.now())}return c()(UnitTimingData,[{key:"is_started",value:function is_started(){return!this.is_have_time||d()().isAfter(this.date_from)||this._is_started}},{key:"is_finished",value:function is_finished(){return this.is_have_time&&d()().isAfter(this.date_till)}},{key:"is_result_published",value:function is_result_published(){return d()().isAfter(this.publish_date)}},{key:"is_solution_ended",value:function is_solution_ended(){return d()().isAfter(this.solution_datetime_till)}}]),UnitTimingData}()},522:function(t,i,r){"use strict";r.d(i,"b",(function(){return get_unit_timing})),r.d(i,"c",(function(){return get_unit_user})),r.d(i,"a",(function(){return get_problem_contest_counter}));r(70),r(7),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(1617),o=r(374),u=r(48);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,_=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return c=t.done,t},e:function e(t){_=!0,u=t},f:function f(){try{c||null==r.return||r.return()}finally{if(_)throw u}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}function get_unit_timing(t,i){var r;return t.login.user_data.is_pupil&&(r=get_unit_user(t,i))||(r=new o.a(t.models.units[i],t)),r.get_timing()}function get_unit_user(t,i){var r=t.login.user_data;if(t.result.is_preview_mode){var o=t.result.user_id,c=t.models.users[o];r=c&&new u.a(c,t)}if(t.result.is_preview_mode||r.is_client){var _,d=_createForOfIteratorHelper(t.unit_users.ids);try{for(d.s();!(_=d.n()).done;){var l=_.value,h=t.models.unit_users[l];if(h&&h.unit_id===i)return new a.a(h,t)}}catch(t){d.e(t)}finally{d.f()}}}function get_problem_contest_counter(t,i){var r=t.models.problem_contest_counters;return r&&r[i]?r[i].to_check:t.models.problem_contests[i].to_check}},755:function(t,i,r){"use strict";r.d(i,"a",(function(){return u})),r.d(i,"b",(function(){return c})),r.d(i,"c",(function(){return update_model_solve_types}));r(7),r(28),r(70),r(82),r(41),r(88),r(29),r(53),r(36),r(116),r(117),r(11),r(12);var a=r(0),o=r(375);function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,_=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return c=t.done,t},e:function e(t){_=!0,u=t},f:function f(){try{c||null==r.return||r.return()}finally{if(_)throw u}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}var u=[["tex","latex"],["html","html"]],c={tex:"latex",html:"html",text:Object(a.$gettext)("текст"),bbcode:"bbcode"};function update_model_solve_types(t){var i,r=_createForOfIteratorHelper(o.d);try{for(r.s();!(i=r.n()).done;){var a=i.value;t[a[0]]=!1}}catch(t){r.e(t)}finally{r.f()}return(t.solve_types||[]).forEach((function(i){t[i]=!0})),t}},756:function(t,i,r){"use strict";r.d(i,"a",(function(){return icon_by_extension_and_mime}));for(var a={},o=0,u=["bmp.png","png.png","html.png","txt.png","mov.png","mpeg.png","psd.png","zip.png","jpg.png","PL.png","wmv.png","mp4.png","wma.png","gif.png","rar.png","wav.png","doc.png","docx.png","avi.png","css.png","pdf.png","tiff.png","mp3.png","xlsx.png","xls.png","pptx.png","ppt.png","proj.png","pst.png","pub.png","readme.png","vsd.png","midi.png","ini.png","fla.png","accdb.png","settings.png","url.png","jsf.png","ods.png"];o<u.length;o++){var c=u[o];a[c.split(".")[0]]=c}function icon_by_extension_and_mime(t,i){var r=a[t.toLowerCase()];return r||(i.indexOf("audio/")>=0?r="audio.png":i.indexOf("video/")>=0?r="video.png":i.indexOf("image/")>=0?r="image.png":i.indexOf("text")>=0&&(r="text.png")),function path(t){return"/static/file_icons/"+t}(r||"unknown.png")}}}]);
//# sourceMappingURL=13.13.76435539a55764c8bd0d.js.map