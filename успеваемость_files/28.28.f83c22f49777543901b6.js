(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1827:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"d",(function(){return r})),i.d(e,"e",(function(){return l})),i.d(e,"b",(function(){return u}));var n=i(13),s=i.n(n);i(11),i(7),i(12),i(33),i(36),i(25),i(23),i(28),i(38);function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function get_prefixed_name(t,e){return t&&t.meta&&t.meta.name_prefix?t.meta.name_prefix+e:e}var a={unit_link:function unit_link(t,e,i){return{name:get_prefixed_name(t,"unit_content"),params:{classes_id:i||t.params.classes_id,unit_id:e.values.id}}},step_link:function step_link(t,e,i){return{name:get_prefixed_name(t,"step_content_root"),params:{step_id:e.values.id,unit_id:e.values.unit_id,classes_id:t.params.classes_id||i}}},step_element_link:function step_element_link(t,e,i,n){return{name:get_prefixed_name(t,n||"step_element_content"),params:{classes_id:t.params.classes_id||i,step_id:e.values.step_id,step_element_id:e.values.id}}},step_element_detail_link:function step_element_detail_link(t,e,i){return a.step_element_link(t,e,i,"step_element_detail")}},r=_objectSpread(_objectSpread({},a),{},{unit_link:function unit_link(t,e){return{name:"unit_edit",params:{unit_id:e.values.id}}}}),o=_objectSpread(_objectSpread({},a),{},{unit_link:function unit_link(t,e){return{name:"contest_edit",params:{unit_id:e.values.id}}}}),l=_objectSpread(_objectSpread({},a),{},{unit_link:function unit_link(t,e){if(e.values.steps)return{name:"import_step_content",params:{step_id:e.values.steps[0],unit_id:e.values.id,import_id:t.params.import_id}}},step_link:function step_link(t,e){return{name:"import_step_content",params:{step_id:e.values.id,unit_id:e.values.unit_id,import_id:t.params.import_id}}},step_element_link:function step_element_link(t,e){return{name:"import_step_element_content",params:{import_id:t.params.import_id,step_id:e.values.step_id,step_element_id:e.values.id}}}}),u=_objectSpread(_objectSpread({},a),{},{unit_link:function unit_link(t,e){return{name:"classes_checking_problem",params:{unit_id:e.values.id}}},step_link:function step_link(t,e){return{name:"classes_checking",params:{step_id:e.values.id,unit_id:e.values.unit_id}}},step_element_link:function step_element_link(t,e){return{name:"classes_checking_problem",params:{classes_id:t.params.classes_id,step_id:e.values.step_id,step_element_id:e.values.id}}}})},1931:function(t,e,i){"use strict";i(25),i(7);var n={name:"UnitMenuStepsList",props:{unit:{required:!0,type:i(374).a},links:{required:!0},links_disabled:{required:!1},is_element_required:{required:!1}},methods:{filtered_step_elements:function filtered_step_elements(t){var e=this;return t.filter((function(t){return!e.is_element_required||e.is_element_required(t)}))}}},s=i(3),a=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"nav nav-stacked nav-row nav-pills"},[t._l(t.unit.steps,(function(e){return i("li",{key:e.values.id},[t.links_disabled?i("span",{staticClass:"block unit-menu__step-link"},[i("span",{staticClass:"inline-block",class:{"text-success":t.$route.params.step_id+""===e.values.id.toString()}},[i("span",{staticClass:"unit-menu__step-header"},[t._v(t._s(e.values.number)+".")]),t._v(" "),i("span",{staticClass:"unit-menu__step-name"},[t._v(t._s(e.values.title))])])]):i("router-link",{staticClass:"block bold unit-menu__step-link",attrs:{to:t.links.step_link(t.$route,e,t.unit.values.classes_id)}},[i("span",{staticClass:"inline-block",class:{"text-success":t.$route.params.step_id+""===e.values.id.toString()}},[i("span",{staticClass:"unit-menu__step-header"},[t._v(t._s(e.values.number)+".")]),t._v(" "),i("span",{staticClass:"unit-menu__step-name"},[t._v(t._s(e.values.title))])])]),t._v(" "),i("ul",{staticClass:"nav nav-stacked nav-row nav nav-pills nav-blue no-margins"},t._l(t.filtered_step_elements(e.step_elements),(function(n){return i("li",{key:n.values.id},[t.links_disabled?i("span",{staticClass:"block unit-menu__step-link m-l-sm"},[i("div",{staticClass:"flex flex-stretch"},[i("div",{staticClass:"inline-block flex-8"},[t.$yandex?t._e():i("i",{staticClass:"icon-fixed-width",class:n.get_icon()}),t._v(" "),t.$yandex?i("span",{staticClass:"unit-menu__step-header"},[t._v(t._s(e.values.number)+"."+t._s(n.values.number))]):t._e(),t._v(" "),i("span",{staticClass:"unit-menu__element-name"},[t._v(t._s(n.get_title()))])]),t._v(" "),t._t("score",null,{unit:t.unit,step_element:n})],2)]):i("router-link",{staticClass:"block unit-menu__element-link m-l-sm",attrs:{to:t.links.step_element_link(t.$route,n,t.unit.values.classes_id)}},[i("div",{staticClass:"flex flex-stretch"},[i("div",{staticClass:"inline-block flex-8",class:{"text-success":n&&t.$route.params.step_element_id===n.values.id}},[t.$yandex?t._e():i("i",{staticClass:"icon-fixed-width",class:n.get_icon()}),t._v(" "),t.$yandex?i("span",{staticClass:"unit-menu__step-header"},[t._v(t._s(e.values.number)+"."+t._s(n.values.number))]):t._e(),t._v(" "),i("span",{staticClass:"unit-menu__element-name"},[t._v(t._s(n.get_title()))])]),t._v(" "),t._t("badge",null,{step_element:n}),t._v(" "),t._t("score",null,{step_element:n,unit:t.unit})],2)])],1)})),0)],1)})),t._v(" "),t._t("footer")],2)}),[],!1,null,null,null);e.a=a.exports},1932:function(t,e,i){"use strict";i(11),i(7),i(12);var n=i(374),s=i(244),a=i(640),r=i(2078),o=i(522),l={name:"unit-menu",components:{UnitMenuHeader:r.a,RemainDate:a.a},props:{unit:{type:n.a,required:!0},links:{required:!0},links_disabled:{required:!1,type:Boolean},menu_disabled:{required:!1,type:Boolean},is_element_required:{type:Function,required:!1}},data:function data(){return{unit_timing:null,unit_timers:null}},computed:{is_abstract:function is_abstract(){return this.$store.state.context.is_abstract_course}},methods:{update_timers:function update_timers(){this.unit_timing=Object(o.b)(this.$store.state,this.unit.values.id),this.unit_timers=new s.b(this.unit_timing).create_timers(this)},open_unit:function open_unit(t){var e;"unit-menu__unit-name"!==t.target.className&&(this.$route.params.step_id&&(e=this.$store.state.models.steps[this.$route.params.step_id].unit_id),this.$route.params.unit_id&&(e=this.$route.params.unit_id),e!==this.unit.values.id&&this.$router.push(this.links.unit_link(this.$route,this.unit)))}},created:function created(){this.update_timers()},watch:{"$store.state.models.unit_users":{handler:function handler(){this.update_timers()},deep:!0},"$store.state.models.units":{handler:function handler(){this.update_timers()},deep:!0},"unit.values":{deep:!0,handler:function handler(t){var e=Object(o.b)(this.$store.state,t.id);this.unit_timers=new s.b(e).create_timers()}}}},u=(i(2119),i(3)),_=Object(u.a)(l,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return!e.unit.values.private&&e.unit_timers.is_started||!e.$store.state.login.user_data.is_pupil&&!e.$store.state.login.user_data.is_client?n("div",{staticClass:"panel unit-menu-item",class:(t={stripped:e.unit.values.private&&!e.$yandex},t["panel-"+e.unit.css_color+"-light"]=!0,t["unit-menu__disabled_heading"]=(e.links_disabled||e.menu_disabled)&&e.unit.values.id!=e.$route.params.unit_id,t.stripped_disabled=e.unit.values.private&&(e.links_disabled||e.menu_disabled)&&e.unit.values.id!=e.$route.params.unit_id&&!e.$yandex,t)},[n("div",{staticClass:"panel-heading unit-menu-item__heading clickable",on:{click:e.open_unit}},[n("unit-menu-header",{attrs:{unit:e.unit,links:e.links}},[n("template",{slot:"unit-icon"},[e._t("unit-icon")],2)],2),e._v(" "),n("div",{staticClass:"cell nowrap unit-menu__unit-timer"},[!e.is_abstract&&e.unit_timers.is_visible?n("a",{class:{unit_menu__text_muted:(e.links_disabled||e.menu_disabled)&&e.unit.values.id!==+e.$route.params.unit_id}},[e.unit_timers.is_finished?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$options.filters.moment(e.unit_timers.unit_timing.date_till,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.date_till, 'L LT')"}],staticClass:"text-danger bold inline-block"},[e._v("\n          "+e._s(e.$gettext("окончен"))+"\n        ")]):e.unit_timers.is_solution_ended&&e.unit_timers.is_infinity?n("span",{staticClass:"text-warning bold inline-block"},[e._v("\n          "+e._s(e.$gettext("дорешивание"))+"\n        ")]):e.unit_timers.is_solution_ended?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$options.filters.moment(e.unit_timers.unit_timing.date_till,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.date_till, 'L LT')"}],staticClass:"text-warning bold inline-block"},[e._v("\n          "+e._s(e.$gettext("дорешивание"))+"\n          "),n("br"),e._v(" "),n("remain-date",{attrs:{value:e.unit_timers.unit_timing.date_till,period:1e3}})],1):e.unit_timers.is_started?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$options.filters.moment(e.unit_timers.unit_timing.solution_datetime_till,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.solution_datetime_till, 'L LT')"}],staticClass:"text-success bold inline-block"},[e._v("\n          "+e._s(e.$gettext("до конца"))+"\n          "),n("br"),e._v(" "),n("remain-date",{attrs:{value:e.unit_timers.unit_timing.solution_datetime_till,period:1e3}})],1):n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$options.filters.moment(e.unit_timers.unit_timing.date_from,"L LT"),expression:"$options.filters.moment(unit_timers.unit_timing.date_from, 'L LT')"}],staticClass:"text-info bold inline-block"},[e._v("\n          "+e._s(e.$gettext("начало"))+"\n          "),n("br"),e._v(" "),n("remain-date",{attrs:{value:e.unit_timers.unit_timing.date_from,period:1e3}})],1)]):e._e()])],1),e._v(" "),n("div",{staticClass:"panel-body unit-menu-item__body"},[e._t("unit-content",null,{unit:e.unit,links:e.links,links_disabled:e.links_disabled,is_element_required:e.is_element_required,unit_timers:e.unit_timers})],2),e._v(" "),e._t("panel-footer")],2):e._e()}),[],!1,null,null,null);e.a=_.exports},1989:function(t,e,i){},1990:function(t,e,i){},1991:function(t,e,i){},2078:function(t,e,i){"use strict";i(41),i(11),i(7),i(12);var n=i(374),s=(i(33),i(36),i(23),i(38),i(13)),a=i.n(s),r=(i(28),i(25),i(53),i(96),i(21)),o=i(22),l=i(428),u=i(63),_=i(132),c={name:"unit-remove",components:{AlertError:u.a},props:{unit:{required:!0,type:n.a}},data:function data(){return{open:!0,removed:!1}},methods:{to_detail:function to_detail(){if(this.unit.action_operator.detail(this.$store),this.removed){r.c.remove_instance(this.unit.values.id,l.b)(this.$store);var t=Object(_.c)(this.$route,"classes_content");this.$router.replace({name:t})}},remove:function remove(){var t=this;new r.a(o.b["api:unit_delete_api"](this.unit.values.id),this.unit.uid).on_before(r.c.hide_errors(this.unit.uid)).on_error(r.c.show_errors(this.unit.uid)).on_success((function(){t.removed=!0})).on_success((function(){t.open=!1})).execute(this.$store,{})}}},p=i(3);function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={name:"UnitMenuHeaderDropdown",components:{UnitRemove:Object(p.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{staticClass:"right",attrs:{title:"Modal 1","append-to-body":!0},on:{hide:t.to_detail},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[t.unit?i("template",{slot:"title"},[i("div",{staticClass:"m-r"},[i("div",{staticClass:"flex flex-stretch"},[i("div",{staticClass:"flex-1-auto"},[t._v(t._s(t.$gettext("Удаление блока")))])])])]):t._e(),t._v(" "),t.unit?[i("alert-error",{attrs:{uid:t.unit.uid}},[i("template",{slot:"no-errors"},[i("div",{staticClass:"bs-callout bs-callout-danger no-top"},[i("div",{staticClass:"h4"},[t._v(t._s(t.$gettext("Вы уверены, что хотите удалить блок"))+" "+t._s(t.unit.values.name)+" ?")]),t._v("\n        "+t._s(t.$gettext("Будут удалены все элементы и пользовательские данные"))+"\n      ")])])],2)]:t._e(),t._v(" "),i("template",{slot:"footer"},[i("button",{staticClass:"btn btn-inverse",class:t.unit.action_info.disabled_dict,on:{click:t.remove}},[t._v(t._s(t.$gettext("Удалить")))]),t._v(" "),i("a",{staticClass:"btn btn-default",on:{click:function(e){t.open=!1}}},[i("i",{staticClass:"icon-undo"}),t._v(" "+t._s(t.$gettext("Отменить")))])])],2)}),[],!1,null,null,null).exports},props:{unit:{type:n.a,required:!0}},data:function data(){return{django_urls:o.b,icon_angle:void 0,show:!1}},methods:{unit_private_toggler:function unit_private_toggler(){return new r.a(o.b["api:unit_update_api"](this.unit.values.id),this.unit.uid).on_success(r.c.update_instance(l.b)).patch().execute(this.$store,{private:!this.unit.values.private})},go_to_route:function go_to_route(t){var e=Object(_.c)(this.$route,t.name),i=_objectSpread(_objectSpread({},t),{},{name:e});this.$router.push(i).catch((function(){})),this.show=!1},is_have_problem:function is_have_problem(){return this.unit.steps.forEach((function(t){if(t.step_elements.filter((function(t){return t.problem})).length)return!0})),!1},go_to_unit_content:function go_to_unit_content(){var t=this;if(!this.$store.state.models.step_elements[this.step_element_id]){var e=Object(_.c)(this.$route,"unit_content");this.$router.replace({name:e,params:{unit_id:this.unit.values.id}})}this.$nextTick((function(){t.$scrollTo(t.$root,0)}))}}},m=(i(2117),{name:"unit-menu-header",components:{UnitMenuHeaderDropdown:Object(p.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dropdown",{staticClass:"dropdown-form",model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("a",{directives:[{name:"shp-tooltip",rawName:"v-shp-tooltip",value:t.$gettext("Настройки блока"),expression:"$gettext('Настройки блока')"}],attrs:{gettext:"Настройки блока",role:"button"}},[i("span",{staticClass:"unit-menu__unit-name"},[t._v(t._s(t.unit.values.name))]),t._v(" "),i("i",{staticClass:"icon-angle-down"})]),t._v(" "),i("template",{slot:"dropdown"},[i("li",[i("a",{attrs:{role:"button"},on:{click:t.go_to_unit_content}},[i("i",{staticClass:"m-r icon-list-ol icon-large"}),t._v("\n      "+t._s(t.$gettext("Наполнение"))+"\n        ")])]),t._v(" "),i("li",[i("a",{on:{click:function(e){return e.stopPropagation(),t.go_to_route({name:"unit_edit",params:{unit_id:t.unit.values.id}})}}},[i("i",{staticClass:"m-r icon-cogs icon-large"}),t._v("\n      "+t._s(t.$gettext("Настройки"))+"\n        ")])]),t._v(" "),t.unit.values.is_non_editable?t._e():i("li",[i("a",{on:{click:function(e){return e.stopPropagation(),t.go_to_route({name:"contest_edit",params:{unit_id:t.unit.values.id}})}}},[i("i",{staticClass:"m-r icon-check icon-large"}),t._v("\n      "+t._s(t.$gettext("Оценивание"))+"\n        ")])]),t._v(" "),i("li",[i("a",{on:{click:function(e){return e.stopPropagation(),t.go_to_route({name:"unit_relocate",params:{unit_id:t.unit.values.id}})}}},[i("i",{staticClass:"m-r icon-move icon-large"}),t._v("\n      "+t._s(t.$gettext("Расположение"))+"\n        ")])]),t._v(" "),i("li",[i("a",{on:{click:function(e){return e.stopPropagation(),t.go_to_route({name:"unit_results",params:{unit_id:t.unit.values.id}})}}},[i("i",{staticClass:"m-r icon-large icon-trophy"}),t._v("\n      "+t._s(t.$gettext("Результаты"))+"\n        ")])]),t._v(" "),i("li",[i("a",{attrs:{role:"button"},on:{click:t.unit_private_toggler}},[i("i",{staticClass:"m-r icon-large icon-eye-open"}),t._v(" "),t.unit.values.private?i("span",[t._v("\n            "+t._s(t.$gettext("Сделать блок открытым"))+"\n          ")]):i("span",[t._v("\n            "+t._s(t.$gettext("Скрыть блок"))+"\n          ")])])]),t._v(" "),i("li",[t.is_have_problem&&t.unit.contest?i("a",{attrs:{role:"button",href:t.django_urls["api:contest_statements_api"](t.unit.contest.values.id)}},[i("i",{staticClass:"m-r icon-print icon-large"}),t._v("\n      "+t._s(t.$gettext("Печать условий"))+"\n        ")]):t._e()]),t._v(" "),i("li",[t.is_have_problem?i("a",{attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.go_to_route({name:"unit_runs_list",params:{unit_id:t.unit.values.id}})}}},[i("i",{staticClass:"m-r icon-keyboard icon-large"}),t._v("\n        "+t._s(t.$gettext("Список посылок"))+"\n      ")]):t._e()]),t._v(" "),i("li",[i("a",{attrs:{role:"button"},on:{click:function(e){return t.unit.action_operator.remove(t.$store)}}},[i("i",{staticClass:"m-r icon-trash icon-large"}),t._v("\n      "+t._s(t.$gettext("Удалить блок"))+"\n        ")])]),t._v(" "),t.unit.action_info.is_remove?i("unit-remove",{attrs:{unit:t.unit}}):t._e()],1)],2)}),[],!1,null,null,null).exports},props:{unit:{type:n.a,required:!0},links:{required:!1}},data:function data(){return{is_client:this.$store.state.result.is_preview_mode||this.$store.state.login.user_data.is_client}},computed:{is_show_settings:function is_show_settings(){return!this.is_client&&"import_step_content"!==this.$route.meta.name&&"import_step_element_content"!==this.$route.meta.name&&"diary_classes"!==this.$route.meta.name&&!this.$store.state.result.is_preview_mode},tooltip_time:function tooltip_time(){return this.$gettext("Время на прохождение:")+" "+this.unit.values.time_to_pass+" "+this.$gettext("минут")}}}),v=(i(2118),Object(p.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cell full-width"},[i("div",{staticClass:"panel-title flex flex-vertical-center"},[i("a",{directives:[{name:"shp-tooltip",rawName:"v-shp-tooltip",value:t.unit.private_message,expression:"unit.private_message"}],staticClass:"h4 flex flex-vertical-center",attrs:{gettext:"Приватный блок"}},[t._t("unit-icon",(function(){var e;return[t.unit.values.private?i("span",{staticClass:"m-r-xs unit_menu_lock_icon",class:"text-"+t.unit.css_color},[i("i",{staticClass:"icon-lock"})]):t.unit.values.is_timer_solution?i("span",{class:"text-"+t.unit.css_color},[i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltip_time,expression:"tooltip_time"}],staticClass:"icon-time"})]):i("span",{staticClass:"shp-donut",class:(e={},e["shp-donut-"+t.unit.css_color]=!0,e)})]})),t._v(" "),t.unit.values.is_team_enabled?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$gettext("Командный блок"),expression:"$gettext('Командный блок')"}],staticClass:"icon-group ml-xs",attrs:{gettext:"Командный блок"}}):t._e(),t._v(" "),t.is_show_settings?t._e():i("span",{staticClass:"unit-menu__unit-name m-l-sm"},[t._v(t._s(t.unit.values.name))])],2),t._v(" "),t.is_show_settings?i("unit-menu-header-dropdown",{staticClass:"m-l-xs",attrs:{unit:t.unit}}):t._e()],1)])}),[],!1,null,null,null));e.a=v.exports},2117:function(t,e,i){"use strict";i(1989)},2118:function(t,e,i){"use strict";i(1990)},2119:function(t,e,i){"use strict";i(1991)}}]);
//# sourceMappingURL=28.28.f83c22f49777543901b6.js.map